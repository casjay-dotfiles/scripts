.\" Manpage for buildx
.TH man 1 "11 September 2025" "202208042122-git" "buildx"

.SH NAME
buildx \- Docker buildx wrapper for multi-platform container builds

.SH DESCRIPTION
A comprehensive wrapper around Docker buildx that provides multi-platform container building capabilities with support for multiple registries, automatic tagging, and build automation.

.SH SYNOPSIS
buildx [options] [command] [dockerfile]

.SH COMMANDS
.TP
.B init
Setup docker to use buildx with multi-platform support
.TP
.B status
Get buildx status and configuration info
.TP
.B version  
Show version information for buildx components
.TP
.B all
Build all Dockerfiles in the current directory
.TP
.B run [dockerfile]
Build a specific dockerfile
.TP
.B build [files...]
Build specified dockerfile(s)
.TP
.B cron [dirs...]
Automated build for directories (cron mode)
.TP
.B automated [dirs...]
Same as cron - automated build mode

.SH API COMMANDS
.TP
.B api list
List all available images in repository
.TP  
.B api search [query]
Search for an image
.TP
.B api sources [query]  
Lookup sources used to build image
.TP
.B api clone [repo]
Clone the source repository
.TP
.B api tags [repo/image]
List available tags for an image
.TP
.B api delete [repo]
Delete a repository
.TP
.B api update [repo]
Update repository metadata

.SH OPTIONS
.TP
.B \-\-registry [url]
Set container registry (supports multiple registries via multiple calls or comma-separated list)
.TP
.B \-\-tag [tag]
Set image tag (supports multiple tags via multiple calls or comma-separated list)
.TP
.B \-\-url [full-url]
Specify complete custom image URL with smart completion
.TP
.B \-\-repo [name]
Set repository name
.TP
.B \-\-user [name]  
Set user/organization name
.TP
.B \-\-image [name]
Set image name (overrides auto-detection)
.TP
.B \-\-platform [arch]
Set target platform (x64, arm, arm64, or full platform string)
.TP
.B \-\-dir [path]
Set working directory
.TP
.B \-\-no-registry
Disable additional registries
.TP
.B \-\-no-repo
Clear repository setting
.TP
.B \-\-force
Force rebuild/reinstall of buildx components
.TP
.B \-\-cleanup
Enable container cleanup after build
.TP
.B \-\-gen-script
Generate build script without executing
.TP
.B \-\-script
Use custom build.sh script if available
.TP
.B \-\-no-pull
Skip pulling updated image after build
.TP
.B \-\-help
Display this help message
.TP
.B \-\-version
Display current version
.TP
.B \-\-config
Create user configuration file
.TP
.B \-\-options
Show all available options
.TP
.B \-\-debug
Enable debugging output
.TP
.B \-\-raw
Remove all formatting from output

.SH EXAMPLES
.TP
.B buildx init
Initialize buildx with multi-platform support
.TP
.B buildx
Build Dockerfile in current directory
.TP
.B buildx all
Build all Dockerfiles in current directory
.TP
.B buildx \-\-registry ghcr.io \-\-user myorg \-\-repo myapp
Build and push to GitHub Container Registry with custom org/repo
.TP
.B buildx \-\-registry ghcr.io,docker.io \-\-tag latest,v1.0
Build and push to multiple registries with multiple tags
.TP
.B buildx \-\-url ghcr.io/myorg/myapp:latest,docker.io/myorg/myapp:v1.0
Build with complete custom image URLs
.TP
.B buildx \-\-platform linux/amd64,linux/arm64 \-\-tag stable
Build for multiple platforms with specific tag
.TP
.B buildx cron /path/to/projects
Automated build for all projects in directory
.TP
.B buildx api list
List available images in default repository
.TP
.B buildx api search myapp
Search for images containing "myapp"

.SH FILES
.TP
.I ~/.config/myscripts/buildx/settings.conf
Configuration file with buildx settings
.TP
.I ~/.local/log/buildx/
Log directory organized by registry/org/repo/version.log
.TP
.I .env.scripts
Project-specific environment variables (created by gen-dockerfile)
.TP
.I /usr/local/bin/buildx
Main buildx script executable

.SH ENVIRONMENT
.TP
.B ENV_ORG_NAME
Organization/user name from .env.scripts
.TP
.B ENV_IMAGE_NAME  
Image name from .env.scripts
.TP
.B ENV_REGISTRY_URL
Registry URL from .env.scripts
.TP
.B ENV_IMAGE_TAG
Image tag from .env.scripts
.TP
.B ENV_ADD_TAGS
Additional tags from .env.scripts
.TP
.B BUILDX_DOCKER_PLATFORMS
Default platforms for multi-arch builds (default: linux/amd64,linux/arm64)

.SH NOTES
The buildx wrapper integrates with gen-dockerfile to use .env.scripts files for automatic configuration. Command line options override environment variables. Multiple registries and tags are supported through comma-separated lists or multiple option calls.

.SH LICENSE
WTFPL

.SH BUGS
No known bugs.

.SH REPORTING BUGS
https://github.com/casjay-dotfiles/issues

.SH AUTHOR
Currently maintained by Jason Hempstead <jason@casjaysdev.pro>
