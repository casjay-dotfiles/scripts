.TH DETECTOSTYPE "1" "December 2025" "detectostype 202509191635-git" "User Commands"
.SH NAME
detectostype \- Detect operating system type, distribution, version, and architecture
.SH SYNOPSIS
.B detectostype
[\\fI\\,OPTIONS\\/\\fR] [\\fI\\,COMMAND\\/\\fR]
.br
.B source detectostype
(to export variables in current shell)
.SH DESCRIPTION
.B detectostype
is a portable POSIX shell script that detects the current operating system, Linux distribution, distribution version, codename, and CPU architecture. It can be used both as a standalone command and as a sourced script to export detection variables for use in other scripts.
.PP
The script provides comprehensive operating system detection supporting Linux, macOS (Darwin), FreeBSD, Solaris, AIX, and Windows environments. For Linux systems, it identifies specific distributions including Arch, Debian, Ubuntu, RHEL, Fedora, and their derivatives.
.PP
When sourced into a shell, detectostype exports OS detection variables without producing any output, making it ideal for use in shell scripts that need to adapt behavior based on the running system.
.SH COMMANDS
.TP
.B detectostype
(no arguments) Export OS detection variables
.TP
.B detectostype all
Display all operating system information including OS name, CPU type, distribution name, distribution ID, codename, and version
.TP
.B detectostype arch
Display CPU architecture information (CPU type and name)
.TP
.B detectostype name
Display distribution information (distribution name, ID, codename, version)
.TP
.B detectostype type
Display operating system type (Linux, Mac, FreeBSD, etc.)
.SH OPTIONS
.TP
.BR \\-\\-help
Display help message and exit
.TP
.BR \\-\\-version
Show script version information and exit
.TP
.BR \\-\\-options
Display all available command-line options and commands
.TP
.BR \\-\\-debug
Enable debug mode with command tracing (set -x)
.TP
.BR \\-\\-raw
Disable colorized output for plain text display
.SH EXAMPLES
.TP
.B detectostype all
Display complete system information
.TP
.B detectostype arch
Show CPU architecture: amd64, arm64, armv7, etc.
.TP
.B detectostype name
Display distribution name, ID, and version
.TP
.B detectostype type
Show OS type: Linux, Mac, FreeBSD, etc.
.TP
.B source detectostype
Load OS detection variables into current shell environment
.TP
.B . detectostype && echo "$DISTRO_NAME"
Source script and use $DISTRO_NAME variable
.SH EXPORTED VARIABLES
When sourced or run, detectostype exports the following environment variables:
.TP
.B OS_NAME
Operating system name: Linux, Mac, FreeBSD, Solaris, AIX, Windows, or Unknown
.TP
.B DISTRO_NAME
Linux distribution name: Arch, Debian, Ubuntu, Fedora, Rocky, Alma, CentOS, Kali, Mint, Manjaro, etc. For macOS: MacOS. For Windows: Windows
.TP
.B DISTRO_ID
Distribution family identifier: Arch, Debian, Ubuntu, RHEL, Raspbian, or N/A
.TP
.B CODE_NAME
Distribution codename (e.g., bookworm, jammy, noble, kali, etc.) or N/A if not available
.TP
.B DISTRO_VERSION
Distribution major version number (e.g., 12, 22, 9) or N/A if not available
.TP
.B CPU_TYPE
CPU architecture type: amd64, arm64, armv5, armv6, armv7, 386, or Unknown
.TP
.B CPU_NAME
Human-readable CPU description: 64bit, AArch64, ARM 7, 32bit, Unknown
.TP
.B DISTRO
Legacy alias for DISTRO_NAME (deprecated, use DISTRO_NAME)
.TP
.B DISTROID
Legacy alias for DISTRO_ID (deprecated, use DISTRO_ID)
.TP
.B OS
Legacy alias for OS_NAME (deprecated, use OS_NAME)
.TP
.B KERNEL_VERSION
Linux kernel version from uname -r
.SH DETECTION METHODS
detectostype uses multiple detection methods in order of preference:
.SS Operating System Detection
.IP \\(bu 2
uname -s output (primary method)
.IP \\(bu 2
$OS environment variable (fallback)
.SS Distribution Detection
.IP \\(bu 2
lsb_release command (if available)
.IP \\(bu 2
/etc/os-release file (standard method)
.IP \\(bu 2
/etc/debian_version for Debian-based systems
.IP \\(bu 2
/etc/redhat-release for Red Hat-based systems
.IP \\(bu 2
uname -s fallback for non-Linux systems
.SS Version Detection
.IP \\(bu 2
VERSION field from /etc/os-release
.IP \\(bu 2
VERSION_ID field from /etc/os-release
.IP \\(bu 2
BUILD_ID field from /etc/os-release
.IP \\(bu 2
/etc/debian_version for Debian
.IP \\(bu 2
/etc/redhat-release for RHEL
.IP \\(bu 2
lsb_release -r for LSB systems
.IP \\(bu 2
sw_vers -productVersion for macOS
.SS Architecture Detection
.IP \\(bu 2
uname -m output for CPU architecture
.IP \\(bu 2
Normalization to standard types (amd64, arm64, etc.)
.SH SUPPORTED SYSTEMS
.SS Operating Systems
.TP
.B Linux
All distributions (comprehensive detection)
.TP
.B macOS (Darwin)
Detected as "Mac" with version from sw_vers
.TP
.B FreeBSD
Full detection support
.TP
.B Solaris
Basic detection support
.TP
.B AIX
Basic detection support
.TP
.B Windows
Detection via MSYS/MinGW/Cygwin environments
.SS Linux Distributions
.TP
.B Arch Family
Arch Linux, Manjaro, ArcoLinux, BlackArch (detected as Arch)
.TP
.B Debian Family
Debian, Kali, Peppermint, Parrot (detected as Debian)
.TP
.B Ubuntu Family
Ubuntu, Linux Mint, elementary OS, KDE neon (detected as Ubuntu)
.TP
.B RHEL Family
RHEL, CentOS, Scientific Linux, AlmaLinux, Rocky Linux, CasjayOS (detected as RHEL)
.TP
.B Fedora
Fedora standalone
.TP
.B Raspbian
Raspberry Pi OS
.SS CPU Architectures
.IP \\(bu 2
x86_64 → amd64 (64-bit Intel/AMD)
.IP \\(bu 2
aarch64 → arm64 (64-bit ARM)
.IP \\(bu 2
armv7* → armv7 (32-bit ARM v7)
.IP \\(bu 2
armv6* → armv6 (32-bit ARM v6)
.IP \\(bu 2
armv5* → armv5 (32-bit ARM v5)
.IP \\(bu 2
i686, i386, x86 → 386 (32-bit Intel)
.SH USAGE IN SCRIPTS
detectostype is designed to be sourced in shell scripts for OS-specific behavior:
.PP
.RS 4
.EX
#!/bin/sh
# Source detectostype to get OS variables
. detectostype

# Use variables for OS-specific logic
case "$DISTRO_ID" in
  Debian|Ubuntu)
    apt-get update
    ;;
  RHEL)
    yum update
    ;;
  Arch)
    pacman -Syu
    ;;
esac

# Architecture-specific behavior
case "$CPU_TYPE" in
  amd64)
    download_amd64_binary
    ;;
  arm64)
    download_arm64_binary
    ;;
esac
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - OS detected successfully
.TP
.B 1
Error - invalid option or unknown command
.SH PORTABILITY
.IP \\(bu 2
Written in POSIX sh for maximum compatibility
.IP \\(bu 2
Works with sh, bash, ksh, zsh, dash
.IP \\(bu 2
No external dependencies beyond standard UNIX utilities
.IP \\(bu 2
Detects when sourced vs executed directly
.IP \\(bu 2
Safe to source multiple times (idempotent)
.SH NOTES
.IP \\(bu 2
When sourced, exports variables silently without output
.IP \\(bu 2
When executed, can display formatted output based on command
.IP \\(bu 2
Uses /etc/os-release as primary source for modern distributions
.IP \\(bu 2
Falls back to legacy detection methods for older systems
.IP \\(bu 2
Normalizes distribution names by removing version numbers
.IP \\(bu 2
Provides both new variable names (OS_NAME) and legacy names (OS) for compatibility
.IP \\(bu 2
Version numbers are sanitized to remove non-numeric characters
.IP \\(bu 2
Codename detection attempts multiple sources
.IP \\(bu 2
Architecture detection normalizes to standard package manager conventions
.IP \\(bu 2
macOS detected as "Mac" for historical compatibility
.IP \\(bu 2
Windows detection works in MSYS2, MinGW, Cygwin, and WSL environments
.SH LIMITATIONS
.IP \\(bu 2
Distribution detection may not cover all niche distributions
.IP \\(bu 2
Version detection can be inconsistent across distributions
.IP \\(bu 2
Codename may not be available for all distributions
.IP \\(bu 2
Windows detection limited to Unix-like environments (WSL, Cygwin, MSYS2)
.IP \\(bu 2
Some distributions may require manual identification
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \\(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR uname (1),
.BR lsb_release (1)
.PP
os-release specification: https://www.freedesktop.org/software/systemd/man/os-release.html
