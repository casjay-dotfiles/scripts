.TH DOCKERIGNORE "1" "December 2025" "dockerignore 202210021714-git" "User Commands"
.SH NAME
dockerignore \- Create and manage .dockerignore files for Docker projects
.SH SYNOPSIS
.B dockerignore
[\fI\,OPTIONS\/\fR] [\fI\,PATTERN\/\fR...]
.SH DESCRIPTION
.B dockerignore
is a utility for creating and managing .dockerignore files in Docker projects. It automatically generates .dockerignore files with common exclusion patterns and allows adding custom patterns to exclude files and directories from Docker build context.
.PP
The script creates or updates a .dockerignore file in the working directory with default exclusions for common build artifacts, dependency directories, version control files, and other files that should not be included in Docker images. It prevents duplicate entries and provides feedback for each pattern added.
.PP
dockerignore simplifies Docker build optimization by managing build context exclusions, reducing image size and build time by excluding unnecessary files from the Docker build context.
.SH COMMANDS
.TP
.B dockerignore
Create or update .dockerignore with default patterns in current directory
.TP
.B dockerignore [patterns...]
Create or update .dockerignore with default patterns plus specified custom patterns
.TP
.B dockerignore --dir /path/to/project [patterns...]
Create or update .dockerignore in specified directory
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate or regenerate user configuration file with default settings
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output and command tracing (set -x)
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress non-essential output messages and notifications
.TP
.BR \-\-dir " " \fI\,DIRECTORY\/\fR
Set working directory where .dockerignore will be created (default: current directory)
.SH USAGE
.B dockerignore
.PP
Creates or updates .dockerignore in current directory with default patterns.
.PP
.B dockerignore pattern1 pattern2 pattern3
.PP
Creates or updates .dockerignore with default patterns plus specified custom patterns.
.PP
.B dockerignore --dir /path/to/project *.log *.tmp
.PP
Creates or updates .dockerignore in specified directory with custom patterns.
.SH DEFAULT PATTERNS
The script automatically adds these patterns to .dockerignore if not already present:
.SS Version Control
.RS
.IP \(bu 2
.gitkeep - Git placeholder files
.IP \(bu 2
.gitignore - Git ignore files
.IP \(bu 2
**/.gitkeep - Git placeholder files in all subdirectories
.IP \(bu 2
**/.gitignore - Git ignore files in all subdirectories
.RE
.SS Dependencies
.RS
.IP \(bu 2
node_modules/** - Node.js dependencies
.IP \(bu 2
.node_modules/** - Hidden Node.js dependencies
.IP \(bu 2
**/node_modules/** - Node.js dependencies in all subdirectories
.IP \(bu 2
**/.node_modules/** - Hidden Node.js dependencies in all subdirectories
.RE
.SS Custom Patterns
Additional patterns can be specified via:
.RS
.IP \(bu 2
DOCKERIGNORE_IGNORE_LIST environment variable
.IP \(bu 2
Configuration file setting
.IP \(bu 2
Command-line arguments
.RE
.SH PATTERN SYNTAX
Patterns follow .dockerignore syntax (similar to .gitignore):
.TP
.B file.txt
Exclude specific file in root directory
.TP
.B *.log
Exclude all files with .log extension in root
.TP
.B **/*.log
Exclude all .log files in all subdirectories
.TP
.B dir/
Exclude entire directory
.TP
.B !file.txt
Negate exclusion (include file even if previous pattern excluded it)
.SH EXAMPLES
.TP
.B dockerignore
Create .dockerignore in current directory with default patterns
.TP
.B dockerignore *.log *.tmp
Add *.log and *.tmp patterns to .dockerignore
.TP
.B dockerignore --dir /opt/project
Create .dockerignore in /opt/project with defaults
.TP
.B dockerignore --dir ~/myapp node_modules .env
Create .dockerignore in ~/myapp excluding node_modules and .env
.TP
.B dockerignore "**/*.pyc" "__pycache__/**"
Exclude Python compiled files and cache directories
.TP
.B dockerignore .git .github .vscode
Exclude version control and editor directories
.SH FILES
.TP
.B .dockerignore
Docker ignore file created in working directory
.TP
.B ~/.config/myscripts/dockerignore/settings.conf
User configuration file for dockerignore preferences
.TP
.B ~/.local/share/myscripts/dockerignore/backups/
Configuration backup directory
.TP
.B ~/.local/log/dockerignore/
Log file directory for error tracking
.TP
.B ~/.local/tmp/system_scripts/dockerignore/
Temporary files directory
.TP
.B ~/.cache/dockerignore/
Cache directory
.SH ENVIRONMENT VARIABLES
.TP
.B DOCKERIGNORE_CONFIG_DIR
Override default configuration directory (~/.config/myscripts/dockerignore/)
.TP
.B DOCKERIGNORE_IGNORE_LIST
Space-separated list of additional default patterns to add
.TP
.B DOCKERIGNORE_OUTPUT_COLOR_1
Primary output color code for terminal display (default: 33 for yellow)
.TP
.B DOCKERIGNORE_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B DOCKERIGNORE_OUTPUT_COLOR_GOOD
Success message color code (default: 2 for green)
.TP
.B DOCKERIGNORE_OUTPUT_COLOR_ERROR
Error message color code (default: 1 for red)
.TP
.B DOCKERIGNORE_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B DOCKERIGNORE_NOTIFY_CLIENT_NAME
Customize notification client name displayed in desktop notifications
.TP
.B DOCKERIGNORE_NOTIFY_CLIENT_ICON
Customize notification icon (default: notification-new)
.TP
.B DOCKERIGNORE_NOTIFY_CLIENT_URGENCY
Notification urgency level: low, normal, critical (default: normal)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/dockerignore/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Additional patterns to always include
DOCKERIGNORE_IGNORE_LIST="*.bak *.swp .DS_Store"

# Notification settings
DOCKERIGNORE_NOTIFY_ENABLED="yes"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - .dockerignore created or updated successfully
.TP
.B 1
General error or directory does not exist
.TP
.B 3
Required command not found (bash)
.SH OPERATION
.SS Creating New .dockerignore
When no .dockerignore exists in working directory:
.RS
.IP 1. 3
Creates new .dockerignore file
.IP 2. 3
Adds header comment
.IP 3. 3
Adds all default patterns
.IP 4. 3
Adds custom patterns from config
.IP 5. 3
Adds command-line specified patterns
.IP 6. 3
Reports each pattern added
.RE
.SS Updating Existing .dockerignore
When .dockerignore already exists:
.RS
.IP 1. 3
Checks each default pattern
.IP 2. 3
Skips patterns already present
.IP 3. 3
Adds missing default patterns
.IP 4. 3
Adds new custom patterns
.IP 5. 3
Reports "Already ignoring" for duplicates
.IP 6. 3
Reports newly added patterns
.RE
.SH PATTERN CHECKING
The script uses exact matching to prevent duplicates:
.RS
.IP \(bu 2
Uses grep -F for fixed string matching (no regex)
.IP \(bu 2
Uses grep -w for whole word matching
.IP \(bu 2
Uses grep -x for exact line matching
.IP \(bu 2
Prevents duplicate pattern entries
.IP \(bu 2
Case-sensitive pattern comparison
.RE
.SH COMMON PATTERNS
.SS Node.js Projects
.RS
.EX
dockerignore node_modules npm-debug.log .npm \\
  coverage .nyc_output dist build
.EE
.RE
.SS Python Projects
.RS
.EX
dockerignore "**/*.pyc" "__pycache__/**" \\
  "*.egg-info" .pytest_cache .tox venv
.EE
.RE
.SS Ruby Projects
.RS
.EX
dockerignore .bundle vendor/bundle \\
  "*.gem" .rspec coverage tmp
.EE
.RE
.SS Go Projects
.RS
.EX
dockerignore vendor bin "*.test" coverage.txt
.EE
.RE
.SS Java/Gradle Projects
.RS
.EX
dockerignore .gradle build target \\
  "*.class" .settings .project
.EE
.RE
.SS General Development
.RS
.EX
dockerignore .git .github .vscode .idea \\
  "*.log" "*.tmp" .DS_Store Thumbs.db .env
.EE
.RE
.SH USE CASES
.SS New Docker Project Setup
.RS
.IP 1. 3
Initialize new project directory
.IP 2. 3
Run dockerignore to create .dockerignore
.IP 3. 3
Add project-specific patterns
.IP 4. 3
Create Dockerfile
.IP 5. 3
Build Docker image with optimized context
.RE
.SS Optimize Build Context
.RS
.IP 1. 3
Identify large unnecessary files in project
.IP 2. 3
Add patterns to exclude them
.IP 3. 3
Run dockerignore with custom patterns
.IP 4. 3
Verify smaller build context with docker build
.IP 5. 3
Enjoy faster build times
.RE
.SS Multi-Language Project
.RS
.IP 1. 3
Project contains multiple language environments
.IP 2. 3
Add patterns for all dependency directories
.IP 3. 3
Exclude all build artifacts
.IP 4. 3
Exclude all test/coverage files
.IP 5. 3
Keep only source code in Docker context
.RE
.SH DOCKER INTEGRATION
.SS Build Context Size
.dockerignore reduces Docker build context by excluding unnecessary files:
.RS
.EX
# Without .dockerignore
$ docker build .
Sending build context to Docker daemon  2.5GB

# With proper .dockerignore
$ docker build .
Sending build context to Docker daemon  15MB
.EE
.RE
.SS Build Time Impact
Smaller build context = faster builds:
.RS
.IP \(bu 2
Less data to transfer to Docker daemon
.IP \(bu 2
Faster COPY/ADD operations in Dockerfile
.IP \(bu 2
Smaller image layers
.IP \(bu 2
Improved caching efficiency
.RE
.SH NOTES
.IP \(bu 2
Patterns are added to end of .dockerignore file
.IP \(bu 2
Each pattern includes comment describing what it ignores
.IP \(bu 2
Existing patterns are never removed, only new ones added
.IP \(bu 2
Duplicate patterns are automatically skipped
.IP \(bu 2
Pattern matching is case-sensitive
.IP \(bu 2
Patterns follow Docker .dockerignore syntax (like .gitignore)
.IP \(bu 2
Working directory is changed to specified --dir location
.IP \(bu 2
.dockerignore is always created in root of working directory
.IP \(bu 2
No validation of pattern syntax (Docker handles invalid patterns)
.IP \(bu 2
Can be run multiple times safely (idempotent operation)
.SH TIPS
.SS Version Control Integration
Add .dockerignore to version control:
.RS
.EX
git add .dockerignore
git commit -m "Add Docker ignore patterns"
.EE
.RE
.SS Pattern Testing
Test .dockerignore effectiveness:
.RS
.EX
# List files that would be sent to Docker daemon
docker build --no-cache -t test . 2>&1 | grep "Sending build context"

# Or use docker-compose config to see context
docker-compose config
.EE
.RE
.SS Pattern Debugging
If unsure about pattern matching:
.RS
.IP \(bu 2
Check Docker documentation for .dockerignore syntax
.IP \(bu 2
Use docker build --no-cache to test
.IP \(bu 2
Examine build output for "Sending build context" size
.IP \(bu 2
Use ** for recursive patterns
.IP \(bu 2
Test patterns in temporary directory first
.RE
.SH TROUBLESHOOTING
.SS Patterns Not Working
.RS
.IP \(bu 2
Verify pattern syntax matches Docker .dockerignore format
.IP \(bu 2
Check for typos in pattern names
.IP \(bu 2
Remember patterns are case-sensitive
.IP \(bu 2
Use ** for recursive directory matching
.IP \(bu 2
Check .dockerignore file directly for added patterns
.RE
.SS Build Context Still Large
.RS
.IP \(bu 2
Run dockerignore again to add missing defaults
.IP \(bu 2
Identify large files with: du -sh * | sort -h
.IP \(bu 2
Add specific patterns for large files/directories
.IP \(bu 2
Consider relocating large files outside project
.IP \(bu 2
Check for hidden directories (.git, .svn, etc.)
.RE
.SS Directory Does Not Exist
.RS
.IP \(bu 2
Verify --dir path is correct
.IP \(bu 2
Use absolute paths to avoid confusion
.IP \(bu 2
Script will create directory if missing
.IP \(bu 2
Ensure you have write permissions
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
grep - Text pattern matching
.IP \(bu 2
printf - Text formatting
.RE
.TP
.B Optional:
.RS
.IP \(bu 2
docker - Docker for using .dockerignore files
.IP \(bu 2
git - Version control for .dockerignore tracking
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \(co 2022 Jason Hempstead, Casjays Developments
.br
License: LICENSE.md
.SH SEE ALSO
.BR docker (1),
.BR docker-build (1),
.BR gitignore (5)
.PP
Docker documentation on .dockerignore:
.br
https://docs.docker.com/engine/reference/builder/#dockerignore-file
.PP
Related tools:
.br
dockerignore-generator: https://github.com/codesuki/dockerignore-generator
.br
gitignore.io: https://www.toptal.com/developers/gitignore
