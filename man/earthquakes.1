.TH EARTHQUAKES "1" "December 2025" "earthquakes 202208062115-git" "User Commands"
.SH NAME
earthquakes \- Real-time earthquake data viewer from USGS with GUI display support
.SH SYNOPSIS
.B earthquakes
[\fI\,PERIOD\/\fR] [\fI\,MAGNITUDE\/\fR] [\fI\,search\/\fR] [\fI\,QUERY\/\fR]
.SH DESCRIPTION
.B earthquakes
is a command-line tool for retrieving and displaying real-time earthquake data from the United States Geological Survey (USGS) Earthquake Hazards Program. It fetches earthquake information via USGS GeoJSON feeds and displays detailed data including magnitude, location, timestamp, tsunami alerts, and event URLs.
.PP
The script supports filtering earthquakes by time period (hour, day, week, month) and magnitude threshold (significant, 4.5+, 2.5+, 1.0+). Data can be displayed in graphical dialog windows (yad/zenity) when available, or as plain text in console mode.
.PP
earthquakes simplifies earthquake monitoring by providing easy-to-use commands for filtering recent seismic activity, searching specific locations, and viewing formatted earthquake details with automatic timestamp conversion and data cleanup.
.SH COMMANDS
.TP
.B earthquakes
Show all earthquakes from past day (default: all magnitudes)
.TP
.B earthquakes hour [magnitude]
Show earthquakes from past hour
.TP
.B earthquakes day [magnitude]
Show earthquakes from past day
.TP
.B earthquakes week [magnitude]
Show earthquakes from past week
.TP
.B earthquakes month [magnitude]
Show earthquakes from past month
.SH MAGNITUDE FILTERS
.TP
.B major
Significant earthquakes only (noteworthy events)
.TP
.B 4
Magnitude 4.5 and above
.TP
.B 2
Magnitude 2.5 and above
.TP
.B 1 | minor
Magnitude 1.0 and above
.TP
.B all
All earthquakes regardless of magnitude (default)
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate or regenerate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress non-essential output messages
.SH USAGE
.B earthquakes
.PP
Shows all earthquakes from past day with GUI display (yad/zenity).
.PP
.B earthquakes day 4
.PP
Shows magnitude 4.5+ earthquakes from past day.
.PP
.B earthquakes week search California
.PP
Searches past week's data for earthquakes in California.
.PP
.B earthquakes month major
.PP
Shows only significant earthquakes from past month.
.SH SEARCH FUNCTIONALITY
Search earthquake data for specific locations or criteria:
.SS Search Syntax
.RS
.EX
earthquakes [period] search <query> [refineQuery]
earthquakes [period] [magnitude] search <query>
.EE
.RE
.SS Search Examples
.RS
.EX
earthquakes search California
earthquakes day search Japan
earthquakes week 4 search Pacific
earthquakes month search "San Francisco" earthquake
.EE
.RE
.SS Search Behavior
.RS
.IP \(bu 2
Case-insensitive pattern matching
.IP \(bu 2
Searches location (place) field
.IP \(bu 2
Optional second query for refinement
.IP \(bu 2
Returns matching results with full details
.IP \(bu 2
Shows "no results" message if nothing found
.RE
.SH DATA DISPLAY
Earthquake information displayed for each event:
.SS Data Fields
.RS
.IP \(bu 2
Place: Location description
.IP \(bu 2
Time: Event timestamp (YYYY-MM-DD HH:MM:SS)
.IP \(bu 2
Updated: Last update timestamp
.IP \(bu 2
Magnitude: Earthquake magnitude (numeric)
.IP \(bu 2
Alert: USGS alert level (none/green/yellow/orange/red)
.IP \(bu 2
Tsunami: Tsunami warning status (yes/no)
.IP \(bu 2
URL: Link to detailed USGS event page
.RE
.SS Display Format
.RS
.EX
Place: 5 km S of Pāhala, Hawaii
Time: 2025-12-09 10:30:45
Updated: 2025-12-09 10:35:12
Magnitude: 2.8
Alert: none
Tsunami: no
URL: https://earthquake.usgs.gov/earthquakes/eventpage/...
.EE
.RE
.SH GUI DISPLAY
Automatic GUI window display when available:
.SS Display Modes
.RS
.IP \(bu 2
yad: Preferred dialog tool (GTK-based)
.IP \(bu 2
zenity: Fallback dialog tool
.IP \(bu 2
console: Plain text output (SSH/no-GUI)
.RE
.SS Window Configuration
.RS
.IP \(bu 2
Default width: 900 pixels
.IP \(bu 2
Default height: 600 pixels
.IP \(bu 2
Configurable via EARTHQUAKES_YAD_WIDTH/HEIGHT
.IP \(bu 2
Title shows data type/search query
.IP \(bu 2
Text wrapping enabled
.IP \(bu 2
Centered on screen
.RE
.SS Display Requirements
.RS
.IP \(bu 2
$DISPLAY set (X11/Wayland)
.IP \(bu 2
Not SSH connection (or force CONSOLE_APP=true)
.IP \(bu 2
yad or zenity installed
.RE
.SH USGS API INTEGRATION
Data fetched from USGS Earthquake Hazards Program:
.SS API Endpoint
.RS
Base URL: https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary
.RE
.SS Feed Types
.RS
.IP \(bu 2
all_hour.geojson - All earthquakes, past hour
.IP \(bu 2
all_day.geojson - All earthquakes, past day
.IP \(bu 2
all_week.geojson - All earthquakes, past week
.IP \(bu 2
all_month.geojson - All earthquakes, past month
.IP \(bu 2
significant_*.geojson - Significant events only
.IP \(bu 2
4.5_*.geojson - Magnitude 4.5+ events
.IP \(bu 2
2.5_*.geojson - Magnitude 2.5+ events
.IP \(bu 2
1.0_*.geojson - Magnitude 1.0+ events
.RE
.SS GeoJSON Format
.RS
.EX
{
  "features": [
    {
      "properties": {
        "mag": 2.8,
        "place": "5 km S of Pāhala, Hawaii",
        "time": 1701432645000,
        "updated": 1701432945000,
        "alert": null,
        "tsunami": 0,
        "url": "https://..."
      }
    }
  ]
}
.EE
.RE
.SH DATA PROCESSING
JSON data processing pipeline:
.SS Processing Steps
.RS
.IP 1. 3
Fetch GeoJSON from USGS API
.IP 2. 3
Extract features[].properties with jq
.IP 3. 3
Convert timestamps (milliseconds to YYYY-MM-DD HH:MM:SS)
.IP 4. 3
Reformat to display structure
.IP 5. 3
Clean output (remove null, format tsunami yes/no)
.IP 6. 3
Remove duplicates and empty lines
.RE
.SS jq Transformations
.RS
.EX
# Timestamp conversion
jq '.time |= (. / 1000 | strftime("%Y-%m-%d %H:%M:%S"))'

# Field extraction
jq '[{Place:.place, Time:.time, Magnitude:.mag, ...}]'

# Null replacement
sed 's|null|none|g'

# Tsunami formatting
sed 's|tsunami: 1|tsunami: yes|g'
sed 's|tsunami: 0|tsunami: no|g'
.EE
.RE
.SH EXAMPLES
.TP
.B earthquakes
Show all earthquakes from past day
.TP
.B earthquakes hour
Show all earthquakes from past hour
.TP
.B earthquakes day major
Show significant earthquakes from past day
.TP
.B earthquakes week 4
Show magnitude 4.5+ earthquakes from past week
.TP
.B earthquakes month 2
Show magnitude 2.5+ earthquakes from past month
.TP
.B earthquakes day search California
Search past day for California earthquakes
.TP
.B earthquakes week major search Pacific
Search past week for major Pacific earthquakes
.TP
.B earthquakes month 4 search Japan
Search past month for 4.5+ earthquakes in Japan
.TP
.B earthquakes --raw | less
View earthquake data as plain text
.TP
.B CONSOLE_APP=true earthquakes
Force console mode (no GUI)
.SH FILES
.TP
.B ~/.config/myscripts/earthquakes/settings.conf
User configuration file for earthquakes preferences
.TP
.B ~/.local/share/myscripts/earthquakes/backups/
Configuration backup directory
.TP
.B ~/.local/log/earthquakes/
Log file directory
.TP
.B ~/.local/tmp/system_scripts/earthquakes/
Temporary files directory
.TP
.B ~/.cache/earthquakes/
Cache directory
.SH ENVIRONMENT VARIABLES
.TP
.B EARTHQUAKES_YAD_WIDTH
GUI window width in pixels (default: 900)
.TP
.B EARTHQUAKES_YAD_HEIGHT
GUI window height in pixels (default: 600)
.TP
.B EARTHQUAKES_API_URL
USGS API base URL (default: https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary)
.TP
.B EARTHQUAKES_SILENT
Suppress output messages when set to "true"
.TP
.B CONSOLE_APP
Force console mode when set to "true" (disables GUI)
.TP
.B DISPLAY
X11/Wayland display server (required for GUI mode)
.TP
.B SSH_CONNECTION
SSH connection indicator (disables GUI when set)
.TP
.B EARTHQUAKES_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B EARTHQUAKES_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B EARTHQUAKES_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/earthquakes/settings.conf supports the following settings:
.PP
.RS 4
.EX
# GUI window dimensions
EARTHQUAKES_YAD_WIDTH="1200"
EARTHQUAKES_YAD_HEIGHT="800"

# API endpoint (default is USGS)
EARTHQUAKES_API_URL="https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary"

# Notification settings
EARTHQUAKES_NOTIFY_ENABLED="yes"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - earthquake data retrieved and displayed
.TP
.B 1
Error retrieving data or no search results found
.SH MAGNITUDE SCALE
Understanding earthquake magnitudes:
.SS Richter/Moment Magnitude
.RS
.IP \(bu 2
< 2.0: Micro - Not felt, recorded by seismographs
.IP \(bu 2
2.0-2.9: Minor - Felt slightly by some people
.IP \(bu 2
3.0-3.9: Minor - Often felt, rarely causes damage
.IP \(bu 2
4.0-4.9: Light - Noticeable shaking, minimal damage
.IP \(bu 2
5.0-5.9: Moderate - Considerable damage to structures
.IP \(bu 2
6.0-6.9: Strong - Destructive in populated areas
.IP \(bu 2
7.0-7.9: Major - Serious damage over large areas
.IP \(bu 2
8.0+: Great - Total destruction, felt extremely far
.RE
.SH ALERT LEVELS
USGS alert level significance:
.RS
.IP \(bu 2
Green: Little or no impact
.IP \(bu 2
Yellow: Localized but significant impact
.IP \(bu 2
Orange: Regional impact and response
.IP \(bu 2
Red: Widespread disaster and international response
.IP \(bu 2
None: Alert level not assigned
.RE
.SH NOTES
.IP \(bu 2
Requires internet connection to access USGS API
.IP \(bu 2
Data updates every few minutes from USGS
.IP \(bu 2
GUI display requires yad or zenity installed
.IP \(bu 2
Timestamps automatically converted to local time format
.IP \(bu 2
jq required for JSON parsing
.IP \(bu 2
Magnitude scale is moment magnitude (Mw)
.IP \(bu 2
Search is case-insensitive
.IP \(bu 2
All earthquakes worldwide included
.IP \(bu 2
Historical data limited by feed type (hour/day/week/month)
.IP \(bu 2
Data sourced directly from USGS without caching
.SH TIPS
.SS Quick Monitoring
.RS
.EX
# Watch for new earthquakes
watch -n 300 earthquakes --raw

# Monitor specific region
earthquakes day search California | less

# Check for major events
earthquakes week major
.EE
.RE
.SS Console Mode
.RS
.EX
# Force text output
CONSOLE_APP=true earthquakes

# Disable colors
earthquakes --raw

# Pipe to text processor
earthquakes --raw | grep -i tsunami
.EE
.RE
.SS Custom Window Size
.RS
.EX
# Larger window
EARTHQUAKES_YAD_WIDTH=1400 EARTHQUAKES_YAD_HEIGHT=1000 earthquakes

# Smaller window
EARTHQUAKES_YAD_WIDTH=600 EARTHQUAKES_YAD_HEIGHT=400 earthquakes
.EE
.RE
.SH TROUBLESHOOTING
.SS No Data Displayed
.RS
.IP \(bu 2
Check internet connection
.IP \(bu 2
Verify USGS API is accessible: curl https://earthquake.usgs.gov
.IP \(bu 2
Check if jq is installed: which jq
.IP \(bu 2
Try --debug for detailed output
.RE
.SS GUI Not Working
.RS
.IP \(bu 2
Ensure yad or zenity is installed
.IP \(bu 2
Check $DISPLAY is set: echo $DISPLAY
.IP \(bu 2
Not over SSH or use CONSOLE_APP=true
.IP \(bu 2
Try: which yad zenity
.RE
.SS Search Returns Nothing
.RS
.IP \(bu 2
Verify search term spelling
.IP \(bu 2
Try broader search terms
.IP \(bu 2
Check time period has earthquakes
.IP \(bu 2
Search is case-insensitive
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
curl - HTTP client for API requests
.IP \(bu 2
jq - JSON processor for data parsing
.IP \(bu 2
grep - Text pattern matching
.IP \(bu 2
sed - Stream editor for text transformation
.RE
.TP
.B Optional:
.RS
.IP \(bu 2
yad - Display dialogs (preferred GUI)
.IP \(bu 2
zenity - Display dialogs (fallback GUI)
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR jq (1),
.BR curl (1),
.BR yad (1),
.BR zenity (1)
.PP
USGS Earthquake Hazards Program:
.br
https://earthquake.usgs.gov
.PP
GeoJSON Feed Documentation:
.br
https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.php
