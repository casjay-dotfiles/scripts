.TH ENCRYPT "1" "December 2025" "encrypt 202208062253-git" "User Commands"
.SH NAME
encrypt \- AES-256-CBC file and text encryption using OpenSSL with password management
.SH SYNOPSIS
.B encrypt
[\fI\,FILE\/\fR] [\fI\,OPTIONS\/\fR]
.br
.B echo
'text' |
.B encrypt
.SH DESCRIPTION
.B encrypt
is a wrapper script for OpenSSL AES-256-CBC encryption that simplifies file and text encryption with password management. It uses AES-256-CBC cipher with PBKDF2 key derivation and salt for secure encryption.
.PP
The script supports both file encryption (creates .enc output files) and stdin pipe encryption (outputs encrypted data to stdout). Password can be configured in settings file or password file for automated workflows.
.PP
encrypt simplifies OpenSSL encryption by providing password management, automatic file naming, and consistent encryption parameters, making secure file encryption accessible without memorizing complex OpenSSL command syntax.
.SH COMMANDS
.TP
.B encrypt file.txt
Encrypt file.txt to file.txt.enc using configured password
.TP
.B echo 'secret text' | encrypt
Encrypt text from stdin and output encrypted data to stdout
.TP
.B echo 'text' | encrypt > output.enc
Encrypt stdin text and redirect to file
.TP
.B cat file.txt | encrypt > file.enc
Encrypt file contents via pipe
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate or regenerate user configuration file with default password
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output and command tracing
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress non-essential output messages
.TP
.BR \-\-dir " " \fI\,DIRECTORY\/\fR
Set working directory (not commonly used)
.SH USAGE
.B encrypt document.txt
.PP
Encrypts document.txt using AES-256-CBC and creates document.txt.enc with configured password.
.PP
.B echo 'confidential data' | encrypt > secret.enc
.PP
Encrypts text from stdin and saves to secret.enc file.
.PP
.B cat file.txt | encrypt | base64 > file.b64.enc
.PP
Pipe encrypted output through base64 for email-safe encoding.
.SH ENCRYPTION METHOD
AES-256-CBC encryption with OpenSSL:
.SS Cipher Details
.RS
.IP \(bu 2
Algorithm: AES (Advanced Encryption Standard)
.IP \(bu 2
Key Size: 256 bits (32 bytes)
.IP \(bu 2
Mode: CBC (Cipher Block Chaining)
.IP \(bu 2
Key Derivation: PBKDF2 (Password-Based Key Derivation Function 2)
.IP \(bu 2
Salt: Automatically generated and prepended to output
.IP \(bu 2
Iterations: OpenSSL default (10000+)
.RE
.SS OpenSSL Command
File encryption:
.RS
.EX
echo "$ENCRYPT_PASSWORD" | \\
  openssl aes-256-cbc -pbkdf2 -salt \\
  -in "$fname" -out "${fname}.enc" -pass stdin
.EE
.RE
.PP
Stdin encryption:
.RS
.EX
echo "$ENCRYPT_PASSWORD" | \\
  openssl aes-256-cbc -pbkdf2 -salt -pass stdin
.EE
.RE
.SS Security Features
.RS
.IP \(bu 2
256-bit key size: Industry-standard strong encryption
.IP \(bu 2
PBKDF2: Protects against brute-force attacks
.IP \(bu 2
Salt: Prevents rainbow table attacks
.IP \(bu 2
CBC mode: Secure block cipher chaining
.IP \(bu 2
Password from stdin: Avoids command-line exposure
.RE
.SH PASSWORD MANAGEMENT
Multiple password sources supported:
.SS Configuration File
Default password in settings.conf:
.RS
.EX
# ~/.config/myscripts/encrypt/settings.conf
ENCRYPT_PASSWORD="your_secure_password_here"
.EE
.RE
.SS Password File
Separate password file (preferred for security):
.RS
.EX
# Create password file
echo "your_secure_password" > ~/.config/myscripts/encrypt/.password
chmod 600 ~/.config/myscripts/encrypt/.password

# Script automatically reads from .password file
encrypt file.txt
.EE
.RE
.SS Default Password
Built-in fallback (not secure):
.RS
.IP \(bu 2
Default: "verylongsecurepassword"
.IP \(bu 2
Used if no config or password file exists
.IP \(bu 2
Change immediately for production use
.RE
.SS Password Priority
Password source priority (first found wins):
.RS
.IP 1. 3
~/.config/myscripts/encrypt/.password file
.IP 2. 3
ENCRYPT_PASSWORD in settings.conf
.IP 3. 3
Default fallback password (insecure)
.RE
.SH FILE ENCRYPTION
Encrypt files with automatic .enc extension:
.SS Single File
.RS
.EX
encrypt document.txt
# Creates: document.txt.enc

encrypt /path/to/file.pdf
# Creates: /path/to/file.pdf.enc
.EE
.RE
.SS Output Format
.RS
.IP \(bu 2
Original file: file.txt (unchanged)
.IP \(bu 2
Encrypted file: file.txt.enc (created)
.IP \(bu 2
Binary format (not human-readable)
.IP \(bu 2
Contains salt + encrypted data
.RE
.SS File Handling
.RS
.IP \(bu 2
Original file preserved (not deleted)
.IP \(bu 2
Output file overwrites if exists
.IP \(bu 2
Maintains original file permissions
.IP \(bu 2
Works with any file type (text, binary, images, etc.)
.RE
.SH STDIN ENCRYPTION
Encrypt data from standard input:
.SS Direct Echo
.RS
.EX
echo "secret message" | encrypt
# Outputs encrypted data to stdout
.EE
.RE
.SS File Content
.RS
.EX
cat file.txt | encrypt > file.enc
# Redirect output to file
.EE
.RE
.SS Heredoc
.RS
.EX
encrypt <<EOF > secret.enc
Line 1 of secret data
Line 2 of secret data
EOF
.EE
.RE
.SS Pipeline
.RS
.EX
# Compress then encrypt
tar czf - directory/ | encrypt > archive.tar.gz.enc

# Generate key and encrypt
openssl rand -base64 32 | encrypt > random.key.enc
.EE
.RE
.SH DECRYPTION
Use OpenSSL to decrypt encrypted files:
.SS Decrypt File
.RS
.EX
# Using password from config
ENCRYPT_PASSWORD="your_password"
echo "$ENCRYPT_PASSWORD" | \\
  openssl aes-256-cbc -d -pbkdf2 \\
  -in file.txt.enc -out file.txt -pass stdin
.EE
.RE
.SS Decrypt to Stdout
.RS
.EX
# View encrypted content without saving
echo "$ENCRYPT_PASSWORD" | \\
  openssl aes-256-cbc -d -pbkdf2 \\
  -in secret.enc -pass stdin
.EE
.RE
.SS Interactive Decryption
.RS
.EX
# Prompt for password
openssl aes-256-cbc -d -pbkdf2 \\
  -in file.txt.enc -out file.txt
# Enter password when prompted
.EE
.RE
.SH EXAMPLES
.TP
.B encrypt contract.pdf
Encrypt PDF document to contract.pdf.enc
.TP
.B encrypt /etc/ssh/ssh_config
Encrypt system configuration file
.TP
.B echo "password123" | encrypt > pwd.enc
Encrypt password and save to file
.TP
.B cat message.txt | encrypt > message.enc
Encrypt file contents via pipe
.TP
.B tar czf - ~/Documents | encrypt > backup.tar.gz.enc
Compress directory and encrypt
.TP
.B encrypt database.sql
Encrypt database dump file
.TP
.B echo "API_KEY=secret" | encrypt > .env.enc
Encrypt environment variable
.TP
.B openssl rand -base64 32 | encrypt > random.key.enc
Generate and encrypt random key
.TP
.B encrypt --config
Generate configuration file with default password
.TP
.B cat secret.enc | openssl aes-256-cbc -d -pbkdf2 -pass pass:mypass
Decrypt file with password
.SH FILES
.TP
.B ~/.config/myscripts/encrypt/settings.conf
User configuration file with password setting
.TP
.B ~/.config/myscripts/encrypt/.password
Separate password file (preferred storage method)
.TP
.B ~/.local/share/myscripts/encrypt/backups/
Configuration backup directory
.TP
.B ~/.local/log/encrypt/
Log file directory
.TP
.B ~/.local/tmp/system_scripts/encrypt/
Temporary files directory
.TP
.B ~/.cache/encrypt/
Cache directory
.SH ENVIRONMENT VARIABLES
.TP
.B ENCRYPT_PASSWORD
Encryption password (default: verylongsecurepassword)
.TP
.B ENCRYPT_CONFIG_DIR
Configuration directory (default: ~/.config/myscripts/encrypt)
.TP
.B ENCRYPT_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B ENCRYPT_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B ENCRYPT_OUTPUT_COLOR_GOOD
Success message color code (default: 2 for green)
.TP
.B ENCRYPT_OUTPUT_COLOR_ERROR
Error message color code (default: 1 for red)
.TP
.B ENCRYPT_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B ENCRYPT_NOTIFY_CLIENT_NAME
Customize notification client name
.TP
.B ENCRYPT_NOTIFY_CLIENT_ICON
Customize notification icon (default: notification-new)
.TP
.B ENCRYPT_NOTIFY_CLIENT_URGENCY
Notification urgency level: low, normal, critical (default: normal)
.TP
.B ENCRYPT_SILENT
Suppress output messages when set to "true"
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/encrypt/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Encryption password (change this!)
ENCRYPT_PASSWORD="your_secure_password_here"

# Notification settings
ENCRYPT_NOTIFY_ENABLED="yes"

# Color codes
ENCRYPT_OUTPUT_COLOR_1="33"
ENCRYPT_OUTPUT_COLOR_2="5"
ENCRYPT_OUTPUT_COLOR_GOOD="2"
ENCRYPT_OUTPUT_COLOR_ERROR="1"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - file/text encrypted successfully
.TP
.B 1
Error - encryption failed or invalid password
.SH SECURITY CONSIDERATIONS
.SS Password Security
.RS
.IP \(bu 2
Use strong passwords (20+ characters recommended)
.IP \(bu 2
Store password in .password file with 600 permissions
.IP \(bu 2
Never commit password files to version control
.IP \(bu 2
Change default password immediately
.IP \(bu 2
Use password managers for password generation
.RE
.SS File Permissions
.RS
.EX
# Secure password file
chmod 600 ~/.config/myscripts/encrypt/.password

# Secure config directory
chmod 700 ~/.config/myscripts/encrypt

# Secure encrypted files
chmod 600 *.enc
.EE
.RE
.SS Key Management
.RS
.IP \(bu 2
Document password storage location
.IP \(bu 2
Back up password securely (offline storage)
.IP \(bu 2
Use different passwords for different files
.IP \(bu 2
Rotate passwords periodically
.IP \(bu 2
Test decryption after encryption
.RE
.SS Common Pitfalls
.RS
.IP \(bu 2
Losing password = permanent data loss
.IP \(bu 2
Default password is insecure
.IP \(bu 2
Passwords in shell history (use config file)
.IP \(bu 2
Unprotected .password file permissions
.IP \(bu 2
No backup of password
.RE
.SH USE CASES
.SS Secure File Storage
.RS
.IP 1. 3
Encrypt sensitive documents before cloud storage
.IP 2. 3
Upload encrypted files to Dropbox/Google Drive
.IP 3. 3
Files remain encrypted on cloud servers
.IP 4. 3
Decrypt locally when needed
.RE
.SS Database Backups
.RS
.IP 1. 3
Dump database: mysqldump database > backup.sql
.IP 2. 3
Encrypt backup: encrypt backup.sql
.IP 3. 3
Store backup.sql.enc securely
.IP 4. 3
Decrypt when restoring: decrypt backup.sql.enc
.RE
.SS Configuration Files
.RS
.IP 1. 3
Encrypt sensitive configs: encrypt .env
.IP 2. 3
Store in version control (encrypted)
.IP 3. 3
Deploy to servers
.IP 4. 3
Decrypt on server: openssl aes-256-cbc -d
.RE
.SS Password Storage
.RS
.IP 1. 3
Store passwords in plain text file
.IP 2. 3
Encrypt: cat passwords.txt | encrypt > passwords.enc
.IP 3. 3
Delete plaintext: shred -u passwords.txt
.IP 4. 3
View when needed: decrypt and pipe to less
.RE
.SH AUTOMATION
.SS Backup Script
.RS
.EX
#!/bin/bash
# Automated encrypted backup

BACKUP_DIR="$HOME/backups"
DATE=$(date +%Y%m%d)

# Backup and encrypt
tar czf - "$HOME/Documents" | \\
  encrypt > "$BACKUP_DIR/docs_$DATE.tar.gz.enc"

# Upload to cloud
rclone copy "$BACKUP_DIR" remote:backups/
.EE
.RE
.SS Cron Job
.RS
.EX
# Daily encrypted backup at 2 AM
0 2 * * * /usr/local/bin/backup-and-encrypt.sh
.EE
.RE
.SS Git Pre-commit Hook
.RS
.EX
#!/bin/bash
# Encrypt secrets before commit

for file in .env config/secrets.yml; do
  if [ -f "$file" ]; then
    encrypt "$file"
    git add "${file}.enc"
  fi
done
.EE
.RE
.SH NOTES
.IP \(bu 2
Requires OpenSSL with AES-256-CBC support
.IP \(bu 2
Password must match exactly for decryption
.IP \(bu 2
Original files not deleted after encryption
.IP \(bu 2
Encrypted files are binary format
.IP \(bu 2
Works with any file type (text, binary, images)
.IP \(bu 2
Salt automatically generated per encryption
.IP \(bu 2
PBKDF2 provides brute-force protection
.IP \(bu 2
Lost password = permanent data loss
.IP \(bu 2
Test decryption after encryption
.IP \(bu 2
Back up password securely
.SH TIPS
.SS Generate Strong Password
.RS
.EX
# Generate 32-character random password
openssl rand -base64 32 > ~/.config/myscripts/encrypt/.password
chmod 600 ~/.config/myscripts/encrypt/.password
.EE
.RE
.SS Test Encryption/Decryption
.RS
.EX
# Test workflow
echo "test data" > test.txt
encrypt test.txt
echo "$ENCRYPT_PASSWORD" | \\
  openssl aes-256-cbc -d -pbkdf2 \\
  -in test.txt.enc -pass stdin
# Should output: test data
.EE
.RE
.SS Batch Encryption
.RS
.EX
# Encrypt all files in directory
for file in *.txt; do
  encrypt "$file"
done

# Verify
ls -lh *.enc
.EE
.RE
.SS Secure Delete Original
.RS
.EX
# Encrypt and securely delete original
encrypt sensitive.doc
shred -u sensitive.doc  # Overwrite and delete
.EE
.RE
.SH TROUBLESHOOTING
.SS Wrong Password Error
.RS
.IP \(bu 2
Verify password in config file
.IP \(bu 2
Check .password file exists and readable
.IP \(bu 2
Ensure no trailing spaces/newlines in password
.IP \(bu 2
Test with known working password
.RE
.SS OpenSSL Not Found
.RS
.IP \(bu 2
Install OpenSSL: sudo apt install openssl (Debian/Ubuntu)
.IP \(bu 2
Install OpenSSL: sudo dnf install openssl (RHEL/Fedora)
.IP \(bu 2
Verify installation: openssl version
.IP \(bu 2
Check PATH includes OpenSSL location
.RE
.SS Decryption Fails
.RS
.IP \(bu 2
Password must match encryption password exactly
.IP \(bu 2
File may be corrupted (check file size)
.IP \(bu 2
Verify file is actually encrypted (file command)
.IP \(bu 2
Check OpenSSL version compatibility
.RE
.SS Permission Denied
.RS
.IP \(bu 2
Check file permissions: ls -l
.IP \(bu 2
Ensure write permission in output directory
.IP \(bu 2
Verify ownership: chown if needed
.IP \(bu 2
Check directory permissions: chmod 755
.RE
.SH ALTERNATIVES
Other encryption tools and methods:
.RS
.IP \(bu 2
gpg - GNU Privacy Guard (public key encryption)
.IP \(bu 2
age - Modern encryption tool with SSH key support
.IP \(bu 2
ccrypt - Secure file encryption replacement for crypt
.IP \(bu 2
7z - Archive manager with AES-256 encryption
.IP \(bu 2
openssl enc - Raw OpenSSL encryption (this script wraps it)
.IP \(bu 2
VeraCrypt - Full disk/container encryption
.IP \(bu 2
LUKS - Linux disk encryption
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
openssl - OpenSSL toolkit for AES encryption
.IP \(bu 2
perl - Perl interpreter for stdin detection
.IP \(bu 2
coreutils - echo, cat, chmod for file operations
.RE
.TP
.B Optional:
.RS
.IP \(bu 2
notifications - Desktop notifications
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR openssl (1),
.BR openssl-enc (1),
.BR gpg (1),
.BR age (1),
.BR ccrypt (1),
.BR 7z (1)
.PP
OpenSSL Documentation:
.br
https://www.openssl.org/docs/
.PP
AES Encryption:
.br
https://en.wikipedia.org/wiki/Advanced_Encryption_Standard
.PP
PBKDF2:
.br
https://en.wikipedia.org/wiki/PBKDF2
