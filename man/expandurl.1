.TH EXPANDURL "1" "December 2025" "expandurl 202208062301-git" "User Commands"
.SH NAME
expandurl \- Expand shortened URLs and copy to clipboard
.SH SYNOPSIS
.B expandurl
[\fI\,URL\fR] [\fI\,OPTIONS\fR]
.SH DESCRIPTION
.B expandurl
is a URL expansion utility that resolves shortened URLs (like bit.ly, tinyurl.com, goo.gl) to their full original destination URLs. It follows HTTP redirects to reveal the complete URL chain and automatically copies the final expanded URLs to the system clipboard for convenient pasting.
.PP
The script uses curl to follow HTTP Location headers through redirect chains, extracting each intermediate URL until reaching the final destination. This is useful for verifying shortened links before clicking them, debugging redirect chains, bypassing URL shorteners, and discovering the actual destination of obscured links.
.PP
expandurl simplifies URL verification by providing automatic redirect resolution with clipboard integration, desktop notifications for results, and clear error handling for broken or invalid shortened URLs.
.SH USAGE
.B expandurl
.PP
Expand bit.ly shortened URL and copy to clipboard.
.PP
.B expandurl https://bit.ly/example
.PP
Expand TinyURL link.
.PP
.B expandurl http://tinyurl.com/example
.PP
Expand Google shortener URL.
.PP
.B expandurl https://goo.gl/example
.PP
Expand with debug output showing redirect chain.
.PP
.B expandurl --debug https://bit.ly/example
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate or regenerate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output showing redirect chain
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress desktop notifications (only show terminal output)
.SH URL EXPANSION
How expandurl resolves shortened URLs:
.SS Redirect Following
.RS
expandurl uses curl with the -L flag to automatically follow HTTP redirects:
.EX
curl -ILSsif https://bit.ly/example
HTTP/1.1 301 Moved Permanently
Location: https://example.com/original-url

HTTP/1.1 200 OK
.EE
.RE
.SS Location Header Extraction
.RS
.IP \\(bu 2
Sends HEAD request to shortened URL
.IP \\(bu 2
Follows all HTTP 3xx redirects
.IP \\(bu 2
Extracts Location headers from responses
.IP \\(bu 2
Filters out the original input URL
.IP \\(bu 2
Returns complete redirect chain
.RE
.SS Clipboard Integration
.RS
.IP \\(bu 2
Expanded URLs automatically copied to clipboard
.IP \\(bu 2
Uses clipboard command with --silent flag
.IP \\(bu 2
Ready for immediate pasting
.IP \\(bu 2
Works with X11, Wayland, and terminal clipboard managers
.RE
.SH SUPPORTED URL SHORTENERS
expandurl works with all URL shortening services that use HTTP redirects:
.SS Popular Services
.RS
.IP \\(bu 2
bit.ly - Bitly shortened links
.IP \\(bu 2
tinyurl.com - TinyURL links
.IP \\(bu 2
goo.gl - Google URL shortener (deprecated but still resolves)
.IP \\(bu 2
t.co - Twitter/X shortened links
.IP \\(bu 2
ow.ly - Hootsuite/Owly links
.IP \\(bu 2
is.gd - is.gd shortened URLs
.IP \\(bu 2
buff.ly - Buffer shortened links
.IP \\(bu 2
shorturl.at - ShortURL service
.IP \\(bu 2
rebrand.ly - Rebrandly custom short links
.IP \\(bu 2
cutt.ly - Cuttly URL shortener
.RE
.SS Custom Shorteners
.RS
Any URL shortening service using standard HTTP redirect codes (301, 302, 303, 307, 308) is supported.
.RE
.SH EXAMPLES
.TP
.B expandurl https://bit.ly/3xyz
Expand Bitly shortened link
.TP
.B expandurl http://tinyurl.com/example123
Expand TinyURL link
.TP
.B expandurl https://t.co/xyz123
Expand Twitter/X shortened link
.TP
.B expandurl https://goo.gl/maps/example
Expand Google Maps shortened URL
.TP
.B expandurl https://is.gd/example
Expand is.gd shortened link
.TP
.B expandurl --debug https://bit.ly/example
Show complete redirect chain with debug output
.TP
.B expandurl --silent https://tinyurl.com/test
Expand URL without desktop notifications
.TP
.B expandurl --raw https://ow.ly/example | grep http
Expand and filter for URLs only
.SH REDIRECT CHAIN
Understanding how URL expansion works:
.SS HTTP Redirect Codes
.RS
.IP \\(bu 2
301 Moved Permanently - Permanent redirect
.IP \\(bu 2
302 Found - Temporary redirect
.IP \\(bu 2
303 See Other - Redirect to different resource
.IP \\(bu 2
307 Temporary Redirect - Preserves request method
.IP \\(bu 2
308 Permanent Redirect - Preserves request method
.RE
.SS Example Redirect Chain
.RS
.EX
Input: https://bit.ly/example
  ↓
301 → https://example.com/redirect
  ↓
302 → https://example.com/final-page
  ↓
200 OK (final destination)

Result copied to clipboard:
https://example.com/redirect
https://example.com/final-page
.EE
.RE
.SS Multiple Redirects
.RS
expandurl follows unlimited redirect chains and displays all intermediate URLs. This reveals the complete path from shortened link to final destination.
.RE
.SH FILES
.TP
.B ~/.config/myscripts/expandurl/settings.conf
User configuration file for expandurl preferences
.TP
.B ~/.local/share/myscripts/expandurl/backups/
Configuration backup directory
.TP
.B ~/.local/log/expandurl/
Log file directory
.TP
.B ~/.local/tmp/system_scripts/expandurl/
Temporary files directory
.TP
.B ~/.cache/expandurl/
Cache directory
.SH ENVIRONMENT VARIABLES
.TP
.B EXPANDURL_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B EXPANDURL_SILENT
Suppress desktop notifications when set to "true"
.TP
.B EXPANDURL_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B EXPANDURL_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B EXPANDURL_OUTPUT_COLOR_GOOD
Success message color (default: 2 for green)
.TP
.B EXPANDURL_OUTPUT_COLOR_ERROR
Error message color (default: 1 for red)
.TP
.B EXPANDURL_NOTIFY_CLIENT_NAME
Notification client name (default: expandurl)
.TP
.B EXPANDURL_NOTIFY_CLIENT_ICON
Notification icon (default: notification-new)
.TP
.B EXPANDURL_NOTIFY_CLIENT_URGENCY
Notification urgency level (default: normal)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/expandurl/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Notification settings
EXPANDURL_NOTIFY_ENABLED="yes"
EXPANDURL_NOTIFY_CLIENT_NAME="expandurl"
EXPANDURL_NOTIFY_CLIENT_ICON="notification-new"
EXPANDURL_NOTIFY_CLIENT_URGENCY="normal"

# Output colorization
EXPANDURL_OUTPUT_COLOR_1="33"
EXPANDURL_OUTPUT_COLOR_2="5"
EXPANDURL_OUTPUT_COLOR_GOOD="2"
EXPANDURL_OUTPUT_COLOR_ERROR="1"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - URL expanded and copied to clipboard
.TP
.B 1
Error - invalid URL, no redirects found, or expansion failed
.SH NOTES
.IP \\(bu 2
Requires internet connection to resolve URLs
.IP \\(bu 2
Some shortened URLs may have expired or been removed
.IP \\(bu 2
Malicious shortened URLs can be identified before visiting
.IP \\(bu 2
Redirect chains may include tracking parameters
.IP \\(bu 2
Some services may rate-limit expansion requests
.IP \\(bu 2
Clipboard requires clipboard command or xclip/xsel
.IP \\(bu 2
Desktop notifications require notification daemon
.SH TIPS
.SS Security Verification
.RS
.EX
# Check suspicious link before clicking
expandurl https://suspicious-link.xyz

# Verify Twitter link destination
expandurl https://t.co/unknown123

# Check email shortened URL
expandurl https://bit.ly/emaillink
.EE
.RE
.SS Batch Processing
.RS
.EX
# Expand multiple URLs from file
while read -r url; do
  expandurl "$url"
done < urls.txt

# Expand and save results
expandurl https://bit.ly/example > expanded.txt

# Extract URLs from text and expand
grep -oP 'https?://bit\\.ly/\\S+' input.txt | \\
  while read url; do expandurl "$url"; done
.EE
.RE
.SS Integration with Other Tools
.RS
.EX
# Expand URL from clipboard
expandurl "$(clipboard --paste)"

# Expand and open in browser
url=$(expandurl https://bit.ly/example | tail -1)
firefox "$url"

# Check if URL is shortened
if echo "$url" | grep -E 'bit\\.ly|tinyurl|t\\.co'; then
  expandurl "$url"
fi
.EE
.RE
.SH USE CASES
.SS Security and Privacy
.RS
.IP \\(bu 2
Verify shortened links before clicking
.IP \\(bu 2
Identify phishing attempts using URL shorteners
.IP \\(bu 2
Reveal tracking parameters in redirect chains
.IP \\(bu 2
Check destination of suspicious emails
.IP \\(bu 2
Audit social media shortened links
.RE
.SS Development and Debugging
.RS
.IP \\(bu 2
Debug URL redirect chains
.IP \\(bu 2
Verify redirect configuration
.IP \\(bu 2
Test URL shortener services
.IP \\(bu 2
Analyze marketing campaign links
.IP \\(bu 2
Troubleshoot broken shortened URLs
.RE
.SS Content Curation
.RS
.IP \\(bu 2
Get original URLs for archiving
.IP \\(bu 2
Convert shortened links to full URLs in documentation
.IP \\(bu 2
Preserve original sources in research
.IP \\(bu 2
Clean up links in content management
.RE
.SH TROUBLESHOOTING
.SS URL Not Expanded
.RS
.IP \\(bu 2
Check internet connection: ping 8.8.8.8
.IP \\(bu 2
Verify URL is valid and accessible
.IP \\(bu 2
Some shortened URLs may have expired
.IP \\(bu 2
Try --debug to see detailed curl output
.IP \\(bu 2
Check if shortener service is online
.RE
.SS No Results Returned
.RS
.IP \\(bu 2
URL may not be shortened (already full URL)
.IP \\(bu 2
Service may not use Location headers
.IP \\(bu 2
URL might be blocked or removed
.IP \\(bu 2
Rate limiting may be in effect
.IP \\(bu 2
Check curl can access URL: curl -I <url>
.RE
.SS Clipboard Not Working
.RS
.IP \\(bu 2
Ensure clipboard command is installed
.IP \\(bu 2
Install xclip or xsel for X11
.IP \\(bu 2
Check display server is running: echo $DISPLAY
.IP \\(bu 2
For Wayland, use wl-clipboard
.IP \\(bu 2
Terminal-only: Use --raw and pipe to file
.RE
.SS Notifications Not Showing
.RS
.IP \\(bu 2
Check notification daemon is running
.IP \\(bu 2
Verify notifications command exists
.IP \\(bu 2
Set EXPANDURL_NOTIFY_ENABLED="no" to disable
.IP \\(bu 2
Use --silent flag to suppress notifications
.IP \\(bu 2
Check desktop environment supports notifications
.RE
.SH SECURITY CONSIDERATIONS
.SS Shortened URL Risks
.RS
.IP \\(bu 2
Shortened URLs can obscure malicious destinations
.IP \\(bu 2
Phishing attacks often use URL shorteners
.IP \\(bu 2
Redirect chains may include tracking
.IP \\(bu 2
Expired short URLs may redirect to unexpected sites
.IP \\(bu 2
Some shorteners allow URL hijacking
.RE
.SS Best Practices
.RS
.IP \\(bu 2
Always expand unknown shortened URLs before clicking
.IP \\(bu 2
Verify final destination matches expected content
.IP \\(bu 2
Check for suspicious domain names in redirect chain
.IP \\(bu 2
Be cautious with shortened URLs in emails
.IP \\(bu 2
Use HTTPS URLs when available
.IP \\(bu 2
Consider using URL scanning services for suspicious links
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \\(bu 2
bash - Bash shell for script execution
.IP \\(bu 2
curl - HTTP client for following redirects
.IP \\(bu 2
grep - Pattern matching for extracting Location headers
.IP \\(bu 2
awk - Text processing for URL extraction
.RE
.TP
.B Optional:
.RS
.IP \\(bu 2
clipboard - Clipboard management (or xclip/xsel)
.IP \\(bu 2
notifications - Desktop notification system
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \\(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR curl (1),
.BR xclip (1),
.BR xsel (1)
.PP
URL shortener information:
.br
Bitly: https://bitly.com
.br
TinyURL: https://tinyurl.com
.PP
HTTP redirect codes:
.br
https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections
