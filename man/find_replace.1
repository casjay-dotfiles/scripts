.TH FIND_REPLACE "1" "December 2025" "find_replace 202406121215-git" "User Commands"
.SH NAME
find_replace \- Find and replace text in multiple files using sed
.SH SYNOPSIS
.B find_replace
[\fI\,SEARCH\fR] [\fI\,REPLACE\fR] [\fI\,OPTIONS\fR]
.SH DESCRIPTION
.B find_replace
is a bulk find-and-replace utility that searches for text patterns in files within a directory tree and replaces all occurrences with specified replacement text. It uses sed for in-place text substitution across multiple files, automatically discovering files within the working directory (up to 3 levels deep) and performing global replacements on matching content.
.PP
The script simplifies bulk text replacement by providing automatic file discovery with configurable depth, in-place editing without backup files, colorized status output showing which files are modified, execution time tracking for performance monitoring, and directory specification via --dir option or current working directory.
.PP
find_replace is particularly useful for refactoring code (renaming functions, variables, or classes), updating configuration files across multiple systems, batch text processing and content updates, correcting typos or inconsistencies in documentation, and migrating file paths or URLs in bulk.
.SH USAGE
.B find_replace "old_text" "new_text"
.PP
Replace all occurrences of "old_text" with "new_text" in current directory.
.PP
.B find_replace "old_text" "new_text" --dir /path/to/directory
.PP
Replace text in specified directory.
.PP
.B find_replace "old_function" "new_function" --debug
.PP
Replace with verbose debugging output.
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate or regenerate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress desktop notifications
.TP
.BR \-\-force
Force replacement without confirmation
.TP
.BR \-\-dir " " \fI\,DIRECTORY\fR
Set working directory for file search (defaults to current directory)
.SH ARGUMENTS
.TP
.B SEARCH
The text pattern to search for (required first argument)
.TP
.B REPLACE
The replacement text (required second argument)
.SH FILE DISCOVERY
How find_replace locates files for text replacement:
.SS Search Depth
.RS
Files are discovered with find command:
.EX
find "$DIRECTORY" -maxdepth 3 -type f
.EE
.IP \(bu 2
-maxdepth 3: Searches up to 3 directory levels deep
.IP \(bu 2
-type f: Only includes regular files (no directories)
.IP \(bu 2
Excludes symlinks and special files
.IP \(bu 2
Includes hidden files (.*) if present
.RE
.SS File Types
.RS
.IP \(bu 2
All regular files are included
.IP \(bu 2
No file type filtering (*.txt, *.sh, etc.)
.IP \(bu 2
Binary files may be processed (use with caution)
.IP \(bu 2
No exclusions for .git, .svn, or build directories
.RE
.SH TEXT REPLACEMENT
How find_replace performs text substitution:
.SS Search and Replace
.RS
For each discovered file:
.EX
if grep -shq "$file" "$SEARCH"; then
  sed -i "s|$SEARCH|$REPLACE|g" "$file"
fi
.EE
.IP \(bu 2
grep -shq: Silent search to check if pattern exists
.IP \(bu 2
sed -i: In-place editing (modifies original file)
.IP \(bu 2
s|SEARCH|REPLACE|g: Global substitution (all occurrences)
.IP \(bu 2
Delimiter: Uses | instead of / to allow / in search/replace
.IP \(bu 2
No backup files created (.bak, .orig)
.RE
.SS Pattern Matching
.RS
.IP \(bu 2
Literal text matching (not regex by default)
.IP \(bu 2
Case-sensitive searches
.IP \(bu 2
Full-line or partial matches
.IP \(bu 2
Special characters should be escaped
.IP \(bu 2
Whitespace is preserved in matches
.RE
.SH EXAMPLES
.TP
.B find_replace "old_name" "new_name"
Replace all occurrences of "old_name" with "new_name" in current directory
.TP
.B find_replace "http://old-domain.com" "https://new-domain.com" --dir /var/www
Replace URLs in website directory
.TP
.B find_replace "function_old" "function_new" --dir ~/projects/myapp
Refactor function name in application code
.TP
.B find_replace "DEPRECATED_VAR" "NEW_VAR" --debug
Replace variable name with debugging output
.TP
.B find_replace "/old/path" "/new/path" --force
Replace file paths without confirmation
.TP
.B find_replace "casjaysdev.pro" "newdomain.com" --silent
Replace domain name without notifications
.TP
.B find_replace "v1.0.0" "v2.0.0" --dir /etc/app/configs
Update version strings in configuration files
.SH FILES
.TP
.B ~/.config/myscripts/find_replace/settings.conf
User configuration file
.TP
.B ~/.local/share/myscripts/find_replace/backups/
Configuration backup directory
.TP
.B ~/.local/log/find_replace/
Log file directory
.TP
.B ~/.local/log/find_replace/error.log
Error log file
.TP
.B ~/.local/run/system_scripts/find_replace/
Runtime directory
.TP
.B ~/.local/tmp/system_scripts/find_replace/
Temporary files directory
.TP
.B ~/.cache/find_replace/
Cache directory
.SH ENVIRONMENT VARIABLES
.TP
.B FIND_REPLACE_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B FIND_REPLACE_SILENT
Suppress desktop notifications when set to "true"
.TP
.B FIND_REPLACE_FORCE
Skip confirmation prompts when set to "true"
.TP
.B FIND_REPLACE_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B FIND_REPLACE_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B FIND_REPLACE_OUTPUT_COLOR_GOOD
Success message color (default: 2 for green)
.TP
.B FIND_REPLACE_OUTPUT_COLOR_ERROR
Error message color (default: 1 for red)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/find_replace/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Notification settings
FIND_REPLACE_NOTIFY_ENABLED="yes"

# Output colorization
FIND_REPLACE_OUTPUT_COLOR_1="33"
FIND_REPLACE_OUTPUT_COLOR_2="5"
FIND_REPLACE_OUTPUT_COLOR_GOOD="2"
FIND_REPLACE_OUTPUT_COLOR_ERROR="1"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - text replacement completed successfully
.TP
.B 1
Error - missing search or replace argument, or replacement failed
.TP
.B 3
Error - bash command not found
.SH NOTES
.IP \(bu 2
Modifies files in-place without creating backups
.IP \(bu 2
No undo functionality - ensure backups exist before running
.IP \(bu 2
Binary files may be corrupted if processed
.IP \(bu 2
Special characters in search/replace should be escaped
.IP \(bu 2
Case-sensitive matching only
.IP \(bu 2
Searches up to 3 directory levels deep
.IP \(bu 2
All file types are processed (no filtering)
.IP \(bu 2
Execution time is reported at completion
.IP \(bu 2
Requires both SEARCH and REPLACE arguments
.SH TIPS
.SS Safe Usage
.RS
.EX
# Create backup before replacement
cp -r /path/to/directory /path/to/directory.backup
find_replace "old" "new" --dir /path/to/directory

# Test in dry-run mode (grep only)
find /path/to/directory -maxdepth 3 -type f -exec grep -l "old" {} \\;

# Version control safety
cd /git/repo
git status  # Ensure clean working tree
find_replace "old" "new"
git diff    # Review changes
git add .
git commit -m "Replaced old with new"
.EE
.RE
.SS Refactoring Code
.RS
.EX
# Rename function across project
find_replace "old_function" "new_function" --dir ~/projects/myapp

# Update class name
find_replace "OldClass" "NewClass" --dir src/

# Change variable naming convention
find_replace "camelCase" "snake_case" --dir lib/
.EE
.RE
.SS Configuration Updates
.RS
.EX
# Update database host
find_replace "old-db.example.com" "new-db.example.com" --dir /etc/app

# Change API endpoint
find_replace "http://api.old.com" "https://api.new.com" --dir /var/www

# Update email addresses
find_replace "support@oldomain.com" "support@newdomain.com"
.EE
.RE
.SS Content Migration
.RS
.EX
# Update image paths
find_replace "/images/old/" "/assets/new/" --dir /var/www/html

# Fix documentation links
find_replace "docs.old.com" "docs.new.com" --dir /usr/share/doc

# Correct typos in documentation
find_replace "recieve" "receive" --dir ~/docs
.EE
.RE
.SH USE CASES
.SS Code Refactoring
.RS
.IP \(bu 2
Rename functions, classes, or variables across codebase
.IP \(bu 2
Update import paths after directory restructuring
.IP \(bu 2
Change naming conventions (camelCase to snake_case)
.IP \(bu 2
Update deprecated API calls
.IP \(bu 2
Modify configuration file references
.RE
.SS System Administration
.RS
.IP \(bu 2
Update configuration files across multiple systems
.IP \(bu 2
Change hostnames or IP addresses in configs
.IP \(bu 2
Update service endpoints
.IP \(bu 2
Modify user accounts or credentials
.IP \(bu 2
Batch update version strings
.RE
.SS Content Management
.RS
.IP \(bu 2
Fix spelling errors across documentation
.IP \(bu 2
Update URLs after domain migration
.IP \(bu 2
Change branding or company names
.IP \(bu 2
Modify copyright notices
.IP \(bu 2
Update email addresses or contact information
.RE
.SH TROUBLESHOOTING
.SS No Files Modified
.RS
.IP \(bu 2
Verify search term exists in files: grep -r "search" directory/
.IP \(bu 2
Check case sensitivity of search term
.IP \(bu 2
Ensure working directory is correct: pwd
.IP \(bu 2
Check --dir option points to correct location
.IP \(bu 2
Verify files are within 3-level depth limit
.RE
.SS Files Corrupted
.RS
.IP \(bu 2
Binary files may be damaged by text replacement
.IP \(bu 2
Restore from backup if available
.IP \(bu 2
Use version control to revert changes: git restore .
.IP \(bu 2
Filter file types before running: find . -name "*.txt"
.IP \(bu 2
Test on copy before modifying originals
.RE
.SS Missing Arguments Error
.RS
.IP \(bu 2
Ensure both SEARCH and REPLACE arguments provided
.IP \(bu 2
Quote arguments containing spaces: "old text" "new text"
.IP \(bu 2
Escape special characters in arguments
.IP \(bu 2
Check argument order: search first, replace second
.RE
.SS Unexpected Replacements
.RS
.IP \(bu 2
Review sed delimiter usage (uses | not /)
.IP \(bu 2
Check for partial matches vs full-word matches
.IP \(bu 2
Test search pattern with grep first
.IP \(bu 2
Use version control diff to review changes
.IP \(bu 2
Consider word boundaries for precise matching
.RE
.SH SECURITY CONSIDERATIONS
.SS Data Safety
.RS
.IP \(bu 2
No backup files created - external backups required
.IP \(bu 2
Changes are permanent and immediate
.IP \(bu 2
No undo functionality available
.IP \(bu 2
Binary file corruption possible
.IP \(bu 2
Test on copies before production use
.RE
.SS Best Practices
.RS
.IP \(bu 2
Always backup data before bulk replacement
.IP \(bu 2
Use version control for automatic change tracking
.IP \(bu 2
Test replacement on sample files first
.IP \(bu 2
Review changes with git diff or similar tools
.IP \(bu 2
Document replacement rationale for team awareness
.IP \(bu 2
Use --debug mode to verify operations
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
find - File discovery tool
.IP \(bu 2
grep - Pattern matching for file content
.IP \(bu 2
sed - Stream editor for text substitution
.RE
.TP
.B Optional:
.RS
.IP \(bu 2
bc - Calculator for execution time reporting
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \\(co 2024 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR find (1),
.BR grep (1),
.BR sed (1),
.BR awk (1)
.PP
Sed documentation:
.br
https://www.gnu.org/software/sed/manual/sed.html
.PP
Find documentation:
.br
https://www.gnu.org/software/findutils/manual/html_node/find_html/
