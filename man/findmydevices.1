.TH FINDMYDEVICES "1" "December 2025" "findmydevices 202302211552-git" "User Commands"
.SH NAME
findmydevices \- Network device scanner with automatic discovery and port analysis
.SH SYNOPSIS
.B findmydevices
[\fI\,NETWORK\fR] [\fI\,NETMASK\fR] [\fI\,OPTIONS\fR]
.SH DESCRIPTION
.B findmydevices
is an automated network device discovery and analysis tool that scans local networks to find all connected devices, performs detailed port scans, resolves hostnames, and saves comprehensive device information. It uses nmap for network scanning and provides an easy-to-use interface for network reconnaissance.
.PP
The script automatically detects the local network configuration, performs host discovery scans to find active devices, conducts comprehensive port scans (1-65535) on discovered devices, resolves hostnames via DNS lookups, and saves all results to organized text files for later reference.
.PP
findmydevices simplifies network auditing by providing automatic network parameter detection, sudo privilege handling for nmap, configurable scan timeouts, hostname resolution with ping verification, and persistent result storage in ~/Documents/myscripts/findmydevices/ with per-device port scan reports.
.SH USAGE
.B findmydevices
.PP
Scan local network (auto-detects network/netmask).
.PP
.B findmydevices
.PP
Scan specific network with CIDR notation.
.PP
.B findmydevices 192.168.1.0/24
.PP
Scan custom network and netmask (separate parameters).
.PP
.B findmydevices 10.0.0.0 16
.PP
Scan with custom timeout per host.
.PP
.B findmydevices --timeout 60
.PP
Scan specific network with custom timeout.
.PP
.B findmydevices --network 192.168.1.0 --netmask 24 --timeout 180
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate or regenerate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose nmap output
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress desktop notifications
.TP
.BR \-\-custom
Enable custom IP/network specification mode
.TP
.BR \-\-timeout " " \fI\,SECONDS\fR
Set nmap host timeout in seconds (default: 120)
.TP
.BR \-\-network " " \fI\,NETWORK\fR
Specify network to scan (e.g., 192.168.1.0)
.TP
.BR \-\-netmask " " \fI\,BITS\fR
Specify netmask in CIDR notation (e.g., 24)
.SH NETWORK SCANNING
How findmydevices discovers and analyzes devices:
.SS Automatic Network Detection
.RS
If no network is specified, findmydevices automatically detects the local network:
.EX
default_if=$(ip route list | awk '/^default/ {print $5}')
network=$(ip -o -f inet addr show "$default_if" | ...)
netmask=$(ip -o -f inet addr show "$default_if" | ...)
.EE
.RE
.SS Host Discovery Phase
.RS
Initial scan to find active devices:
.EX
sudo nmap -sP -n <network>/<netmask>
.EE
.IP \\(bu 2
-sP: Ping scan (host discovery only)
.IP \\(bu 2
-n: No DNS resolution (faster)
.IP \\(bu 2
Identifies all responding hosts
.IP \\(bu 2
Creates list of active IPs
.RE
.SS Port Scanning Phase
.RS
For each discovered device:
.EX
sudo nmap -v -T5 -sV -p1-65535 -Pn -n \\
  --host-timeout <timeout> --open <device>
.EE
.IP \\(bu 2
-v: Verbose output
.IP \\(bu 2
-T5: Aggressive timing template
.IP \\(bu 2
-sV: Version detection
.IP \\(bu 2
-p1-65535: All TCP ports
.IP \\(bu 2
-Pn: Skip host discovery (already found)
.IP \\(bu 2
-n: No DNS resolution
.IP \\(bu 2
--open: Show only open ports
.IP \\(bu 2
Results saved to ~/Documents/myscripts/findmydevices/<IP>.txt
.RE
.SS Hostname Resolution
.RS
.IP \\(bu 2
Attempts getent hosts lookup
.IP \\(bu 2
Verifies connectivity with ping -c1 -4
.IP \\(bu 2
Saves IP and hostname to master list
.IP \\(bu 2
Marks unresolvable hosts as "unknown"
.RE
.SH NETWORK PARAMETERS
Understanding network specification:
.SS CIDR Notation
.RS
.IP \\(bu 2
192.168.1.0/24 - 254 hosts (192.168.1.1-254)
.IP \\(bu 2
10.0.0.0/16 - 65534 hosts (10.0.0.1-255.255)
.IP \\(bu 2
172.16.0.0/12 - 1,048,574 hosts
.IP \\(bu 2
192.168.0.0/23 - 510 hosts (192.168.0-1.1-254)
.RE
.SS Common Private Networks
.RS
.IP \\(bu 2
192.168.0.0/16 - Class C private range
.IP \\(bu 2
10.0.0.0/8 - Class A private range
.IP \\(bu 2
172.16.0.0/12 - Class B private range
.RE
.SS Custom Network Examples
.RS
.EX
# Scan /24 network
findmydevices 192.168.1.0/24

# Scan /16 network (takes longer)
findmydevices 10.0.0.0/16

# Scan with separate parameters
findmydevices 192.168.100.0 24

# Scan specific subnet
findmydevices 10.50.30.0 28
.EE
.RE
.SH EXAMPLES
.TP
.B findmydevices
Automatically scan local network
.TP
.B findmydevices 192.168.1.0/24
Scan specific /24 network
.TP
.B findmydevices 10.0.0.0 16
Scan 10.0.0.0/16 network
.TP
.B findmydevices --timeout 60
Scan local network with 60-second host timeout
.TP
.B findmydevices --network 192.168.50.0 --netmask 24
Scan using long-form options
.TP
.B findmydevices --debug 192.168.1.0/24
Scan with verbose nmap output
.TP
.B findmydevices --custom 192.168.1.0/24
Custom IP mode scan
.SH OUTPUT FILES
findmydevices saves results to organized files:
.SS Master Device List
.RS
.TP
.B ~/Documents/myscripts/findmydevices_all.txt
Contains all discovered devices with hostnames:
.EX
192.168.1.1    router.local
192.168.1.10   desktop.local
192.168.1.50   unknown
192.168.1.100  printer.local
.EE
.IP \\(bu 2
Format: IP_ADDRESS    HOSTNAME
.IP \\(bu 2
Sorted and deduplicated automatically
.IP \\(bu 2
Persists across multiple scans
.IP \\(bu 2
Updated with each scan
.RE
.SS Per-Device Port Scans
.RS
.TP
.B ~/Documents/myscripts/findmydevices/<IP>.txt
Detailed nmap scan results for each device:
.IP \\(bu 2
Complete port scan (1-65535)
.IP \\(bu 2
Open ports and services
.IP \\(bu 2
Service version information
.IP \\(bu 2
Nmap scan statistics
.IP \\(bu 2
One file per discovered device
.RE
.SH FILES
.TP
.B ~/.config/myscripts/findmydevices/settings.conf
User configuration file
.TP
.B ~/.local/share/myscripts/findmydevices/backups/
Configuration backup directory
.TP
.B ~/.local/log/findmydevices/
Log file directory
.TP
.B ~/.local/run/system_scripts/findmydevices/
Runtime directory
.TP
.B ~/.local/tmp/system_scripts/findmydevices/
Temporary files directory (scan working files)
.TP
.B ~/.cache/findmydevices/
Cache directory
.TP
.B ~/Documents/myscripts/findmydevices/
Device scan results directory
.TP
.B ~/Documents/myscripts/findmydevices_all.txt
Master list of all discovered devices
.SH ENVIRONMENT VARIABLES
.TP
.B FINDMYDEVICES_SAVED_DIR
Output directory for device scans (default: ~/Documents/myscripts/findmydevices)
.TP
.B FINDMYDEVICES_SAVED_FILE
Master device list file (default: ~/Documents/myscripts/findmydevices_all.txt)
.TP
.B FINDMYDEVICES_TIMEOUT
Default host timeout in seconds (default: 120)
.TP
.B FINDMYDEVICES_NETWORK
Default network to scan
.TP
.B FINDMYDEVICES_NETMASK
Default netmask in CIDR notation
.TP
.B FINDMYDEVICES_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B FINDMYDEVICES_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B FINDMYDEVICES_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B FINDMYDEVICES_OUTPUT_COLOR_GOOD
Success message color (default: 2 for green)
.TP
.B FINDMYDEVICES_OUTPUT_COLOR_ERROR
Error message color (default: 1 for red)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/findmydevices/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Output locations
FINDMYDEVICES_SAVED_DIR="$HOME/Documents/myscripts/findmydevices"
FINDMYDEVICES_SAVED_FILE="$HOME/Documents/myscripts/findmydevices_all.txt"

# Scan parameters
FINDMYDEVICES_TIMEOUT="120"
FINDMYDEVICES_NETWORK="192.168.1.0"
FINDMYDEVICES_NETMASK="24"

# Notification settings
FINDMYDEVICES_NOTIFY_ENABLED="yes"

# Output colorization
FINDMYDEVICES_OUTPUT_COLOR_1="33"
FINDMYDEVICES_OUTPUT_COLOR_2="5"
FINDMYDEVICES_OUTPUT_COLOR_GOOD="2"
FINDMYDEVICES_OUTPUT_COLOR_ERROR="1"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - devices found and scanned
.TP
.B 1
Error - no devices found on network
.TP
.B 3
Error - required tools not found (bash or nmap missing)
.SH NOTES
.IP \\(bu 2
Requires sudo/root privileges for nmap operations
.IP \\(bu 2
Complete port scan (1-65535) takes significant time per device
.IP \\(bu 2
Default 120-second timeout may need adjustment for slow networks
.IP \\(bu 2
Results are cumulative in master list (not cleared between scans)
.IP \\(bu 2
Hostname resolution requires functional DNS or /etc/hosts
.IP \\(bu 2
Large networks (/16, /8) can take hours to scan
.IP \\(bu 2
Network traffic may trigger IDS/IPS alerts
.IP \\(bu 2
Requires nmap version with service detection support
.SH TIPS
.SS Network Discovery
.RS
.EX
# Quick scan of local network
findmydevices

# Scan specific floor/building subnet
findmydevices 10.2.0.0/24

# Scan entire corporate network (slow)
findmydevices 10.0.0.0/16 --timeout 60

# Fast scan with shorter timeout
findmydevices --timeout 30 192.168.1.0/24
.EE
.RE
.SS Result Analysis
.RS
.EX
# View master device list
cat ~/Documents/myscripts/findmydevices_all.txt

# Check specific device ports
cat ~/Documents/myscripts/findmydevices/192.168.1.1.txt

# Find devices with SSH open
grep -l "22/tcp.*open" ~/Documents/myscripts/findmydevices/*.txt

# Count discovered devices
wc -l ~/Documents/myscripts/findmydevices_all.txt
.EE
.RE
.SS Automation
.RS
.EX
# Daily network scan (cron)
0 2 * * * /usr/local/bin/findmydevices

# Scan and alert on new devices
#!/bin/bash
old_count=$(wc -l < ~/Documents/myscripts/findmydevices_all.txt)
findmydevices
new_count=$(wc -l < ~/Documents/myscripts/findmydevices_all.txt)
[ "$new_count" -gt "$old_count" ] && \\
  notify-send "New devices found on network"
.EE
.RE
.SH USE CASES
.SS Network Auditing
.RS
.IP \\(bu 2
Discover all devices on network
.IP \\(bu 2
Identify unauthorized devices
.IP \\(bu 2
Map network topology
.IP \\(bu 2
Monitor for new connections
.IP \\(bu 2
Inventory network equipment
.RE
.SS Security Assessment
.RS
.IP \\(bu 2
Find open ports and services
.IP \\(bu 2
Identify vulnerable services
.IP \\(bu 2
Detect rogue devices
.IP \\(bu 2
Verify firewall rules
.IP \\(bu 2
Check for unauthorized services
.RE
.SS Network Administration
.RS
.IP \\(bu 2
DHCP IP allocation monitoring
.IP \\(bu 2
Device documentation and inventory
.IP \\(bu 2
Troubleshooting connectivity issues
.IP \\(bu 2
Network capacity planning
.IP \\(bu 2
Service availability monitoring
.RE
.SH TROUBLESHOOTING
.SS No Devices Found
.RS
.IP \\(bu 2
Verify network parameters are correct
.IP \\(bu 2
Check if sudo password was entered correctly
.IP \\(bu 2
Ensure network interface is up: ip link show
.IP \\(bu 2
Try manual nmap: sudo nmap -sP -n <network>/<mask>
.IP \\(bu 2
Check firewall rules aren't blocking
.RE
.SS Nmap Requires Sudo
.RS
.IP \\(bu 2
Script automatically requests sudo access
.IP \\(bu 2
Enter password when prompted
.IP \\(bu 2
Verify user is in sudoers file
.IP \\(bu 2
Check sudo group membership: groups $USER
.IP \\(bu 2
Test sudo access: sudo -v
.RE
.SS Scan Takes Too Long
.RS
.IP \\(bu 2
Reduce timeout: --timeout 60
.IP \\(bu 2
Scan smaller subnet (use /24 instead of /16)
.IP \\(bu 2
Use nmap directly with faster options
.IP \\(bu 2
Run scan overnight for large networks
.IP \\(bu 2
Consider network segmentation
.RE
.SS Hostname Resolution Fails
.RS
.IP \\(bu 2
Check DNS configuration: cat /etc/resolv.conf
.IP \\(bu 2
Verify getent is installed: which getent
.IP \\(bu 2
Test resolution manually: getent hosts <IP>
.IP \\(bu 2
Add entries to /etc/hosts if needed
.IP \\(bu 2
Devices marked "unknown" have no reverse DNS
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \\(bu 2
bash - Bash shell for script execution
.IP \\(bu 2
nmap - Network mapper for scanning
.IP \\(bu 2
sudo - Privilege elevation for nmap
.IP \\(bu 2
ip - Network configuration tool
.IP \\(bu 2
awk - Text processing
.IP \\(bu 2
grep - Pattern matching
.RE
.TP
.B Optional:
.RS
.IP \\(bu 2
ipcalc - Network calculation (for display)
.IP \\(bu 2
unbuffer - Output buffering (for display)
.IP \\(bu 2
getent - Name service lookup
.IP \\(bu 2
ping - Connectivity testing
.IP \\(bu 2
nslookup - DNS queries
.RE
.SH SECURITY CONSIDERATIONS
.SS Network Scanning Ethics
.RS
.IP \\(bu 2
Only scan networks you own or have permission to scan
.IP \\(bu 2
Aggressive scanning may be detected as attack
.IP \\(bu 2
Respect network usage policies
.IP \\(bu 2
Port scanning may be illegal in some jurisdictions
.IP \\(bu 2
Corporate networks may have monitoring and alerting
.RE
.SS Best Practices
.RS
.IP \\(bu 2
Obtain written permission before scanning
.IP \\(bu 2
Inform network administrators
.IP \\(bu 2
Scan during maintenance windows
.IP \\(bu 2
Use less aggressive timing for production networks
.IP \\(bu 2
Secure scan results (contain sensitive information)
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \\(co 2023 Jason Hempstead, Casjays Developments
.br
License: LICENSE.md
.SH SEE ALSO
.BR nmap (1),
.BR ip (8),
.BR ping (8),
.BR getent (1)
.PP
Nmap documentation:
.br
https://nmap.org/book/man.html
.PP
Network scanning guide:
.br
https://nmap.org/book/man-host-discovery.html
