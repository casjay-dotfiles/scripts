.TH FINDMYROKU "1" "December 2025" "findmyroku 202208070748-git" "User Commands"
.SH NAME
findmyroku \- Find Roku streaming devices on local network using nmap scanning
.SH SYNOPSIS
.B findmyroku
[\fI\,NETWORK\fR] [\fI\,NETMASK\fR] [\fI\,OPTIONS\fR]
.SH DESCRIPTION
.B findmyroku
is a specialized network scanner that locates Roku streaming media devices on local networks. It uses nmap to perform network discovery scans and filters the results specifically for devices identified as Roku hardware based on MAC address manufacturer information. The script automatically detects network parameters, performs ping scans to find active hosts, and saves discovered Roku devices with their IP addresses and hostnames to a persistent list file.
.PP
The script simplifies Roku device discovery by providing automatic network parameter detection from the default network interface, CIDR notation support for flexible network specification, hostname resolution via DNS lookups, and persistent device list storage in ~/Documents/myscripts/findmyroku_devices.txt. Results are displayed with color-coded output and saved for future reference.
.PP
findmyroku is particularly useful for home automation enthusiasts managing multiple Roku devices, media center administrators tracking streaming hardware, network administrators performing device inventory, and developers working with Roku External Control Protocol (ECP) applications.
.SH USAGE
.B findmyroku
.PP
Scan local network (auto-detects network/netmask from default interface).
.PP
.B findmyroku 192.168.1.0/24
.PP
Scan specific network using CIDR notation.
.PP
.B findmyroku 10.0.0.0 16
.PP
Scan custom network with separate network and netmask parameters.
.PP
.B findmyroku --debug
.PP
Scan local network with verbose debug output.
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate or regenerate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose nmap output
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress desktop notifications
.SH NETWORK SCANNING
How findmyroku discovers Roku streaming devices:
.SS Automatic Network Detection
.RS
If no network is specified, findmyroku automatically detects the local network configuration:
.EX
default_if=$(ip route list | awk '/^default/ {print $5}')
ip=$(ip -o -f inet addr show "$default_if" | awk -F/ '{print $1}')
nm=$(ip -o -f inet addr show "$default_if" | awk -F/ '{print $2}')
.EE
.IP \(bu 2
Identifies default network interface from routing table
.IP \(bu 2
Extracts IP address and netmask from interface
.IP \(bu 2
Calculates network address (.0) for scanning
.IP \(bu 2
Uses CIDR netmask (e.g., /24) for range
.RE
.SS Nmap Ping Scan
.RS
Core scanning command that discovers active hosts:
.EX
sudo nmap -sP -n "$network"/"$netmask"
.EE
.IP \(bu 2
-sP: Ping scan (host discovery only, no port scan)
.IP \(bu 2
-n: No DNS resolution during scan (faster)
.IP \(bu 2
Discovers all responding hosts on network
.IP \(bu 2
Identifies device manufacturers from MAC addresses
.IP \(bu 2
Returns MAC address OUI information
.RE
.SS Roku Device Filtering
.RS
Filters nmap output for Roku devices:
.EX
sudo nmap -sP -n "$ip"/"$nm" | \\
  awk '/^Nmap/{ip=$NF}/Roku/{print ip}' | \\
  sed 's#(##g' | sed 's#)##g'
.EE
.IP \(bu 2
Scans for "Roku" string in nmap output
.IP \(bu 2
Extracts IP address from Nmap scan line
.IP \(bu 2
Removes parentheses from IP addresses
.IP \(bu 2
Outputs clean IP address list
.IP \(bu 2
Matches all Roku Inc OUI prefixes
.RE
.SS Hostname Resolution
.RS
.IP \(bu 2
Attempts getent hosts lookup for each discovered IP
.IP \(bu 2
Retrieves hostname from DNS or /etc/hosts
.IP \(bu 2
Saves IP and hostname to device list
.IP \(bu 2
Updates master list at ~/Documents/myscripts/findmyroku_devices.txt
.RE
.SH NETWORK PARAMETERS
Understanding network specification:
.SS CIDR Notation
.RS
.IP \(bu 2
192.168.1.0/24 - 254 hosts (192.168.1.1-254)
.IP \(bu 2
10.0.0.0/16 - 65534 hosts (10.0.0.1-255.255)
.IP \(bu 2
172.16.0.0/12 - 1,048,574 hosts
.IP \(bu 2
192.168.0.0/23 - 510 hosts (192.168.0-1.1-254)
.RE
.SS Common Private Networks
.RS
.IP \(bu 2
192.168.0.0/16 - Class C private range (home networks)
.IP \(bu 2
10.0.0.0/8 - Class A private range (large networks)
.IP \(bu 2
172.16.0.0/12 - Class B private range (corporate networks)
.RE
.SS Network Examples
.RS
.EX
# Scan home /24 network
findmyroku 192.168.1.0/24

# Scan corporate /16 network (takes longer)
findmyroku 10.0.0.0/16

# Scan with separate parameters
findmyroku 192.168.100.0 24

# Scan specific subnet
findmyroku 10.50.30.0 28
.EE
.RE
.SH EXAMPLES
.TP
.B findmyroku
Automatically scan local network for Roku devices
.TP
.B findmyroku 192.168.1.0/24
Scan specific /24 network
.TP
.B findmyroku 10.0.0.0 16
Scan 10.0.0.0/16 network with separate parameters
.TP
.B findmyroku --debug 192.168.1.0/24
Scan with verbose nmap output and debugging information
.TP
.B findmyroku --silent
Scan local network without desktop notifications
.TP
.B findmyroku --raw 192.168.1.0/24
Scan with plain text output (no colors)
.SH OUTPUT FILES
findmyroku saves results to organized files:
.SS Device List File
.RS
.TP
.B ~/Documents/myscripts/findmyroku_devices.txt
Contains all discovered Roku devices with hostnames:
.EX
192.168.1.10   roku-living-room
192.168.1.20   roku-bedroom
192.168.1.50   roku-kitchen
192.168.1.100  roku-basement
.EE
.IP \(bu 2
Format: IP_ADDRESS    HOSTNAME
.IP \(bu 2
Updated with each scan
.IP \(bu 2
Hostname from DNS/DHCP if available
.IP \(bu 2
Used for device inventory and tracking
.RE
.SH FILES
.TP
.B ~/.config/myscripts/findmyroku/settings.conf
User configuration file
.TP
.B ~/.local/share/myscripts/findmyroku/backups/
Configuration backup directory
.TP
.B ~/.local/log/findmyroku/
Log file directory
.TP
.B ~/.local/tmp/system_scripts/findmyroku/
Temporary files directory (scan working files)
.TP
.B ~/.cache/findmyroku/
Cache directory
.TP
.B ~/Documents/myscripts/findmyroku_devices.txt
Master list of all discovered Roku devices
.SH ENVIRONMENT VARIABLES
.TP
.B FINDMYROKU_SAVED_FILE
Device list file location (default: ~/Documents/myscripts/findmyroku_devices.txt)
.TP
.B FINDMYROKU_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B FINDMYROKU_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B FINDMYROKU_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B FINDMYROKU_OUTPUT_COLOR_GOOD
Success message color (default: 2 for green)
.TP
.B FINDMYROKU_OUTPUT_COLOR_ERROR
Error message color (default: 1 for red)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/findmyroku/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Output file location
FINDMYROKU_SAVED_FILE="$HOME/Documents/myscripts/findmyroku_devices.txt"

# Notification settings
FINDMYROKU_NOTIFY_ENABLED="yes"

# Output colorization
FINDMYROKU_OUTPUT_COLOR_1="33"
FINDMYROKU_OUTPUT_COLOR_2="5"
FINDMYROKU_OUTPUT_COLOR_GOOD="2"
FINDMYROKU_OUTPUT_COLOR_ERROR="1"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - Roku devices found on network
.TP
.B 1
Error - no Roku devices found on network
.TP
.B 3
Error - required tools not found (bash or nmap missing)
.SH NOTES
.IP \(bu 2
Requires sudo/root privileges for nmap operations
.IP \(bu 2
Scan time depends on network size and timeout settings
.IP \(bu 2
Only detects Roku devices (filters by manufacturer OUI)
.IP \(bu 2
Results are appended to device list with each scan
.IP \(bu 2
Hostname resolution requires functional DNS or /etc/hosts
.IP \(bu 2
Large networks (/16, /8) can take significant time to scan
.IP \(bu 2
Network traffic may trigger IDS/IPS alerts
.IP \(bu 2
Requires nmap version with MAC address manufacturer detection
.IP \(bu 2
Offline Roku devices will not be detected
.IP \(bu 2
Devices must respond to ICMP ping requests
.SH TIPS
.SS Network Discovery
.RS
.EX
# Quick scan of local network
findmyroku

# Scan specific subnet for Roku devices
findmyroku 192.168.10.0/24

# Scan entire network (slow)
findmyroku 10.0.0.0/16

# Check if specific IP is Roku device
findmyroku 192.168.1.100/32
.EE
.RE
.SS Result Analysis
.RS
.EX
# View all discovered Roku devices
cat ~/Documents/myscripts/findmyroku_devices.txt

# Count discovered Roku devices
wc -l ~/Documents/myscripts/findmyroku_devices.txt

# Find specific hostname
grep -i "living-room" ~/Documents/myscripts/findmyroku_devices.txt

# List only IP addresses
awk '{print $1}' ~/Documents/myscripts/findmyroku_devices.txt
.EE
.RE
.SS Automation
.RS
.EX
# Daily Roku device scan (cron)
0 2 * * * /usr/local/bin/findmyroku

# Scan and alert on new devices
#!/bin/bash
old_count=$(wc -l < ~/Documents/myscripts/findmyroku_devices.txt)
findmyroku
new_count=$(wc -l < ~/Documents/myscripts/findmyroku_devices.txt)
[ "$new_count" -gt "$old_count" ] && \\
  notify-send "New Roku device found on network"

# Scan multiple networks
for net in 192.168.1.0/24 192.168.2.0/24 10.0.0.0/24; do
  findmyroku "$net"
done
.EE
.RE
.SH USE CASES
.SS Home Automation
.RS
.IP \(bu 2
Discover all Roku devices in smart home network
.IP \(bu 2
Track Roku streaming boxes and sticks
.IP \(bu 2
Monitor device connectivity and availability
.IP \(bu 2
Inventory Roku device deployments
.IP \(bu 2
Identify unauthorized Roku devices
.RE
.SS Network Administration
.RS
.IP \(bu 2
DHCP IP allocation monitoring for Roku devices
.IP \(bu 2
Roku device documentation and inventory
.IP \(bu 2
Troubleshooting streaming device connectivity
.IP \(bu 2
Network capacity planning
.IP \(bu 2
Device availability monitoring
.RE
.SS Media Center Management
.RS
.IP \(bu 2
Locate Roku devices for remote management
.IP \(bu 2
Find Roku devices with dynamic IPs
.IP \(bu 2
Track Roku TVs and streaming devices
.IP \(bu 2
Identify Roku devices for ECP control
.IP \(bu 2
Manage multi-room Roku deployments
.RE
.SH TROUBLESHOOTING
.SS No Roku Devices Found
.RS
.IP \(bu 2
Verify Roku device is powered on and connected to network
.IP \(bu 2
Check network parameters are correct
.IP \(bu 2
Ensure sudo password was entered correctly
.IP \(bu 2
Verify network interface is up: ip link show
.IP \(bu 2
Try manual nmap: sudo nmap -sP -n <network>/<mask>
.IP \(bu 2
Check firewall rules aren't blocking ICMP
.IP \(bu 2
Ensure Roku responds to ping: ping <roku-ip>
.IP \(bu 2
Verify Roku is on same network segment
.RE
.SS Nmap Requires Sudo
.RS
.IP \(bu 2
Script automatically requests sudo access
.IP \(bu 2
Enter password when prompted
.IP \(bu 2
Verify user is in sudoers file
.IP \(bu 2
Check sudo group membership: groups $USER
.IP \(bu 2
Test sudo access: sudo -v
.RE
.SS Scan Takes Too Long
.RS
.IP \(bu 2
Scan smaller subnet (use /24 instead of /16)
.IP \(bu 2
Use nmap directly with faster timing options
.IP \(bu 2
Scan during off-peak hours
.IP \(bu 2
Consider network segmentation
.IP \(bu 2
Check network latency: ping -c 10 <gateway>
.RE
.SS Hostname Resolution Fails
.RS
.IP \(bu 2
Check DNS configuration: cat /etc/resolv.conf
.IP \(bu 2
Verify getent is installed: which getent
.IP \(bu 2
Test resolution manually: getent hosts <IP>
.IP \(bu 2
Add entries to /etc/hosts if needed
.IP \(bu 2
Check DHCP server hostname assignments
.IP \(bu 2
Configure Roku device name in settings
.RE
.SS Network Display Issues
.RS
.IP \(bu 2
Install ipcalc for enhanced network info: sudo apt install ipcalc
.IP \(bu 2
Install unbuffer for better output: sudo apt install expect
.IP \(bu 2
Use --raw flag to disable colorization
.IP \(bu 2
Check terminal supports ANSI colors
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
nmap - Network mapper for scanning
.IP \(bu 2
sudo - Privilege elevation for nmap
.IP \(bu 2
ip - Network configuration tool
.IP \(bu 2
awk - Text processing for filtering output
.IP \(bu 2
sed - Stream editor for text manipulation
.IP \(bu 2
grep - Pattern matching
.RE
.TP
.B Optional:
.RS
.IP \(bu 2
ipcalc - Network calculation and display
.IP \(bu 2
unbuffer - Output buffering for better display
.IP \(bu 2
getent - Name service lookup for hostname resolution
.IP \(bu 2
nslookup - DNS hostname resolution
.RE
.SH ROKU DETECTION
.SS MAC Address OUI Prefixes
.RS
Roku devices are identified by MAC address manufacturer information (OUI):
.IP \(bu 2
DC:3A:5E - Roku Inc
.IP \(bu 2
D8:31:34 - Roku Inc
.IP \(bu 2
D0:4D:2C - Roku Inc
.IP \(bu 2
CC:6D:A0 - Roku Inc
.IP \(bu 2
C8:3A:6B - Roku Inc
.IP \(bu 2
B8:A1:75 - Roku Inc
.IP \(bu 2
B8:3E:59 - Roku Inc
.IP \(bu 2
B0:EE:7B - Roku Inc
.IP \(bu 2
B0:A7:37 - Roku Inc
.IP \(bu 2
AC:AE:19 - Roku Inc
.IP \(bu 2
AC:3A:7A - Roku Inc
.IP \(bu 2
8C:49:62 - Roku Inc
.IP \(bu 2
88:DE:A9 - Roku Inc
.IP \(bu 2
84:EA:ED - Roku Inc
.IP \(bu 2
10:59:32 - Roku Inc
.IP \(bu 2
08:05:81 - Roku Inc
.IP \(bu 2
00:0D:4B - Roku Inc
.RE
.SS Detected Models
.RS
All Roku device models are detected:
.IP \(bu 2
Roku Express/Express+
.IP \(bu 2
Roku Streaming Stick/Stick+
.IP \(bu 2
Roku Premiere/Premiere+
.IP \(bu 2
Roku Ultra
.IP \(bu 2
Roku TV (all brands)
.IP \(bu 2
Roku Soundbar
.IP \(bu 2
Roku Smart Soundbar
.IP \(bu 2
Roku Streambar/Streambar Pro
.IP \(bu 2
Legacy Roku models (Roku 1-4)
.RE
.SH ROKU INTEGRATION
.SS External Control Protocol (ECP)
.RS
Once devices are discovered, you can control them via ECP:
.EX
# Get device info
curl http://<roku-ip>:8060/query/device-info

# Launch channel
curl -d '' http://<roku-ip>:8060/launch/12

# Send keypress
curl -d '' http://<roku-ip>:8060/keypress/Home

# Search
curl -d '' http://<roku-ip>:8060/search/browse
.EE
.RE
.SS Common ECP Ports
.RS
.IP \(bu 2
8060 - ECP control and query
.IP \(bu 2
8061 - HTTPS ECP (Roku OS 10+)
.IP \(bu 2
8080 - Developer mode (when enabled)
.RE
.SH SECURITY CONSIDERATIONS
.SS Network Scanning Ethics
.RS
.IP \(bu 2
Only scan networks you own or have permission to scan
.IP \(bu 2
Network scanning may be detected as reconnaissance
.IP \(bu 2
Respect network usage policies
.IP \(bu 2
Corporate networks may have monitoring and alerting
.IP \(bu 2
Inform network administrators before scanning
.RE
.SS Best Practices
.RS
.IP \(bu 2
Obtain written permission before scanning
.IP \(bu 2
Scan during maintenance windows when possible
.IP \(bu 2
Document all Roku devices found
.IP \(bu 2
Secure device list file (contains network topology)
.IP \(bu 2
Monitor for unauthorized Roku devices
.IP \(bu 2
Keep device inventory up to date
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \\(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR nmap (1),
.BR ip (8),
.BR ping (8),
.BR getent (1)
.PP
Nmap documentation:
.br
https://nmap.org/book/man.html
.PP
Roku External Control Protocol:
.br
https://developer.roku.com/docs/developer-program/debugging/external-control-api.md
