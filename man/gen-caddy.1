.\" Manpage for gen-caddy
.TH man 1 "11 September 2025" "202208071018-git" "gen-caddy"

.SH NAME
gen-caddy \- Setup and manage Caddy web server installations

.SH DESCRIPTION
A comprehensive tool for installing, configuring, and managing Caddy web server with automatic SSL, PHP integration, and service management. Provides complete lifecycle management for Caddy deployments with interactive configuration and multi-domain support.

.SH SYNOPSIS
gen-caddy [options] [command] [arguments...]

.SH COMMANDS
.SS Server Control
.TP
.B start
Start the Caddy service
.TP
.B stop
Stop the Caddy service
.TP
.B reload
Reload Caddy configuration without stopping
.TP
.B restart
Restart the Caddy service
.TP
.B status
Show detailed Caddy status including uptime, memory usage, and listening ports

.SS Installation and Updates
.TP
.B install
Install Caddy with PHP-FPM integration and automatic service creation
.TP
.B install \-\-no-php
Install Caddy without PHP (web server only)
.TP
.B update
Update Caddy to the latest version from GitHub releases
.TP
.B uninstall
Completely remove Caddy installation and data

.SS Configuration Management
.TP
.B config
Interactive domain and SSL configuration setup
.TP
.B edit
Edit Caddyfile using default editor
.TP
.B check
Validate Caddyfile syntax and configuration
.TP
.B reverse <to> <from>
Setup reverse proxy from external port to internal service

.SS PHP Management
.TP
.B installphp
Install and configure PHP-FPM for web applications
.TP
.B fixphp
Fix PHP-FPM configuration and user permissions

.SS Service Management
.TP
.B service
Create systemd/init.d service for automatic startup
.TP
.B delete-service
Remove Caddy from system services

.SS Maintenance
.TP
.B backup
Create backup archive of Caddy installation and configuration
.TP
.B restore
Restore Caddy from backup archive
.TP
.B html
Copy HTML template files to web directory
.TP
.B download
Download or update Caddy binary from GitHub releases

.SS Information
.TP
.B about
Display information about Caddy and this installer
.TP
.B version
Show version information
.TP
.B help
Display help message

.SH OPTIONS
.TP
.B \-\-no-php
Skip PHP installation and configuration (use with install command)
.TP
.B \-\-force
Force overwrite existing files and configurations
.TP
.B \-\-domain <domain>
Specify domain name for configuration
.TP
.B \-\-port <port>
Specify port number for Caddy server
.TP
.B \-\-fpm <port>
Specify PHP-FPM port or socket
.TP
.B \-\-caddyfile <file>
Specify custom Caddyfile location
.TP
.B \-\-help
Display help message
.TP
.B \-\-version
Display current version
.TP
.B \-\-config
Generate configuration file
.TP
.B \-\-options
Show all available options
.TP
.B \-\-debug
Enable debugging output
.TP
.B \-\-raw
Remove all formatting from output
.TP
.B \-\-silent
Suppress non-error output

.SH EXAMPLES
.TP
.B gen-caddy install
Install Caddy with PHP support and interactive configuration
.TP
.B gen-caddy install \-\-no-php
Install Caddy without PHP for static sites only
.TP
.B gen-caddy \-\-domain example.com \-\-port :8080 config
Configure Caddy for example.com on port 8080
.TP
.B gen-caddy reverse 80 3000
Setup reverse proxy from port 80 to local service on port 3000
.TP
.B gen-caddy start
Start Caddy web server
.TP
.B gen-caddy status
Show detailed server status and resource usage
.TP
.B gen-caddy backup
Create backup of current Caddy installation
.TP
.B gen-caddy update
Update to latest Caddy version

.SH FEATURES
.TP
.B Automatic SSL
Integrates with Let's Encrypt for automatic HTTPS certificate management
.TP
.B Multi-Architecture Support
Automatically detects and installs appropriate binary for x86_64, ARM64, ARM variants
.TP
.B PHP Integration
Automatic PHP-FPM detection, configuration, and integration across multiple distributions
.TP
.B Service Management
Creates and manages systemd/init.d services for automatic startup
.TP
.B Multi-Domain Support
Configure multiple domains with comma-separated input
.TP
.B Interactive Configuration
Guided setup with sensible defaults and validation
.TP
.B Backup and Restore
Complete installation backup and restore capabilities

.SH CONFIGURATION
.TP
.I ~/.config/myscripts/gen-caddy/settings.conf
Main configuration file with customizable settings
.TP
.I ~/.config/myscripts/gen-caddy/domains.txt
Domain configuration storage
.TP
.I /etc/caddy/Caddyfile
Main Caddyfile (system installation)
.TP
.I ~/.local/share/caddyserver/Caddyfile
Main Caddyfile (user installation)

.SH ARCHITECTURE SUPPORT
Automatically detects and supports:
.br
- x86_64 (AMD64)
.br
- AArch64 (ARM64)
.br
- i386 (32-bit)
.br
- ARMv5, ARMv6, ARMv7

.SH PHP INTEGRATION
Supports PHP-FPM on:
.br
- Ubuntu/Debian (php5-fpm, php7.x-fpm, php8.x-fpm)
.br
- CentOS/RHEL (php-fpm)
.br
- Arch Linux (php-fpm)
.br
- Automatic socket/port detection

.SH SSL CONFIGURATION
.TP
.B Automatic HTTPS
Prompts for email address and configures Let's Encrypt
.TP
.B Local Development
Automatically disables SSL for localhost and private IP ranges
.TP
.B Certificate Management
Handles certificate renewal and validation

.SH FILES
.TP
.I /usr/local/bin/caddy
System-wide Caddy binary (root installation)
.TP
.I ~/.local/bin/caddy
User-specific Caddy binary (user installation)
.TP
.I /var/log/caddy/
System log directory
.TP
.I ~/.local/log/caddy/
User log directory

.SH NOTES
The script automatically detects whether to install system-wide (as root) or user-specific (as regular user). PHP integration is optional and can be skipped with --no-php. All configurations include automatic SSL setup for production domains and appropriate security settings.

.SH LICENSE
WTFPL

.SH BUGS
No known bugs.

.SH REPORTING BUGS
https://github.com/casjay-dotfiles/issues

.SH AUTHOR
Currently maintained by Jason Hempstead <jason@casjaysdev.pro>