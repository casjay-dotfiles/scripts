.TH GEN-DOCKERMGR "1" "December 2025" "gen-dockermgr 202602020740-git" "User Commands"
.SH NAME
gen-dockermgr \- Docker container installation script generator
.SH SYNOPSIS
.B gen-dockermgr
[\fI\,OPTIONS\/\fR] [\fI\,COMMANDS\/\fR]
.SH DESCRIPTION
.B gen-dockermgr
is a code generation tool that creates standardized Docker container installation scripts and configuration files. It automates the creation of installation scripts, nginx reverse proxy configurations, directory structures, and git repository setup for Docker-based projects managed by dockermgr.
.PP
The tool generates complete project scaffolding including install.sh scripts following the dockermgr template format, nginx reverse proxy configurations with SSL support, proper directory structure for data and configuration persistence, and optional git repository initialization.
.SH COMMANDS
.TP
.B script
Generate only the installation script (install.sh) without creating the full project structure
.TP
.B (default)
When run without a command, generates the complete project structure including installation script, proxy configuration, license, readme, gitignore, and required directories
.SH OPTIONS
.TP
.BR \-\-help
Display help message and exit
.TP
.BR \-\-config
Generate or regenerate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output and command tracing
.TP
.BR \-\-raw
Disable colorized output (useful for piping or logging)
.TP
.BR \-\-silent
Run in silent mode with minimal output
.TP
.BR \-\-dir " " \fI\,<directory>\/\fR
Set the working directory for generation (default: current directory)
.TP
.BR \-\-nogit
Skip git repository initialization and setup
.TP
.BR \-\-nopush
Do not prompt to push changes to remote repository
.TP
.BR \-\-noask
Automated mode - setup everything and push without prompting for confirmation
.SH GENERATED FILES AND DIRECTORIES
gen-dockermgr creates the following structure in the target directory:
.SS Files
.TP
.B install.sh
Main installation script following dockermgr template format. Handles container deployment, configuration, and management.
.TP
.B nginx/proxy.conf
Nginx reverse proxy configuration template with SSL/TLS support, websocket handling, and security headers.
.TP
.B LICENSE.md
WTFPL (Do What The F*** You Want To Public License) license file.
.TP
.B README.md
Generated README file using dockermgr.md template.
.TP
.B .gitignore
Git ignore file with default patterns for Docker projects.
.SS Directories
.TP
.B nginx/
Contains nginx reverse proxy configuration files.
.TP
.B rootfs/data/
Directory for persistent container data. Includes .gitkeep file.
.TP
.B rootfs/config/
Directory for persistent container configuration files. Includes .gitkeep file.
.SH NGINX PROXY CONFIGURATION
The generated nginx/proxy.conf includes:
.RS
.IP \(bu 2
SSL/TLS configuration with modern cipher suites
.IP \(bu 2
HTTP/2 support
.IP \(bu 2
Websocket upgrade handling
.IP \(bu 2
Security headers (HSTS, etc.)
.IP \(bu 2
Reverse proxy headers (X-Real-IP, X-Forwarded-For, etc.)
.IP \(bu 2
Configurable timeouts for long-running connections
.IP \(bu 2
Client max body size unlimited
.RE
.PP
The configuration uses placeholders that should be replaced:
.RS
.IP \(bu 2
REPLACE_APPNAME - Application name
.IP \(bu 2
REPLACE_NGINX_HOST - Server hostname
.IP \(bu 2
REPLACE_NGINX_PORT - Listen port
.IP \(bu 2
REPLACE_HOST_PROXY - Backend proxy URL
.IP \(bu 2
REPLACE_NGINX_INCLUDE - Additional nginx includes
.IP \(bu 2
REPLACE_NGINX_VHOSTS - Virtual host aliases
.IP \(bu 2
REPLACE_SERVER_LISTEN_OPTS - Additional listen options
.RE
.SH INSTALLATION SCRIPT TEMPLATE
The generated install.sh script includes:
.RS
.IP \(bu 2
Docker image management (pull, tag, push)
.IP \(bu 2
Container lifecycle management (create, start, stop, restart)
.IP \(bu 2
Volume and network configuration
.IP \(bu 2
Environment variable handling
.IP \(bu 2
Health checks and status monitoring
.IP \(bu 2
Backup and restore functionality
.IP \(bu 2
Update and upgrade procedures
.RE
.SH GIT INTEGRATION
When --nogit is not specified, gen-dockermgr will:
.RS
.IP \(bu 2
Initialize git repository if not present
.IP \(bu 2
Setup remote repository URL (from GEN_DOCKER_ORG_REPO/APPNAME)
.IP \(bu 2
Create initial commit with generated files
.IP \(bu 2
Optionally push to remote (unless --nopush specified)
.RE
.PP
The default git organization URL is https://github.com/dockermgr
.SH EXAMPLES
.TP
.B gen-dockermgr
Generate complete Docker project structure in current directory
.TP
.B gen-dockermgr --dir /path/to/project
Generate project structure in specified directory
.TP
.B gen-dockermgr --dir myapp
Generate project structure for "myapp" application
.TP
.B gen-dockermgr --nogit
Generate project without git repository initialization
.TP
.B gen-dockermgr --nopush
Generate project and setup git but don't push to remote
.TP
.B gen-dockermgr --noask
Automated generation and push without prompts
.TP
.B gen-dockermgr script
Generate only the install.sh script without full structure
.TP
.B gen-dockermgr --dir portainer --noask
Automated setup for portainer project with auto-push
.TP
.B gen-dockermgr --dir /opt/containers/nginx --nogit
Generate nginx project structure without git setup
.SH WORKFLOW
Typical workflow for creating a new Docker container project:
.PP
.RS 4
.EX
# Create project directory
mkdir myapp && cd myapp

# Generate project structure
gen-dockermgr

# Edit generated files as needed
vim install.sh
vim nginx/proxy.conf
vim README.md

# Test installation script
bash install.sh --help

# Commit and push changes
git add .
git commit -m "Initial commit"
git push
.EE
.RE
.SH FILES
.TP
.B ~/.config/myscripts/gen-dockermgr/settings.conf
User configuration file for gen-dockermgr
.TP
.B ~/.config/myscripts/gen-dockermgr/backups/
Configuration backup directory
.TP
.B ~/.local/log/gen-dockermgr/
Log file directory
.TP
.B ~/.cache/gen-dockermgr/
Cache directory for temporary files
.TP
.B ~/.local/tmp/system_scripts/gen-dockermgr/
Temporary files directory
.TP
.B ~/.local/run/system_scripts/gen-dockermgr/
Runtime files directory
.SH ENVIRONMENT VARIABLES
.TP
.B GEN_DOCKERMGR_CONFIG_DIR
Override default configuration directory
.TP
.B GEN_DOCKER_ORG_REPO
Override GitHub organization URL for git remote (default: https://github.com/dockermgr)
.TP
.B GEN_DOCKERMGR_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B GEN_DOCKERMGR_SILENT
Set to "true" for silent operation
.SH EXIT STATUS
.TP
.B 0
Success
.TP
.B 1
General error or generation failure (e.g., install.sh already exists)
.TP
.B 3
Required command not found (bash required)
.SH NOTES
.IP \(bu 2
gen-dockermgr will not overwrite existing install.sh files - it backs them up with timestamps instead
.IP \(bu 2
Generated scripts follow the dockermgr template format and conventions
.IP \(bu 2
The application name is derived from the target directory basename (lowercased)
.IP \(bu 2
All generated configuration uses placeholders prefixed with "REPLACE_" that should be customized
.IP \(bu 2
The nginx proxy configuration requires proper SSL certificates in /etc/letsencrypt/
.IP \(bu 2
Generated install.sh scripts can be used standalone or managed through dockermgr
.IP \(bu 2
Backup copies of overwritten files are saved with .bak extension and timestamps
.SH DEPENDENCIES
.IP \(bu 2
gen-script - For generating installation scripts
.IP \(bu 2
gen-license - For generating license files
.IP \(bu 2
gen-readme - For generating README files
.IP \(bu 2
gitignore - For generating .gitignore files
.IP \(bu 2
gitadmin - For git repository management (optional, if not using --nogit)
.SH BUGS
Report bugs at: https://github.com/dockermgr/installer/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR dockermgr (1),
.BR gen-script (1),
.BR gen-license (1),
.BR gen-readme (1),
.BR gitadmin (1),
.BR gitignore (1)
.PP
Full documentation: https://github.com/dockermgr/installer
.PP
Nginx documentation: https://nginx.org/en/docs/
