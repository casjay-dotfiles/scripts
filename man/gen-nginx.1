.TH GEN-NGINX "1" "December 2025" "gen-nginx 202208081602-git" "User Commands"
.SH NAME
gen-nginx \- Interactive nginx virtual host and proxy configuration generator
.SH SYNOPSIS
.B gen-nginx
[\fI\,OPTIONS\/\fR] [\fI\,COMMAND\/\fR] [\fI\,ARGUMENTS\/\fR]
.SH DESCRIPTION
.B gen-nginx
is a comprehensive nginx configuration generator that creates virtual hosts for static sites, PHP applications, reverse proxies, and URL redirects. It automatically detects the system's nginx user, distribution family, and PHP-FPM configuration to generate optimized server blocks.
.PP
The script handles all aspects of nginx site configuration including SSL/TLS certificate integration with Let's Encrypt, PHP-FPM configuration (both socket and TCP), CGI script handlers, and static file serving. It supports multiple Linux distributions and automatically adapts configuration paths accordingly.
.PP
gen-nginx is designed for system administrators who need to quickly deploy nginx virtual hosts without manual configuration editing.
.SH COMMANDS
.TP
.B list
List all configured nginx domains from vhost configuration files
.TP
.B redirect [domain] [target_url]
Create a redirect virtual host that redirects all requests to another URL. Supports both HTTP and HTTPS protocols.
.TP
.B static [domain] [docroot]
Create a static file serving virtual host with template HTML files and proper directory structure
.TP
.B php [domain] [docroot]
Create a PHP-enabled virtual host with PHP-FPM integration via TCP (127.0.0.1:9000)
.TP
.B proxy [domain] [backend_url]
Create a reverse proxy virtual host that forwards requests to a backend server
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information and available commands
.TP
.BR \-\-config
Generate or regenerate user configuration file with default settings
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options and commands
.TP
.BR \-\-debug
Enable debug mode with verbose output and command tracing (set -x)
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress non-essential output messages and notifications
.TP
.BR \-\-dir " " \fI\,DIRECTORY\/\fR
Set the working directory for configuration file operations
.SH EXAMPLES
.TP
.B gen-nginx list
List all configured nginx domains
.TP
.B gen-nginx static example.com /var/www/example.com
Create a static site for example.com
.TP
.B gen-nginx php myapp.com /var/www/myapp
Create a PHP-enabled site for myapp.com
.TP
.B gen-nginx proxy api.example.com http://127.0.0.1:3000
Create a reverse proxy forwarding to a local application
.TP
.B gen-nginx redirect old.example.com https://new.example.com
Create a redirect from old domain to new domain
.SH FILES
.TP
.B ~/.config/myscripts/gen-nginx/settings.conf
User configuration file for gen-nginx preferences
.TP
.B ~/.config/myscripts/gen-nginx/templates/
HTML template files for static site generation
.TP
.B ~/.config/myscripts/gen-nginx/backups/
Configuration backup directory
.TP
.B ~/.local/log/gen-nginx/
Log file directory for error tracking
.TP
.B ~/.local/tmp/system_scripts/gen-nginx/
Temporary files directory
.TP
.B ~/.cache/gen-nginx/
Cache directory
.TP
.B /etc/nginx/nginx.conf
Main nginx configuration file (system-wide)
.TP
.B /etc/nginx/vhosts.d/
Virtual host configuration directory (created by gen-nginx)
.TP
.B /etc/nginx/conf.d/
Alternative virtual host directory (distribution-dependent)
.SH ENVIRONMENT VARIABLES
.TP
.B GEN_NGINX_CONFIG_DIR
Override default configuration directory (~/.config/myscripts/gen-nginx/)
.TP
.B GEN_NGINX_AUTHOR
Default author name for generated files
.TP
.B GEN_NGINX_WWW_USER_DIR
User's web document root directory
.TP
.B GEN_NGINX_VHOST_USER_DIR
User's virtual host configuration directory
.TP
.B GEN_NGINX_WWW_SYSTEM_DIR
System web document root (/var/www)
.TP
.B GEN_NGINX_VHOST_SYSTEM_DIR
System virtual host directory (/etc/nginx/vhosts.d)
.TP
.B GEN_NGINX_ADD_DOMAINS
Additional domain aliases for server_name directive
.TP
.B GEN_NGINX_ACME_CERT_DIR
Let's Encrypt certificate directory name
.TP
.B GEN_NGINX_OUTPUT_COLOR_1
Primary output color code for terminal display (default: 33 for yellow)
.TP
.B GEN_NGINX_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/gen-nginx/settings.conf supports the following settings:
.PP
.RS 4
.EX
GEN_NGINX_AUTHOR="Your Name"
GEN_NGINX_WWW_USER_DIR="$HOME/public_html"
GEN_NGINX_VHOST_USER_DIR="$HOME/.config/nginx/sites"
GEN_NGINX_WWW_SYSTEM_DIR="/var/www"
GEN_NGINX_VHOST_SYSTEM_DIR="/etc/nginx/vhosts.d"
GEN_NGINX_NOTIFY_ENABLED="yes"
.EE
.RE
.SH GENERATED CONFIGURATION
.SS Static Site Server Block
.RS 4
.EX
server {
    listen 443 ssl;
    listen [::]:443 ssl;
    server_name example.com www.example.com;
    root /var/www/example.com;
    index index.html index.htm;

    ssl_certificate /etc/letsencrypt/live/domain/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/domain/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;

    location ~ /\\. { deny all; }
}
.EE
.RE
.SS PHP Site Server Block
.RS 4
.EX
server {
    listen 443 ssl;
    server_name myapp.com;
    root /var/www/myapp;
    index index.php index.html;

    location ~ \\.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        include fastcgi_params;
    }
}
.EE
.RE
.SS Reverse Proxy Server Block
.RS 4
.EX
server {
    listen 443 ssl;
    server_name api.example.com;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
.EE
.RE
.SS Redirect Server Block
.RS 4
.EX
server {
    listen 80;
    listen 443 ssl;
    server_name old.example.com;
    return 301 https://new.example.com$request_uri;
}
.EE
.RE
.SH DISTRIBUTION SUPPORT
gen-nginx automatically detects and adapts to different Linux distributions:
.PP
.TS
tab(;);
l l l.
Family;Distributions;Nginx User
_
debian;Debian, Ubuntu, Mint;www-data
rhel;RHEL, CentOS, Fedora, Rocky, Alma;nginx
arch;Arch, Manjaro, EndeavourOS;http
alpine;Alpine Linux;nginx
suse;openSUSE, SLES;nginx
.TE
.SH PHP-FPM INTEGRATION
gen-nginx supports PHP-FPM integration via TCP socket:
.PP
.RS
.IP \(bu 2
Default: TCP on 127.0.0.1:9000
.IP \(bu 2
Auto-detects PHP-FPM socket if available
.IP \(bu 2
Configures fastcgi_params automatically
.IP \(bu 2
Supports PHP scripts in configured docroot
.RE
.SH CGI SCRIPTS
Generated configurations include CGI support for:
.PP
.RS
.IP \(bu 2
.B .pl
\- Perl scripts
.IP \(bu 2
.B .py
\- Python scripts
.IP \(bu 2
.B .rb
\- Ruby scripts
.IP \(bu 2
.B .cgi
\- Generic CGI scripts
.RE
.PP
CGI scripts use fcgiwrap via Unix socket.
.SH SSL/TLS CONFIGURATION
All generated configurations include SSL/TLS settings:
.PP
.RS
.IP \(bu 2
Let's Encrypt certificate paths
.IP \(bu 2
TLS 1.2 and 1.3 protocols only
.IP \(bu 2
Strong cipher suites
.IP \(bu 2
HTTP to HTTPS redirect
.IP \(bu 2
Server tokens disabled
.RE
.SH EXIT STATUS
.TP
.B 0
Success - configuration created successfully
.TP
.B 1
General error or configuration creation failed
.TP
.B 2
Sudo required but not available
.TP
.B 3
Required command not found (nginx, php-fpm)
.SH NOTES
.IP \(bu 2
May require root/sudo for system-wide nginx configuration
.IP \(bu 2
Automatically creates document root directories
.IP \(bu 2
Copies HTML template files for new static sites
.IP \(bu 2
Validates domain names before creating configurations
.IP \(bu 2
Configuration files are named after the domain
.IP \(bu 2
Supports multiple domain aliases with GEN_NGINX_ADD_DOMAINS
.IP \(bu 2
HTTP automatically redirects to HTTPS
.IP \(bu 2
Let's Encrypt paths assume certbot-style directory structure
.IP \(bu 2
PHP-FPM must be installed and running for PHP sites
.IP \(bu 2
fcgiwrap required for CGI script support
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
nginx - Web server
.IP \(bu 2
sed - Stream editor for configuration processing
.RE
.TP
.B Optional:
.RS
.IP \(bu 2
php-fpm - PHP FastCGI Process Manager (for PHP sites)
.IP \(bu 2
fcgiwrap - CGI wrapper for nginx (for CGI scripts)
.IP \(bu 2
certbot - Let's Encrypt certificate management
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR nginx (8),
.BR php-fpm (8),
.BR certbot (1),
.BR fcgiwrap (8)
.PP
Nginx Documentation: https://nginx.org/en/docs/
.PP
Let's Encrypt: https://letsencrypt.org/
.PP
PHP-FPM: https://www.php.net/manual/en/install.fpm.php
