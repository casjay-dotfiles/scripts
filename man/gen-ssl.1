.TH GEN-SSL "1" "December 2025" "gen-ssl 202305061924-git" "User Commands"
.SH NAME
gen-ssl \- Create and manage OpenSSL certificates with custom Certificate Authority
.SH SYNOPSIS
.B gen-ssl
[\\fI\\,COMMAND\\fR] [\\fI\\,OPTIONS\\fR]
.SH DESCRIPTION
.B gen-ssl
is an OpenSSL certificate management tool that creates and manages SSL/TLS certificates using a custom Certificate Authority (CA). It provides complete CA setup with password protection, certificate generation for domains with wildcard support, CSR (Certificate Signing Request) creation and signing, certificate revocation with CRL (Certificate Revocation List), DH (Diffie-Hellman) parameter generation for perfect forward secrecy, and system-wide certificate installation with automatic trust store updates.
.PP
The script simplifies SSL/TLS certificate management by providing automated CA initialization and configuration, domain certificate generation with single and wildcard support, PKCS#12 (p12) certificate export for browsers, automatic system trust store integration (Debian/RHEL/Arch), Let's Encrypt compatibility mode with /etc/letsencrypt/live/domain symlinks, certificate revocation and CRL management, DH parameter generation (2048, 4096 bits), configurable certificate validity periods, and password-protected private keys.
.PP
gen-ssl is particularly useful for development and testing environments requiring trusted certificates, internal network services with custom CA, self-signed certificate management, certificate testing and validation, and local HTTPS development servers with browser trust.
.SH USAGE
.B gen-ssl setup
.PP
Create new Certificate Authority with password protection.
.PP
.B gen-ssl new mydomain.com
.PP
Generate certificate for single domain.
.PP
.B gen-ssl generate --domains "example.com,sub.example.com"
.PP
Generate certificate for multiple domains using domains.cnf.
.PP
.B gen-ssl dh --install
.PP
Generate DH parameters and install to system directory.
.SH COMMANDS
.TP
.B setup
Create new Certificate Authority (CA) with password protection. Generates:
.RS
.IP \(bu 2
CA certificate (ca.crt) and private key (ca.key)
.IP \(bu 2
PKCS#12 file (ca.p12) for browser import
.IP \(bu 2
OpenSSL configuration files (ca.cnf, req.cnf, domains.cnf)
.IP \(bu 2
Directory structure (certs/, private/, requests/, crl/, newcerts/, p12/)
.IP \(bu 2
Serial number tracking (serial.txt) and certificate database (index.txt)
.IP \(bu 2
Automatic system trust store installation
.RE
.TP
.B generate
Generate certificate using domains.cnf configuration. Steps:
.RS
.IP \(bu 2
Updates domains.cnf with specified domains
.IP \(bu 2
Creates CSR (Certificate Signing Request)
.IP \(bu 2
Signs certificate with CA
.IP \(bu 2
Installs to system directories
.IP \(bu 2
Supports wildcard domains with --wildcards
.RE
.TP
.B domains
Generate certificate using existing domains.cnf configuration without modification.
.TP
.B new [domain]
Create certificate for single domain. Usage:
.RS
.EX
gen-ssl new example.com
gen-ssl new sub.example.com
.EE
.RE
.TP
.B revoke [certificate]
Revoke certificate and update CRL. Usage:
.RS
.EX
gen-ssl revoke example.com.crt
.EE
.IP \(bu 2
Revokes specified certificate
.IP \(bu 2
Regenerates CRL (Certificate Revocation List)
.IP \(bu 2
Updates system trust store
.RE
.TP
.B dh
Generate Diffie-Hellman parameters for perfect forward secrecy. Generates:
.RS
.IP \(bu 2
DH parameter files (dh_2048.pem, dh_4096.pem)
.IP \(bu 2
Configurable bit lengths (GEN_SSL_DH_LENGTH)
.IP \(bu 2
System installation with --install option
.IP \(bu 2
Default location: ~/.config/gen-ssl/ssl/dhparam/
.IP \(bu 2
System location: /etc/ssl/dhparam/
.RE
.TP
.B install
Install certificates to system trust store and directories.
.TP
.B info
Display current configuration and settings.
.TP
.B letsencrypt
Let's Encrypt integration (Coming Soon). Planned subcommands:
.RS
.IP \(bu 2
add - Add new Let's Encrypt certificate
.IP \(bu 2
renew - Renew existing certificates
.IP \(bu 2
create - Create new certificate
.IP \(bu 2
test - Test configuration
.RE
.SH OPTIONS
.TP
.BR \\-\\-help
Display help message with usage information
.TP
.BR \\-\\-config
Generate or regenerate user configuration file
.TP
.BR \\-\\-version
Show script version information and exit
.TP
.BR \\-\\-options
Display all available command-line options
.TP
.BR \\-\\-debug
Enable debug mode with verbose output
.TP
.BR \\-\\-raw
Disable colorized output for plain text display
.TP
.BR \\-\\-force
Force operation without confirmation prompts
.TP
.BR \\-\\-silent
Suppress desktop notifications
.TP
.BR \\-\\-install
Install generated certificates to system directories
.TP
.BR \\-\\-copy
Copy templates from CasjaysDev directory
.TP
.BR \\-\\-wildcards
Enable wildcard certificate generation (*.domain, *.*.domain)
.TP
.BR \\-\\-domains \" \" \\fI\\,DOMAINS\\fR
Comma-separated list of domains for certificate (e.g., "example.com,sub.example.com")
.TP
.BR \\-\\-primary \" \" \\fI\\,DOMAIN\\fR
Set primary domain name for certificate
.TP
.BR \\-\\-password \" \" \\fI\\,PASSWORD\\fR
Set custom CA password (if not set, randomly generated)
.TP
.BR \\-\\-dns
Enable DNS validation mode
.TP
.BR \\-\\-ca
Show CA certificate information
.TP
.BR \\-\\-dir \" \" \\fI\\,DIRECTORY\\fR
Set working directory (defaults to ~/.config/gen-ssl/ssl)
.SH CERTIFICATE AUTHORITY
How gen-ssl manages the Certificate Authority:
.SS CA Setup
.RS
Initial setup creates:
.EX
~/.config/gen-ssl/ssl/
├── ca.cnf              # CA configuration
├── req.cnf             # Request configuration
├── domains.cnf         # Domain configuration
├── openssl.cnf         # OpenSSL main config
├── serial.txt          # Serial number tracking
├── index.txt           # Certificate database
├── passwd.txt          # Encrypted password file
├── certs/
│   └── ca.crt          # CA certificate
├── private/
│   └── ca.key          # CA private key
├── p12/
│   └── ca.p12          # PKCS#12 for browser import
├── requests/           # CSR storage
├── crl/                # Revocation lists
└── newcerts/           # Newly issued certificates
.EE
.RE
.SS CA Configuration
.RS
Certificate Authority settings:
.IP \\(bu 2
Country: GEN_SSL_CA_COUNTRY (default: US)
.IP \\(bu 2
State: GEN_SSL_CA_STATE (default: New York)
.IP \\(bu 2
City: GEN_SSL_CA_CITY (default: New York)
.IP \\(bu 2
Company: GEN_SSL_CA_COMPANY (default: CasjaysDev)
.IP \\(bu 2
Unit: GEN_SSL_CA_UNIT (default: IT)
.IP \\(bu 2
Common Name: GEN_SSL_CA_COMMON_NAME (default: CasjaysDev CA)
.IP \\(bu 2
Default Domain: GEN_SSL_CA_DEFAULT_DOMAIN (default: localhost)
.RE
.SS Password Management
.RS
.IP \\(bu 2
Randomly generated 32-character password if not specified
.IP \\(bu 2
Stored in ~/.config/gen-ssl/ssl/passwd.txt (mode 600)
.IP \\(bu 2
Used for all CA operations (signing, revocation)
.IP \\(bu 2
Custom password via --password option
.IP \\(bu 2
Password display during setup for manual recording
.RE
.SH CERTIFICATE GENERATION
How gen-ssl generates SSL/TLS certificates:
.SS Single Domain
.RS
.EX
gen-ssl new example.com
.EE
.IP \\(bu 2
Creates RSA private key (default: 2048 bits)
.IP \\(bu 2
Generates CSR (Certificate Signing Request)
.IP \\(bu 2
Signs with CA certificate
.IP \\(bu 2
Outputs: example.com.key, example.com.csr, example.com.crt
.IP \\(bu 2
Validity: GEN_SSL_DEFAULT_DAYS (default: 365 days)
.RE
.SS Multiple Domains (SAN)
.RS
.EX
gen-ssl generate --domains "example.com,www.example.com,api.example.com"
.EE
.IP \\(bu 2
Updates domains.cnf with Subject Alternative Names (SAN)
.IP \\(bu 2
Primary domain: first in list
.IP \\(bu 2
Additional domains as DNS.1, DNS.2, DNS.3, etc.
.IP \\(bu 2
Single certificate valid for all domains
.RE
.SS Wildcard Certificates
.RS
.EX
gen-ssl generate --domains "example.com" --wildcards
.EE
Generates certificate for:
.IP \\(bu 2
example.com
.IP \\(bu 2
*.example.com (first-level wildcard)
.IP \\(bu 2
*.*.example.com (second-level wildcard)
.IP \\(bu 2
Automatic wildcard generation for each domain
.IP \\(bu 2
Controlled by GEN_SSL_CREATE_WILDCARD variable
.RE
.SS Default Domains
.RS
If no domains specified, certificate includes:
.IP \\(bu 2
$HOSTNAME (current system hostname)
.IP \\(bu 2
localhost
.IP \\(bu 2
*.home (home network wildcard)
.IP \\(bu 2
Plus wildcards if --wildcards enabled
.RE
.SH SYSTEM INSTALLATION
How gen-ssl installs certificates to system:
.SS Trust Store Integration
.RS
Automatically installs to system trust stores:
.IP \\(bu 2
Debian/Ubuntu: /usr/local/share/ca-certificates/
.IP \\(bu 2
RHEL/CentOS/Fedora: /etc/pki/ca-trust/source/anchors/
.IP \\(bu 2
Arch/Manjaro: /etc/ca-certificates/trust-source/anchors/
.IP \\(bu 2
Runs update-ca-trust or update-ca-certificates
.IP \\(bu 2
Requires sudo for system installation
.RE
.SS System Directories
.RS
Certificates installed to:
.EX
/etc/ssl/CA/
├── certs/              # All certificates
├── private/            # Private keys
├── p12/                # PKCS#12 files
├── crl/                # Revocation lists
└── requests/           # CSR files

/etc/ssl/dhparam/
├── dh_2048.pem         # 2048-bit DH params
└── dh_4096.pem         # 4096-bit DH params
.EE
.RE
.SS Let's Encrypt Compatibility
.RS
Creates /etc/letsencrypt/live/domain/ symlinks:
.IP \\(bu 2
cert.pem → CA/certs/localhost.crt
.IP \\(bu 2
fullchain.pem → CA/certs/localhost.crt
.IP \\(bu 2
privkey.pem → CA/private/localhost.key
.IP \\(bu 2
Compatible with services expecting Let's Encrypt paths
.IP \\(bu 2
Fallback for missing Let's Encrypt certificates
.RE
.SH EXAMPLES
.TP
.B gen-ssl setup
Create new Certificate Authority
.TP
.B gen-ssl setup --password "MySecurePassword123"
Create CA with custom password
.TP
.B gen-ssl new example.com
Generate certificate for single domain
.TP
.B gen-ssl new api.example.com --install
Generate and install certificate to system
.TP
.B gen-ssl generate --domains "example.com,www.example.com"
Generate multi-domain (SAN) certificate
.TP
.B gen-ssl generate --domains "example.com" --wildcards
Generate certificate with wildcard support
.TP
.B gen-ssl generate --domains "example.com,api.example.com" --wildcards --install
Generate wildcard SAN certificate and install to system
.TP
.B gen-ssl dh
Generate DH parameters in user directory
.TP
.B gen-ssl dh --install
Generate DH parameters and install to /etc/ssl/dhparam/
.TP
.B gen-ssl revoke example.com.crt
Revoke certificate and update CRL
.TP
.B gen-ssl install
Install all certificates to system trust store
.TP
.B gen-ssl info
Display current configuration and settings
.SH FILES
.TP
.B ~/.config/gen-ssl/ssl/
User CA directory
.TP
.B ~/.config/gen-ssl/ssl/certs/ca.crt
CA certificate
.TP
.B ~/.config/gen-ssl/ssl/private/ca.key
CA private key (password-protected)
.TP
.B ~/.config/gen-ssl/ssl/passwd.txt
CA password file (mode 600)
.TP
.B ~/.config/gen-ssl/ssl/ca.cnf
CA configuration file
.TP
.B ~/.config/gen-ssl/ssl/req.cnf
Certificate request configuration
.TP
.B ~/.config/gen-ssl/ssl/domains.cnf
Domain configuration with SAN entries
.TP
.B ~/.config/gen-ssl/ssl/serial.txt
Certificate serial number tracker
.TP
.B ~/.config/gen-ssl/ssl/index.txt
Certificate database
.TP
.B ~/.config/gen-ssl/ssl/dhparam/
DH parameter directory
.TP
.B ~/.config/myscripts/gen-ssl/settings.conf
User configuration file
.TP
.B /etc/ssl/CA/
System-wide certificate installation directory
.TP
.B /etc/ssl/dhparam/
System-wide DH parameter directory
.TP
.B /etc/letsencrypt/live/domain/
Let's Encrypt compatibility symlinks
.SH ENVIRONMENT VARIABLES
.TP
.B GEN_SSL_CA_DIR
CA directory location (default: ~/.config/gen-ssl/ssl)
.TP
.B GEN_SSL_CA_NAME
CA name for certificate trust store (default: CasjaysDev_CA)
.TP
.B GEN_SSL_PASSWD_FILE
Password file location (default: $GEN_SSL_CA_DIR/passwd.txt)
.TP
.B GEN_SSL_DH_DIR
DH parameter directory (default: $GEN_SSL_CA_DIR/dhparam)
.TP
.B GEN_SSL_DH_LENGTH
DH parameter bit lengths (default: "2048 4096")
.TP
.B GEN_SSL_DEFAULT_DAYS
Certificate validity in days (default: 365)
.TP
.B GEN_SSL_DEFAULT_RSA_SIZE
RSA key size in bits (default: 2048)
.TP
.B GEN_SSL_CA_COUNTRY
CA country code (default: US)
.TP
.B GEN_SSL_CA_STATE
CA state/province (default: New York)
.TP
.B GEN_SSL_CA_CITY
CA city/locality (default: New York)
.TP
.B GEN_SSL_CA_COMPANY
CA organization (default: CasjaysDev)
.TP
.B GEN_SSL_CA_UNIT
CA organizational unit (default: IT)
.TP
.B GEN_SSL_CA_COMMON_NAME
CA common name (default: CasjaysDev CA)
.TP
.B GEN_SSL_CA_DEFAULT_DOMAIN
Default domain for certificates (default: localhost)
.TP
.B GEN_SSL_CREATE_WILDCARD
Enable wildcard certificate generation (true/false)
.TP
.B GEN_SSL_SYSTEM_INSTALL
Install to system directories (true/false)
.TP
.B GEN_SSL_SYSTEM_CA_DIR
System CA installation directory (default: /etc/ssl/CA)
.TP
.B GEN_SSL_SYSTEM_DH_DIR
System DH parameter directory (default: /etc/ssl/dhparam)
.TP
.B GEN_SSL_REVOKE_FILE
CRL filename (default: revoke.crl)
.TP
.B GEN_SSL_PASSWD
CA password (if not using file)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/gen-ssl/settings.conf supports the following settings:
.PP
.RS 4
.EX
# CA Settings
GEN_SSL_CA_COUNTRY="US"
GEN_SSL_CA_STATE="New York"
GEN_SSL_CA_CITY="New York"
GEN_SSL_CA_COMPANY="CasjaysDev"
GEN_SSL_CA_UNIT="IT"
GEN_SSL_CA_COMMON_NAME="CasjaysDev CA"
GEN_SSL_CA_DEFAULT_DOMAIN="localhost"

# Certificate Settings
GEN_SSL_DEFAULT_DAYS="365"
GEN_SSL_DEFAULT_RSA_SIZE="2048"
GEN_SSL_CREATE_WILDCARD="false"

# DH Settings
GEN_SSL_DH_LENGTH="2048 4096"

# Installation Settings
GEN_SSL_SYSTEM_INSTALL="false"
GEN_SSL_SYSTEM_CA_DIR="/etc/ssl/CA"
GEN_SSL_SYSTEM_DH_DIR="/etc/ssl/dhparam"

# Directory Settings
GEN_SSL_CA_DIR="$HOME/.config/gen-ssl/ssl"
GEN_SSL_DH_DIR="$GEN_SSL_CA_DIR/dhparam"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - operation completed successfully
.TP
.B 1
Error - CA setup failed, certificate generation failed, or invalid arguments
.SH NOTES
.IP \\(bu 2
CA password is randomly generated (32 characters) if not specified
.IP \\(bu 2
Password stored in ~/.config/gen-ssl/ssl/passwd.txt with mode 600
.IP \\(bu 2
System installation requires sudo privileges
.IP \\(bu 2
Certificates valid for GEN_SSL_DEFAULT_DAYS (default: 365 days)
.IP \\(bu 2
Wildcard certificates support *.domain and *.*.domain
.IP \\(bu 2
Automatic trust store updates for major Linux distributions
.IP \\(bu 2
Let's Encrypt compatibility via /etc/letsencrypt/live/domain/
.IP \\(bu 2
DH parameter generation can be time-consuming (especially 4096-bit)
.IP \\(bu 2
Revoked certificates tracked in CRL (Certificate Revocation List)
.IP \\(bu 2
PKCS#12 (.p12) files for browser import in p12/ directory
.SH TIPS
.SS Development Environment
.RS
.EX
# Setup CA for local development
gen-ssl setup

# Generate certificate for dev environment
gen-ssl generate --domains "localhost,*.localhost,*.test" --wildcards

# Install to system for browser trust
gen-ssl install
.EE
.RE
.SS Multi-Domain Certificates
.RS
.EX
# Generate SAN certificate for multiple services
gen-ssl generate --domains "api.example.com,web.example.com,admin.example.com"

# With wildcard support
gen-ssl generate --domains "example.com,api.example.com" --wildcards --install
.EE
.RE
.SS Browser Trust
.RS
.EX
# Import CA certificate to browser
# Chrome/Firefox: Import ~/.config/gen-ssl/ssl/p12/ca.p12
# Or system-wide trust (requires sudo)
gen-ssl install
.EE
.RE
.SS Certificate Renewal
.RS
.EX
# Revoke old certificate
gen-ssl revoke old-domain.crt

# Generate new certificate
gen-ssl new new-domain.com --install
.EE
.RE
.SH USE CASES
.SS Local Development
.RS
.IP \\(bu 2
HTTPS development servers with trusted certificates
.IP \\(bu 2
Testing SSL/TLS configurations
.IP \\(bu 2
Microservices with HTTPS communication
.IP \\(bu 2
Docker containers with SSL termination
.IP \\(bu 2
Local Kubernetes ingress with TLS
.RE
.SS Internal Network
.RS
.IP \\(bu 2
Internal web services with custom CA
.IP \\(bu 2
Network appliances requiring certificates
.IP \\(bu 2
VPN server certificates
.IP \\(bu 2
LDAP servers with LDAPS
.IP \\(bu 2
Internal API services
.RE
.SS Testing and Validation
.RS
.IP \\(bu 2
Certificate validation testing
.IP \\(bu 2
SSL/TLS protocol testing
.IP \\(bu 2
Certificate chain validation
.IP \\(bu 2
Revocation (CRL) testing
.IP \\(bu 2
Wildcard certificate testing
.RE
.SH TROUBLESHOOTING
.SS CA Already Exists
.RS
.IP \\(bu 2
Error: "A CA has already been setup"
.IP \\(bu 2
Solution: Use existing CA or delete ~/.config/gen-ssl/ssl/
.IP \\(bu 2
Backup existing CA before deletion
.IP \\(bu 2
Check ca.crt and ca.key in certs/ and private/
.RE
.SS Password Issues
.RS
.IP \\(bu 2
Password stored in ~/.config/gen-ssl/ssl/passwd.txt
.IP \\(bu 2
File permissions must be 600 (read/write owner only)
.IP \\(bu 2
Lost password requires CA regeneration
.IP \\(bu 2
Custom password via --password option
.IP \\(bu 2
Password displayed during setup (record securely)
.RE
.SS System Installation Fails
.RS
.IP \\(bu 2
Requires sudo privileges
.IP \\(bu 2
Check sudo access: sudo -l
.IP \\(bu 2
Verify trust store directory exists
.IP \\(bu 2
Run update-ca-trust or update-ca-certificates manually
.IP \\(bu 2
Check /etc/ssl/ write permissions
.RE
.SS Certificate Not Trusted
.RS
.IP \\(bu 2
Install CA certificate to system: gen-ssl install
.IP \\(bu 2
Import CA to browser (p12/ca.p12)
.IP \\(bu 2
Verify trust store update completed
.IP \\(bu 2
Restart browser after CA import
.IP \\(bu 2
Check certificate chain with: openssl verify
.RE
.SH SECURITY CONSIDERATIONS
.SS Password Protection
.RS
.IP \\(bu 2
CA private key is password-protected
.IP \\(bu 2
Password stored encrypted in passwd.txt (mode 600)
.IP \\(bu 2
Use strong custom password with --password
.IP \\(bu 2
Never commit passwd.txt to version control
.IP \\(bu 2
Backup password securely (password manager)
.RE
.SS Certificate Validity
.RS
.IP \\(bu 2
Default validity: 365 days
.IP \\(bu 2
Longer validity for development (configure GEN_SSL_DEFAULT_DAYS)
.IP \\(bu 2
Shorter validity for production-like testing
.IP \\(bu 2
Monitor expiration dates
.IP \\(bu 2
Implement renewal procedures
.RE
.SS Key Sizes
.RS
.IP \\(bu 2
Default RSA: 2048 bits (adequate for most uses)
.IP \\(bu 2
Increase to 4096 bits for higher security
.IP \\(bu 2
Configure via GEN_SSL_DEFAULT_RSA_SIZE
.IP \\(bu 2
DH parameters: 2048 and 4096 bits generated
.IP \\(bu 2
Higher bit counts increase generation time
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \\(bu 2
openssl - OpenSSL toolkit for certificate operations
.IP \\(bu 2
bash - Bash shell for script execution
.RE
.TP
.B Optional:
.RS
.IP \\(bu 2
sudo - System-wide installation
.IP \\(bu 2
update-ca-trust - RHEL/Fedora/Arch trust store update
.IP \\(bu 2
update-ca-certificates - Debian/Ubuntu trust store update
.IP \\(bu 2
certbot - Let's Encrypt integration (future)
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \\(co 2023 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR openssl (1),
.BR openssl-req (1),
.BR openssl-ca (1),
.BR openssl-dhparam (1),
.BR update-ca-trust (8),
.BR update-ca-certificates (8)
.PP
OpenSSL documentation:
.br
https://www.openssl.org/docs/
.PP
Certificate Authority guide:
.br
https://jamielinux.com/docs/openssl-certificate-authority/
