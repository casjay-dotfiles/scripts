.TH HOSTNAMECLI "1" "December 2025" "hostnamecli 202208102023-git" "User Commands"
.SH NAME
hostnamecli \- Cross-platform hostname management and query utility
.SH SYNOPSIS
.B hostnamecli
[\fI\,OPTIONS\fR]
.PP
.B hostnamecli
.BR -f | --full
.PP
.B hostnamecli
.BR -s | --short
.PP
.B hostnamecli
.BR -d | --domain
.PP
.B hostnamecli
.BR -I
[\fI\,4|6\fR]
.PP
.B hostnamecli
.BR -S
\fI\,FULL_HOSTNAME\fR
.SH DESCRIPTION
.B hostnamecli
is a cross-platform hostname management wrapper that provides unified access to system hostname information across different Unix-like systems. It automatically detects and uses the appropriate underlying command (hostname or hostnamectl) based on system availability, caches hostname components for fast repeated access, and provides consistent output formatting across platforms.
.PP
The script simplifies hostname queries by providing automatic detection of hostname vs hostnamectl commands, caching of hostname components (full, short, domain) for performance, symlink creation to replace system hostname command, IPv4 and IPv6 address detection from network interfaces, persistent hostname modification with sudo support, and cross-platform compatibility (Linux, macOS, BSD variants).
.PP
hostnamecli is particularly useful for shell prompt customization requiring fast hostname queries, system administration scripts needing consistent hostname access, network configuration requiring IP address detection, multi-platform deployment scripts, and automated hostname management in provisioning systems.
.SH OPTIONS
.TP
.BR \-f ", " \-\-full
Display full hostname including domain (e.g., host.domain.com)
.TP
.BR \-s ", " \-\-short
Display short hostname without domain (e.g., host)
.TP
.BR \-d ", " \-\-domain
Display domain name only (e.g., domain.com or "local")
.TP
.BR \-I
Display IP address (IPv4 by default)
.TP
.BR \-I " " 4
Display IPv4 address explicitly
.TP
.BR \-I " " 6
Display IPv6 address
.TP
.BR \-S " " \fI\,FULL_HOSTNAME\fR
Save new hostname to system (requires sudo)
.TP
.BR \-r ", " \-\-remove
Remove cached hostname files
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress notifications
.SH HOSTNAME DETECTION
How hostnamecli detects and uses system hostname commands:
.SS Hostname Command (Traditional Unix)
.RS
If
.B hostname
command is available:
.EX
hostname -f    # Full hostname
hostname -s    # Short hostname
hostname -d    # Domain name
.EE
.IP \(bu 2
Uses traditional hostname command
.IP \(bu 2
Works on most Unix-like systems
.IP \(bu 2
Fast and lightweight
.IP \(bu 2
Caches results to ~/.cache/hostnamecli/
.RE
.SS Hostnamectl Command (systemd)
.RS
If only
.B hostnamectl
is available:
.EX
hostnamectl | grep 'hostname:' | awk -F ':' '{print $2}'
.EE
.IP \(bu 2
Uses systemd's hostnamectl
.IP \(bu 2
Common on modern Linux distributions
.IP \(bu 2
Parses output to extract hostname
.IP \(bu 2
Caches results to ~/.cache/hostnamecli/
.RE
.SS Symlink Creation
.RS
On first run, creates symlink if hostname command missing:
.EX
ln -sf "$0" "$HOME/.local/bin/hostname"
.EE
.IP \(bu 2
Provides hostname command replacement
.IP \(bu 2
Installed in ~/.local/bin/
.IP \(bu 2
Ensures PATH compatibility
.IP \(bu 2
Enables drop-in replacement usage
.RE
.SH CACHING MECHANISM
How hostnamecli caches hostname information:
.SS Cache Location
.RS
.EX
~/.cache/hostnamecli/name      # Full hostname
~/.cache/hostnamecli/full      # Full hostname (FQDN)
~/.cache/hostnamecli/short     # Short hostname
~/.cache/hostnamecli/domain    # Domain name
.EE
.RE
.SS Cache Creation
.RS
Caches created on first query:
.IP \(bu 2
Queries system hostname command once
.IP \(bu 2
Stores components in separate files
.IP \(bu 2
Subsequent queries read from cache
.IP \(bu 2
Significantly faster than repeated system calls
.RE
.SS Cache Invalidation
.RS
Remove cache files to force refresh:
.EX
hostnamecli --remove
hostnamecli -r
.EE
.IP \(bu 2
Deletes all cached hostname files
.IP \(bu 2
Next query regenerates cache
.IP \(bu 2
Use after hostname changes
.RE
.SH IP ADDRESS DETECTION
How hostnamecli detects network IP addresses:
.SS Network Interface Detection
.RS
Automatically detects default network interface:
.EX
# Linux
ip route | grep default | sed -e "s/^.*dev.//" -e "s/.proto.*//"

# macOS
route get default | grep interface | awk '{print $2}'
.EE
.RE
.SS IPv4 Address Detection
.RS
.EX
# Using ifconfig
ifconfig $NETDEV | grep inet | grep -v "127.0.0" | awk '{print $2}'

# Using ip command
ip addr | grep inet | grep -vE "127|inet6" | awk '{print $2}'
.EE
.IP \(bu 2
Excludes loopback addresses (127.*)
.IP \(bu 2
Prefers public IP over private
.IP \(bu 2
Fallback to private IP if no public found
.IP \(bu 2
Returns first matching address
.RE
.SS IPv6 Address Detection
.RS
.EX
# Using ifconfig
ifconfig $NETDEV | grep inet6 | grep -i global | awk '{print $2}'

# Using ip command
ip addr | grep inet6 | grep -v "::1/" | awk '{print $2}'
.EE
.IP \(bu 2
Excludes loopback ::1
.IP \(bu 2
Prefers global scope addresses
.IP \(bu 2
Returns first matching address
.RE
.SH HOSTNAME MODIFICATION
How hostnamecli saves new hostname:
.SS Save Operation
.RS
.EX
hostnamecli -S newhost.domain.com
.EE
.IP \(bu 2
Requires sudo privileges
.IP \(bu 2
Updates /etc/hostname
.IP \(bu 2
Updates /etc/hosts if needed
.IP \(bu 2
Clears hostname cache
.IP \(bu 2
Saves new value to cache
.RE
.SS File Updates
.RS
Files modified when saving hostname:
.IP \(bu 2
.B /etc/hostname
\- System hostname file
.IP \(bu 2
.B /etc/hosts
\- Adds entry if missing
.IP \(bu 2
.B ~/.cache/hostnamecli/full
\- Updates cache
.RE
.SH EXAMPLES
.TP
.B hostnamecli
Display default hostname (full hostname)
.TP
.B hostnamecli -f
Display full hostname with domain
.TP
.B hostnamecli --full
Display full hostname with domain (long option)
.TP
.B hostnamecli -s
Display short hostname without domain
.TP
.B hostnamecli --short
Display short hostname (long option)
.TP
.B hostnamecli -d
Display domain name only
.TP
.B hostnamecli --domain
Display domain name (long option)
.TP
.B hostnamecli -I
Display IPv4 address of primary network interface
.TP
.B hostnamecli -I 4
Display IPv4 address explicitly
.TP
.B hostnamecli -I 6
Display IPv6 address
.TP
.B hostnamecli -S server.example.com
Save new hostname to system (requires sudo)
.TP
.B hostnamecli -r
Remove cached hostname files to force refresh
.TP
.B export PS1="\\\\u@$(hostnamecli -s):\\\\w\\\\$ "
Use in shell prompt for fast hostname display
.SH FILES
.TP
.B ~/.cache/hostnamecli/name
Cached full hostname
.TP
.B ~/.cache/hostnamecli/full
Cached full hostname (FQDN)
.TP
.B ~/.cache/hostnamecli/short
Cached short hostname
.TP
.B ~/.cache/hostnamecli/domain
Cached domain name
.TP
.B ~/.config/myscripts/hostnamecli/settings.conf
User configuration file
.TP
.B ~/.local/share/myscripts/hostnamecli/backups/
Configuration backup directory
.TP
.B ~/.local/log/hostnamecli/
Log file directory
.TP
.B ~/.local/tmp/system_scripts/hostnamecli/
Temporary files directory
.TP
.B ~/.local/bin/hostname
Symlink created if hostname command missing
.TP
.B /etc/hostname
System hostname file (modified with -S)
.TP
.B /etc/hosts
System hosts file (updated with -S)
.SH ENVIRONMENT VARIABLES
.TP
.B HOSTNAMECLI_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B HOSTNAMECLI_SILENT
Suppress all notifications when set to "true"
.TP
.B HOSTNAMECLI_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B HOSTNAMECLI_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B HOSTNAMECLI_OUTPUT_COLOR_GOOD
Success message color (default: 2 for green)
.TP
.B HOSTNAMECLI_OUTPUT_COLOR_ERROR
Error message color (default: 1 for red)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/hostnamecli/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Notification settings
HOSTNAMECLI_NOTIFY_ENABLED="yes"

# Output colorization
HOSTNAMECLI_OUTPUT_COLOR_1="33"
HOSTNAMECLI_OUTPUT_COLOR_2="5"
HOSTNAMECLI_OUTPUT_COLOR_GOOD="2"
HOSTNAMECLI_OUTPUT_COLOR_ERROR="1"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - hostname query or modification completed successfully
.TP
.B 1
Error - invalid option or operation failed
.TP
.B 2
Error - sudo required but not available
.TP
.B 3
Error - bash command not found
.SH NOTES
.IP \(bu 2
Caching significantly improves performance for repeated queries
.IP \(bu 2
Cache files stored in ~/.cache/hostnamecli/
.IP \(bu 2
Use --remove to clear cache after hostname changes
.IP \(bu 2
Symlink created in ~/.local/bin/hostname if command missing
.IP \(bu 2
Hostname modification requires sudo privileges
.IP \(bu 2
Domain defaults to "local" if not configured
.IP \(bu 2
IP address detection prefers public over private addresses
.IP \(bu 2
Cross-platform compatible (Linux, macOS, BSD)
.SH TIPS
.SS Shell Prompt Integration
.RS
.EX
# Bash prompt with cached hostname
export PS1="\\\\u@$(hostnamecli -s):\\\\w\\\\$ "

# Zsh prompt
PROMPT="%n@$(hostnamecli -s):%~%# "

# Caching makes this fast even with complex prompts
.EE
.RE
.SS System Administration
.RS
.EX
# Check current hostname configuration
echo "Full: $(hostnamecli -f)"
echo "Short: $(hostnamecli -s)"
echo "Domain: $(hostnamecli -d)"
echo "IPv4: $(hostnamecli -I)"

# Change hostname
sudo hostnamecli -S newserver.domain.com

# Clear cache after manual hostname change
hostnamecli -r
.EE
.RE
.SS Network Configuration
.RS
.EX
# Get primary IPv4 address
IPV4=$(hostnamecli -I 4)
echo "Primary IPv4: $IPV4"

# Get IPv6 address if available
IPV6=$(hostnamecli -I 6)
[ -n "$IPV6" ] && echo "IPv6: $IPV6" || echo "No IPv6 configured"

# Use in firewall rules
iptables -A INPUT -d $(hostnamecli -I) -j ACCEPT
.EE
.RE
.SS Ansible/Automation
.RS
.EX
# Get short hostname for inventory
SHORT_NAME=$(hostnamecli -s)

# Get FQDN for SSL certificates
FQDN=$(hostnamecli -f)

# Detect if hostname properly configured
DOMAIN=$(hostnamecli -d)
[ "$DOMAIN" != "local" ] || echo "Warning: No domain configured"
.EE
.RE
.SH USE CASES
.SS Shell Customization
.RS
.IP \(bu 2
Fast hostname display in shell prompts (cached results)
.IP \(bu 2
Terminal title bars with hostname information
.IP \(bu 2
Status line integration for tmux/screen
.IP \(bu 2
SSH banner customization
.RE
.SS System Administration
.RS
.IP \(bu 2
Automated hostname configuration in provisioning scripts
.IP \(bu 2
Consistent hostname queries across different Linux distributions
.IP \(bu 2
Hostname verification in deployment scripts
.IP \(bu 2
Network configuration requiring host information
.RE
.SS Multi-Platform Scripts
.RS
.IP \(bu 2
Scripts that run on Linux, macOS, and BSD variants
.IP \(bu 2
Container environments with varying hostname commands
.IP \(bu 2
CI/CD pipelines requiring hostname information
.IP \(bu 2
Cross-platform configuration management
.RE
.SH TROUBLESHOOTING
.SS Stale Cache
.RS
If hostname appears incorrect after system changes:
.EX
hostnamecli -r
hostnamecli -f
.EE
.IP \(bu 2
Remove cache files with -r option
.IP \(bu 2
Next query regenerates from system
.IP \(bu 2
Cache automatically created on next access
.RE
.SS No Domain Name
.RS
If domain shows as "local":
.IP \(bu 2
System hostname lacks domain component
.IP \(bu 2
Check /etc/hostname for FQDN format
.IP \(bu 2
Use -S option to set proper FQDN
.IP \(bu 2
Example: hostnamecli -S host.domain.com
.RE
.SS Permission Errors
.RS
When saving hostname (-S option):
.IP \(bu 2
Requires sudo privileges
.IP \(bu 2
Check sudo access: sudo -v
.IP \(bu 2
Verify /etc/hostname is writable
.IP \(bu 2
Check /etc/hosts permissions
.RE
.SS IP Address Detection
.RS
If IP address is 127.0.0.1:
.IP \(bu 2
Check network interface is up
.IP \(bu 2
Verify default route: ip route show default
.IP \(bu 2
Check interface has IP: ip addr show
.IP \(bu 2
May indicate network configuration issue
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
grep - Pattern matching
.IP \(bu 2
awk - Text processing
.IP \(bu 2
sed - Stream editor
.RE
.TP
.B System Commands (one of):
.RS
.IP \(bu 2
hostname - Traditional Unix hostname command
.IP \(bu 2
hostnamectl - systemd hostname control
.RE
.TP
.B Network Commands (for IP detection):
.RS
.IP \(bu 2
ip or ifconfig - Network interface configuration
.IP \(bu 2
route (macOS) - Routing table
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR hostname (1),
.BR hostnamectl (1),
.BR ifconfig (8),
.BR ip (8)
