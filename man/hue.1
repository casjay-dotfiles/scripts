.TH HUE "1" "December 2025" "hue 202208102042-git" "User Commands"
.SH NAME
hue \- Command-line controller for Philips Hue smart lights
.SH SYNOPSIS
.B hue
[\fI\,COMMAND\fR] [\fI\,VALUE\fR] [\fI\,OPTIONS\fR]
.SH DESCRIPTION
.B hue
is a command-line interface for controlling Philips Hue smart lights via the Hue Bridge HTTP API. It provides simple commands to turn lights on/off, adjust brightness, saturation, color hue, and effects through curl-based REST API calls with state tracking and persistent configuration.
.PP
The script simplifies smart light control by providing RESTful API communication with Hue Bridge, state persistence for toggle functionality, brightness control (0-255 range), color hue and saturation adjustment, lighting effects management, group-based light control, and JSON status output for scripting.
.PP
hue is particularly useful for home automation scripts, voice command integration, keyboard shortcut bindings, scheduled lighting control, ambient lighting automation, and smart home integration with other services.
.SH COMMANDS
.TP
.BR on " | " true " | " 0 " | " stop
Turn lights on and save state
.TP
.BR off " | " false " | " 1 " | " play
Turn lights off and save state
.TP
.BR toggle
Toggle lights between on and off based on saved state
.TP
.BR state " [" text | json ]
Display current light state (text or JSON format)
.TP
.BR brightness " | " bright " | " b " " \fI\,VALUE\fR
Set brightness level (0-255) - turns lights on first
.TP
.BR sat " | " s " " \fI\,VALUE\fR
Set saturation level (0-255) - turns lights on first
.TP
.BR hue " | " h " " \fI\,VALUE\fR
Set color hue value - turns lights on first
.TP
.BR effect " | " e " " \fI\,EFFECT\fR
Set lighting effect
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress notifications
.TP
.BR \-\-dir " " \fI\,DIRECTORY\fR
Set working directory
.SH CONFIGURATION
How hue communicates with Philips Hue Bridge:
.SS Required Environment Variables
.RS
.EX
# Hue Bridge API key (obtain from bridge pairing)
export HUE_HUB_API_KEY="your-api-key-here"

# Hue Bridge hostname or IP address
export HUE_DEFAULT_DEVICE="192.168.1.100"
# or
export HUE_DEFAULT_DEVICE="philips-hue.local"
.EE
.IP \(bu 2
HUE_HUB_API_KEY: API key from Hue Bridge (required)
.IP \(bu 2
HUE_DEFAULT_DEVICE: Bridge hostname or IP (required)
.RE
.SS Optional Environment Variables
.RS
.EX
# Default light group (default: uses first group)
export HUE_DEFAULT_GROUP="1"

# Device name for display in messages
export HUE_DEFAULT_DEVICE_NAME="Living Room"
.EE
.RE
.SS API Endpoint Construction
.RS
Full API URL constructed as:
.EX
http://$HUE_DEFAULT_DEVICE/api/$HUE_HUB_API_KEY/groups/$HUE_DEFAULT_GROUP
.EE
.IP \(bu 2
Uses HTTP (not HTTPS) per Hue Bridge API spec
.IP \(bu 2
Groups endpoint for controlling multiple lights
.IP \(bu 2
Default group used if not specified
.RE
.SH STATE MANAGEMENT
How hue tracks light state:
.SS State File
.RS
.EX
~/.cache/hue/state
.EE
.IP \(bu 2
Stores current state: "on" or "off"
.IP \(bu 2
Used by toggle command to determine action
.IP \(bu 2
Updated on successful on/off commands
.IP \(bu 2
Persists across script invocations
.RE
.SS State Query
.RS
Check current state:
.EX
# Text format
hue state text

# JSON format (default)
hue state json
# Output: {"status":"on"}
.EE
.RE
.SH LIGHTING CONTROL
How hue controls light properties:
.SS Power Control
.RS
.EX
# Turn on
hue on

# Turn off
hue off

# Toggle current state
hue toggle
.EE
.IP \(bu 2
on/true/0/stop: Turn lights on
.IP \(bu 2
off/false/1/play: Turn lights off
.IP \(bu 2
toggle: Switch between on and off
.RE
.SS Brightness
.RS
.EX
# Set brightness to 128 (50%)
hue brightness 128
hue bright 128
hue b 128

# Full brightness
hue b 255

# Dim (10%)
hue b 25
.EE
.IP \(bu 2
Range: 0-255
.IP \(bu 2
Automatically turns lights on first
.IP \(bu 2
Higher values = brighter
.RE
.SS Saturation
.RS
.EX
# Set saturation to 200
hue sat 200
hue s 200

# Full saturation (vivid colors)
hue s 255

# Desaturated (closer to white)
hue s 50
.EE
.IP \(bu 2
Range: 0-255
.IP \(bu 2
Automatically turns lights on first
.IP \(bu 2
Higher values = more saturated colors
.RE
.SS Color Hue
.RS
.EX
# Set color hue
hue hue 25500
hue h 25500

# Red
hue h 0

# Green
hue h 25500

# Blue
hue h 46920
.EE
.IP \(bu 2
Range: 0-65535
.IP \(bu 2
Automatically turns lights on first
.IP \(bu 2
Represents color wheel position
.RE
.SH EXAMPLES
.TP
.B hue on
Turn lights on
.TP
.B hue off
Turn lights off
.TP
.B hue toggle
Toggle lights between on and off
.TP
.B hue brightness 128
Set brightness to 50% (128 out of 255)
.TP
.B hue b 255
Set brightness to maximum
.TP
.B hue sat 200
Set saturation to 200 (vivid colors)
.TP
.B hue hue 25500
Set color to green
.TP
.B hue state json
Get current state as JSON
.TP
.B export HUE_HUB_API_KEY="abc123..." && hue on
Set API key and turn lights on
.SH FILES
.TP
.B ~/.cache/hue/state
Persistent state file (on/off status)
.TP
.B ~/.config/myscripts/hue/settings.conf
User configuration file
.TP
.B ~/.local/share/myscripts/hue/backups/
Configuration backup directory
.TP
.B ~/.local/log/hue/
Log file directory
.TP
.B ~/.local/tmp/system_scripts/hue/
Temporary files directory
.SH ENVIRONMENT VARIABLES
.TP
.B HUE_HUB_API_KEY
Hue Bridge API key (required - no default)
.TP
.B HUE_DEFAULT_DEVICE
Hue Bridge hostname or IP address (required - no default)
.TP
.B HUE_DEFAULT_GROUP
Light group ID (default: uses available group)
.TP
.B HUE_DEFAULT_DEVICE_NAME
Display name for Hue Bridge
.TP
.B HUE_STATE_FILE
Override state file location (default: ~/.cache/hue/state)
.TP
.B HUE_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B HUE_SILENT
Suppress all notifications when set to "true"
.TP
.B HUE_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B HUE_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B HUE_OUTPUT_COLOR_GOOD
Success message color (default: 2 for green)
.TP
.B HUE_OUTPUT_COLOR_ERROR
Error message color (default: 1 for red)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/hue/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Hue Bridge configuration
HUE_HUB_API_KEY="your-api-key"
HUE_DEFAULT_DEVICE="192.168.1.100"
HUE_DEFAULT_GROUP="1"
HUE_DEFAULT_DEVICE_NAME="Living Room"

# Notification settings
HUE_NOTIFY_ENABLED="yes"

# Output colorization
HUE_OUTPUT_COLOR_1="33"
HUE_OUTPUT_COLOR_2="5"
HUE_OUTPUT_COLOR_GOOD="2"
HUE_OUTPUT_COLOR_ERROR="1"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - command executed successfully
.TP
.B 1
Error - command failed or API error
.TP
.B 3
Error - bash command not found
.SH NOTES
.IP \(bu 2
Requires Hue Bridge on local network
.IP \(bu 2
API key must be obtained by pairing with bridge
.IP \(bu 2
State file enables toggle functionality
.IP \(bu 2
Brightness and color commands turn lights on automatically
.IP \(bu 2
Uses HTTP (not HTTPS) per Hue Bridge API specification
.IP \(bu 2
Group-based control affects multiple lights simultaneously
.IP \(bu 2
3-second connection timeout for API calls
.SH TIPS
.SS Getting API Key
.RS
.EX
# Press link button on Hue Bridge
# Within 30 seconds, run:
curl -X POST http://BRIDGE-IP/api \\
  -d '{"devicetype":"hue#command-line"}'

# Response includes API key (username)
# Export to environment:
export HUE_HUB_API_KEY="generated-key-here"
.EE
.RE
.SS Keyboard Shortcuts
.RS
.EX
# Bind to keyboard shortcuts in i3/sway config
bindsym XF86Launch1 exec hue toggle
bindsym XF86Launch2 exec hue b 255
bindsym XF86Launch3 exec hue b 25
.EE
.RE
.SS Scheduled Automation
.RS
.EX
# Cron job for sunrise simulation
0 6 * * * hue b 25 && sleep 600 && hue b 128 && sleep 600 && hue b 255

# Evening dimming
0 21 * * * hue b 128 && sleep 3600 && hue b 25 && sleep 1800 && hue off
.EE
.RE
.SS Voice Control Integration
.RS
.EX
# Voice command script
case "$voice_command" in
  "lights on") hue on ;;
  "lights off") hue off ;;
  "bright lights") hue b 255 ;;
  "dim lights") hue b 50 ;;
esac
.EE
.RE
.SH USE CASES
.SS Home Automation
.RS
.IP \(bu 2
Keyboard shortcut control of lights
.IP \(bu 2
Scheduled lighting scenes (wake up, sleep, etc.)
.IP \(bu 2
Motion sensor triggered lighting
.IP \(bu 2
Integration with other smart home systems
.IP \(bu 2
Ambient lighting for media playback
.RE
.SS Productivity
.RS
.IP \(bu 2
Focus mode lighting (pomodoro timer integration)
.IP \(bu 2
Notification indicators via color changes
.IP \(bu 2
Meeting room availability indicators
.IP \(bu 2
Build status indicators (green=pass, red=fail)
.RE
.SS Scripting
.RS
.IP \(bu 2
JSON status output for monitoring scripts
.IP \(bu 2
Integration with shell scripts
.IP \(bu 2
API-based automation workflows
.IP \(bu 2
Event-triggered lighting changes
.RE
.SH TROUBLESHOOTING
.SS API Key Not Set
.RS
If error: "Please set your hue api key"
.IP \(bu 2
Export HUE_HUB_API_KEY environment variable
.IP \(bu 2
Or add to configuration file
.IP \(bu 2
Obtain key by pairing with bridge
.RE
.SS Device Not Set
.RS
If error: "Please enter the hostname or ip address of your hue hub"
.IP \(bu 2
Export HUE_DEFAULT_DEVICE environment variable
.IP \(bu 2
Use bridge IP address or hostname
.IP \(bu 2
Verify bridge is on network: ping BRIDGE-IP
.RE
.SS Connection Timeout
.RS
If commands fail or timeout:
.IP \(bu 2
Check bridge is powered on and connected
.IP \(bu 2
Verify IP address is correct
.IP \(bu 2
Check network connectivity
.IP \(bu 2
Ensure firewall allows HTTP to bridge
.RE
.SS Invalid Brightness/Saturation
.RS
If error: "Enter a number between 0 and 255"
.IP \(bu 2
Brightness range: 0-255
.IP \(bu 2
Saturation range: 0-255
.IP \(bu 2
Hue range: 0-65535
.IP \(bu 2
Use integer values only
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
curl - HTTP client for API communication
.IP \(bu 2
grep - Pattern matching for API response validation
.RE
.TP
.B Hardware:
.RS
.IP \(bu 2
Philips Hue Bridge (v2 recommended)
.IP \(bu 2
Philips Hue lights
.IP \(bu 2
Local network connectivity
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR curl (1)
.PP
Philips Hue API Documentation:
.br
https://developers.meethue.com/
.PP
Resource:
.br
http://hkionline.net/posts/using-phillips-hue-from-the-command-line
