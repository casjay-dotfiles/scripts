.TH IFINSTALLED "1" "December 2025" "ifinstalled 202208102049-git" "User Commands"
.SH NAME
ifinstalled \- Check if commands exist and notify when missing
.SH SYNOPSIS
.B ifinstalled
.I COMMAND
[\fI\,COMMAND\fR...] [\fI\,OPTIONS\fR]
.SH DESCRIPTION
.B ifinstalled
is a command existence checker that validates whether specified commands are installed on the system and sends desktop notifications for missing commands. It provides a simple wrapper around command existence checking with user-friendly notifications and automatic error handling for missing dependencies.
.PP
The script simplifies dependency checking by providing command existence validation (builtin command -v check), desktop notification integration for missing commands, multiple command validation in single invocation, exit code tracking (increments per missing command), and standardized error reporting.
.PP
ifinstalled is particularly useful for pre-execution dependency validation in scripts, interactive installation prompts for missing tools, system configuration verification, build script prerequisite checking, and automated environment validation.
.SH USAGE
.B ifinstalled docker git
.PP
Check if docker and git are installed.
.PP
.B ifinstalled curl jq
.PP
Validate curl and jq availability, notify if missing.
.PP
.B ifinstalled python3 pip3 virtualenv
.PP
Check multiple Python tools, notify for each missing command.
.SH OPTIONS
.TP
.BR \-\-help
Display help message with usage information
.TP
.BR \-\-config
Generate or regenerate user configuration file
.TP
.BR \-\-version
Show script version information and exit
.TP
.BR \-\-options
Display all available command-line options
.TP
.BR \-\-debug
Enable debug mode with verbose output
.TP
.BR \-\-raw
Disable colorized output for plain text display
.TP
.BR \-\-silent
Suppress desktop notifications
.TP
.BR \-\-dir " " \fI\,DIRECTORY\fR
Set working directory
.SH ARGUMENTS
.TP
.B COMMAND
Command name to check for existence (one or more required)
.PP
Multiple commands can be specified:
.EX
ifinstalled cmd1 cmd2 cmd3
.EE
.SH COMMAND VALIDATION
How ifinstalled checks if commands exist:
.SS Existence Check
.RS
Uses builtin command -v for validation:
.EX
if ! __cmd_exists "$cmd"; then
  missing+=("$cmd")
  exit=$(($exitCodef + 1))
  exitCodef="$exit"
fi
.EE
.IP \(bu 2
.B __cmd_exists()
function wraps builtin command -v
.IP \(bu 2
Checks each command in PATH
.IP \(bu 2
Collects missing commands in array
.IP \(bu 2
Increments exit code for each missing command
.RE
.SS Command Lookup
.RS
.EX
__cmd_exists() {
  local exitCode=0
  [ -n "$1" ] || return 0
  for cmd in "$@"; do
    if builtin command -v "$cmd" &>/dev/null; then
      exitCode=$((exitCode + 0))
    else
      exitCode=$((exitCode + 1))
    fi
  done
  [ $exitCode -eq 0 ] || exitCode=3
  return ${exitCode:-0}
}
.EE
.IP \(bu 2
Uses builtin command for reliability
.IP \(bu 2
Avoids external command dependencies
.IP \(bu 2
Checks multiple commands efficiently
.IP \(bu 2
Returns cumulative exit code
.RE
.SH NOTIFICATION SYSTEM
How ifinstalled notifies about missing commands:
.SS Desktop Notifications
.RS
.EX
__notifications "ðŸ“¦ $1" "must be installed for this function."
.EE
.IP \(bu 2
Displays package emoji (ðŸ“¦) with command name
.IP \(bu 2
Shows installation requirement message
.IP \(bu 2
Uses desktop notification system (notify-send)
.IP \(bu 2
Can be disabled with --silent option
.RE
.SS Notification Configuration
.RS
Environment variables control notification behavior:
.IP \(bu 2
.B IFINSTALLED_NOTIFY_ENABLED
\- Enable/disable notifications (default: yes)
.IP \(bu 2
.B SEND_NOTIFICATION
\- Runtime notification control (no to disable)
.IP \(bu 2
.B IFINSTALLED_NOTIFY_CLIENT_NAME
\- Application name in notification
.IP \(bu 2
.B IFINSTALLED_NOTIFY_CLIENT_ICON
\- Icon displayed in notification
.IP \(bu 2
.B IFINSTALLED_NOTIFY_CLIENT_URGENCY
\- Notification urgency level (normal/critical)
.RE
.SS Notification Function
.RS
.EX
__notifications() {
  __cmd_exists notifications || return
  [ "$IFINSTALLED_NOTIFY_ENABLED" = "yes" ] || return
  [ "$SEND_NOTIFICATION" = "no" ] && return
  (
    export NOTIFY_CLIENT_NAME="${NOTIFY_CLIENT_NAME:-$IFINSTALLED_NOTIFY_CLIENT_NAME}"
    notifications "$@"
  ) |& __devnull &
}
.EE
.IP \(bu 2
Checks for notifications command availability
.IP \(bu 2
Respects notification enable flag
.IP \(bu 2
Runs in background subprocess
.IP \(bu 2
Exports configuration to notifications command
.RE
.SH EXIT CODES
How ifinstalled reports results:
.SS Exit Code Calculation
.RS
.EX
for cmd in "$@"; do
  if ! __cmd_exists "$cmd"; then
    missing+=("$cmd")
    exit=$(($exitCodef + 1))
    exitCodef="$exit"
  fi
done
exitCode="$exitCodef"
exit $exitCode
.EE
.IP \(bu 2
.B 0
\- All commands found (success)
.IP \(bu 2
.B 1
\- One command missing
.IP \(bu 2
.B 2
\- Two commands missing
.IP \(bu 2
.B N
\- N commands missing
.RE
.SS Script Integration
.RS
Use exit code to determine action:
.EX
if ifinstalled docker git; then
  echo "All dependencies available"
else
  echo "Missing dependencies detected"
  exit 1
fi
.EE
.RE
.SH EXAMPLES
.TP
.B ifinstalled docker
Check if docker is installed, notify if missing
.TP
.B ifinstalled git curl jq
Validate multiple commands, notify for each missing
.TP
.B ifinstalled python3 pip3 virtualenv
Check Python toolchain availability
.TP
.B ifinstalled node npm yarn
Validate Node.js development environment
.TP
.B if ifinstalled docker; then docker ps; fi
Run command only if dependency exists
.TP
.B ifinstalled make gcc g++ || exit 1
Exit script if build tools missing
.TP
.B ifinstalled --silent kubectl helm
Check without desktop notifications
.TP
.B ifinstalled ansible terraform packer
Validate infrastructure tools
.SH FILES
.TP
.B ~/.config/myscripts/ifinstalled/settings.conf
User configuration file
.TP
.B ~/.local/share/myscripts/ifinstalled/backups/
Configuration backup directory
.TP
.B ~/.local/log/ifinstalled/
Log file directory
.TP
.B ~/.local/tmp/system_scripts/ifinstalled/
Temporary files directory
.TP
.B ~/.cache/ifinstalled/
Cache directory
.SH ENVIRONMENT VARIABLES
.TP
.B IFINSTALLED_NOTIFY_ENABLED
Enable/disable desktop notifications (default: yes)
.TP
.B IFINSTALLED_SILENT
Suppress all notifications when set to "true"
.TP
.B SEND_NOTIFICATION
Runtime notification control (set to "no" to disable)
.TP
.B IFINSTALLED_NOTIFY_CLIENT_NAME
Application name for notifications (default: ifinstalled)
.TP
.B IFINSTALLED_NOTIFY_CLIENT_ICON
Icon for notifications (default: notification-new)
.TP
.B IFINSTALLED_NOTIFY_CLIENT_URGENCY
Notification urgency level (normal/critical, default: normal)
.TP
.B IFINSTALLED_GOOD_NAME
Success notification title (default: Great:)
.TP
.B IFINSTALLED_ERROR_NAME
Error notification title (default: Error:)
.TP
.B IFINSTALLED_GOOD_MESSAGE
Success message text (default: No errors reported)
.TP
.B IFINSTALLED_ERROR_MESSAGE
Error message text (default: Errors were reported)
.TP
.B IFINSTALLED_OUTPUT_COLOR_1
Primary output color code (default: 33 for yellow)
.TP
.B IFINSTALLED_OUTPUT_COLOR_2
Secondary output color code (default: 5 for magenta)
.TP
.B IFINSTALLED_OUTPUT_COLOR_GOOD
Success message color (default: 2 for green)
.TP
.B IFINSTALLED_OUTPUT_COLOR_ERROR
Error message color (default: 1 for red)
.SH CONFIGURATION FILE
The configuration file located at ~/.config/myscripts/ifinstalled/settings.conf supports the following settings:
.PP
.RS 4
.EX
# Notification settings
IFINSTALLED_NOTIFY_ENABLED="yes"
IFINSTALLED_GOOD_NAME="Great:"
IFINSTALLED_ERROR_NAME="Error:"
IFINSTALLED_GOOD_MESSAGE="No errors reported"
IFINSTALLED_ERROR_MESSAGE="Errors were reported"
IFINSTALLED_NOTIFY_CLIENT_NAME="ifinstalled"
IFINSTALLED_NOTIFY_CLIENT_ICON="notification-new"
IFINSTALLED_NOTIFY_CLIENT_URGENCY="normal"

# Output colorization
IFINSTALLED_OUTPUT_COLOR_1="33"
IFINSTALLED_OUTPUT_COLOR_2="5"
IFINSTALLED_OUTPUT_COLOR_GOOD="2"
IFINSTALLED_OUTPUT_COLOR_ERROR="1"
.EE
.RE
.SH EXIT STATUS
.TP
.B 0
Success - all specified commands found
.TP
.B 1-N
Number of missing commands (N = count of missing)
.TP
.B 3
Error - command validation failed
.SH NOTES
.IP \(bu 2
Exit code increments for each missing command
.IP \(bu 2
Desktop notifications via notifications command
.IP \(bu 2
Uses builtin command -v for reliable checking
.IP \(bu 2
Notifications can be disabled with --silent
.IP \(bu 2
Multiple commands validated in single invocation
.IP \(bu 2
Missing commands collected in array
.IP \(bu 2
Notification runs in background subprocess
.IP \(bu 2
Requires notifications command for desktop notifications
.SH TIPS
.SS Script Integration
.RS
.EX
#!/usr/bin/env bash
# Validate dependencies before main logic
if ! ifinstalled docker git make; then
  echo "Missing required dependencies"
  exit 1
fi

# Continue with main script
docker build -t myapp .
.EE
.RE
.SS Build Script Validation
.RS
.EX
# Check build tools
ifinstalled gcc g++ make cmake || {
  echo "Build tools missing"
  exit 1
}

# Proceed with build
make clean && make
.EE
.RE
.SS Silent Checking
.RS
.EX
# Check without notifications
if ifinstalled --silent kubectl; then
  kubectl get pods
else
  echo "kubectl not installed"
fi
.EE
.RE
.SS Multiple Environments
.RS
.EX
# Python environment
ifinstalled python3 pip3 virtualenv || exit 1

# Node.js environment
ifinstalled node npm yarn || exit 1

# Ruby environment
ifinstalled ruby gem bundler || exit 1
.EE
.RE
.SH USE CASES
.SS Dependency Validation
.RS
.IP \(bu 2
Pre-execution checks in shell scripts
.IP \(bu 2
Build system prerequisite validation
.IP \(bu 2
Development environment verification
.IP \(bu 2
CI/CD pipeline dependency checking
.IP \(bu 2
Installation script validation
.RE
.SS Interactive Prompts
.RS
.IP \(bu 2
Notify user of missing tools
.IP \(bu 2
Desktop notifications for installations
.IP \(bu 2
User-friendly error messaging
.IP \(bu 2
Guided installation workflows
.RE
.SS System Configuration
.RS
.IP \(bu 2
Verify tool availability before use
.IP \(bu 2
Environment setup validation
.IP \(bu 2
Configuration management checks
.IP \(bu 2
System state verification
.RE
.SH TROUBLESHOOTING
.SS No Notification Displayed
.RS
.IP \(bu 2
Check notifications command is installed
.IP \(bu 2
Verify IFINSTALLED_NOTIFY_ENABLED="yes"
.IP \(bu 2
Ensure SEND_NOTIFICATION is not "no"
.IP \(bu 2
Check desktop notification daemon is running
.IP \(bu 2
Use --debug to see notification attempts
.RE
.SS False Negatives
.RS
If command exists but not detected:
.IP \(bu 2
Check command is in PATH
.IP \(bu 2
Verify command name spelling
.IP \(bu 2
Test with: command -v COMMAND
.IP \(bu 2
Check shell aliases vs actual commands
.IP \(bu 2
Ensure command is executable
.RE
.SS Exit Code Issues
.RS
.IP \(bu 2
Exit code equals number of missing commands
.IP \(bu 2
Check with: echo $? after running
.IP \(bu 2
Use if statement for success/failure
.IP \(bu 2
Multiple missing = higher exit code
.RE
.SH INTEGRATION
.SS With Package Managers
.RS
.EX
# Check and install if missing
if ! ifinstalled --silent docker; then
  pkmgr install docker
fi
.EE
.RE
.SS With Build Systems
.RS
.EX
# Makefile integration
prereqs:
	@ifinstalled gcc g++ make || { echo "Build tools missing"; exit 1; }

build: prereqs
	gcc -o myapp main.c
.EE
.RE
.SS With CI/CD
.RS
.EX
# GitLab CI
before_script:
  - ifinstalled docker git curl || exit 1

# GitHub Actions
- name: Validate Dependencies
  run: ifinstalled node npm yarn
.EE
.RE
.SH DEPENDENCIES
.TP
.B Required:
.RS
.IP \(bu 2
bash - Bash shell for script execution
.IP \(bu 2
builtin command - Command existence checking
.RE
.TP
.B Optional:
.RS
.IP \(bu 2
notifications - Desktop notification system
.IP \(bu 2
notify-send - Alternative notification command
.RE
.SH BUGS
Report bugs at: https://github.com/casjay-dotfiles/scripts/issues
.SH AUTHOR
Written by Jason Hempstead (CasjaysDev)
.SH COPYRIGHT
Copyright \(co 2022 Jason Hempstead, Casjays Developments
.br
License: WTFPL (Do What The F*** You Want To Public License)
.SH SEE ALSO
.BR command (1),
.BR which (1),
.BR whereis (1),
.BR type (1)
