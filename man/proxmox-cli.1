.\" Manpage for proxmox-cli
.TH man 1 "11 September 2025" "202208150046-git" "proxmox-cli"

.SH NAME
proxmox-cli \- Proxmox VE API client for virtual machine management

.SH DESCRIPTION
A comprehensive command-line interface for managing Proxmox Virtual Environment clusters. Supports VM and container lifecycle management, ISO handling, console access, and multi-version compatibility across Proxmox VE 5-9.

.SH SYNOPSIS
proxmox-cli [options] [command] [arguments...]

.SH COMMANDS
.TP
.B check
Check server connectivity, API availability, and authentication
.TP
.B server
Same as check - comprehensive server health check

.SS Node Management
.TP
.B nodes
List all cluster nodes with resource usage and status

.SS ISO Management
.TP
.B iso list
List all available ISO files in storage
.TP
.B iso download <url> [storage]
Download ISO from URL to Proxmox storage
.TP
.B iso delete <volid>
Delete ISO file from storage
.TP
.B iso info <volid>
Show detailed information about an ISO file

.SS LXC Container Management
.TP
.B lxc list [node]
List all LXC containers on specified node
.TP
.B lxc templates
List available LXC container templates
.TP
.B lxc create <id> <template> [hostname] [storage]
Create new LXC container from template
.TP
.B lxc delete <id>
Delete LXC container
.TP
.B lxc start <id>
Start LXC container
.TP
.B lxc stop <id>
Stop LXC container
.TP
.B lxc status <id>
Show detailed LXC container status
.TP
.B lxc console <id>
Access LXC container console

.SS Virtual Machine Management
.TP
.B vm list [node]
List all virtual machines on specified node
.TP
.B vm create <id> <iso> [name] [storage]
Create new VM with ISO mounted
.TP
.B vm delete <id>
Delete virtual machine
.TP
.B vm start <id>
Start virtual machine
.TP
.B vm stop <id>
Stop virtual machine
.TP
.B vm status <id>
Show detailed VM status and resource usage
.TP
.B vm console <id>
Access VM console (SPICE/VNC)
.TP
.B vm clone <source_id> <new_id> [name]
Clone virtual machine
.TP
.B vm snapshot <id> [name] [description]
Create VM snapshot

.SS Legacy Commands
.TP
.B config [id]
Get configuration information for VM/container
.TP
.B status [id]
Get status information for VM/container
.TP
.B power [on/off] [id]
Power on or off a VM/container
.TP
.B agent <id> <command>
Execute command via qemu-guest-agent
.TP
.B ssh [server]
Connect via SSH to VM or Proxmox server
.TP
.B web
Open Proxmox web interface in browser
.TP
.B reset
Reset script configuration and force reconfiguration

.SH OPTIONS
.TP
.B \-u, \-\-user <username>
Specify username (default: root@pam)
.TP
.B \-p, \-\-password <password>
Specify password
.TP
.B \-m, \-\-machine <vmid>
Specify VM/container ID
.TP
.B \-\-node <node>
Connect to specific node (auto-creates/loads config)
.TP
.B \-\-ssh
Connect to Proxmox server via SSH
.TP
.B \-\-force
Force configuration reset
.TP
.B \-\-dir <path>
Set working directory
.TP
.B \-\-silent
Suppress non-error output
.TP
.B \-\-help
Display help message
.TP
.B \-\-version
Display current version
.TP
.B \-\-config
Generate configuration file
.TP
.B \-\-options
Show all available options
.TP
.B \-\-debug
Enable debugging output
.TP
.B \-\-raw
Remove all formatting from output

.SH EXAMPLES
.TP
.B proxmox-cli check
Check server connectivity and authentication
.TP
.B proxmox-cli nodes
List all cluster nodes
.TP
.B proxmox-cli iso list
List available ISO files
.TP
.B proxmox-cli iso download https://releases.ubuntu.com/22.04/ubuntu-22.04.3-live-server-amd64.iso
Download Ubuntu Server ISO
.TP
.B proxmox-cli lxc templates
List available LXC templates
.TP
.B proxmox-cli lxc create 200 local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst
Create Ubuntu LXC container
.TP
.B proxmox-cli vm create 300 local:iso/ubuntu-22.04.3-live-server-amd64.iso
Create VM with Ubuntu ISO
.TP
.B proxmox-cli vm clone 100 101 "cloned-vm"
Clone VM 100 to new VM 101
.TP
.B proxmox-cli \-\-node pve2 vm list
List VMs on specific node with auto-config
.TP
.B proxmox-cli lxc console 200
Access console for LXC container 200
.TP
.B proxmox-cli vm snapshot 100 "before-update"
Create snapshot before updating VM

.SH CONFIGURATION
.TP
.I ~/.config/myscripts/proxmox-cli/settings.conf
Global configuration file
.TP
.I ~/.config/myscripts/proxmox-cli/<node>
Node-specific configuration files (auto-created by --node option)

.SH NODE CONFIGURATION FORMAT
Each node config file contains:
.br
PROXMOX_CLI_DEFAULT_USERNAME="root@pam"
.br
PROXMOX_CLI_DEFAULT_PASSWORD="your-password"
.br
PROXMOX_CLI_DEFAULT_NODE_ID="node-name"
.br
PROXMOX_CLI_DEFAULT_SERVER_HOST="server.domain.com"
.br
PROXMOX_CLI_DEFAULT_SERVER_PORT="443"

.SH PROXMOX VERSION COMPATIBILITY
Supports Proxmox VE versions 5.x through 9.x with automatic version detection and version-specific API handling:
.TP
.B Proxmox 5.x
Legacy SPICE console endpoints
.TP
.B Proxmox 6.x
Enhanced SPICE with API token support
.TP
.B Proxmox 7.x
noVNC preferred with WebSocket support
.TP
.B Proxmox 8.x
Modern console access with multiple protocols
.TP
.B Proxmox 9.x
Latest console protocols with enhanced parameters

.SH AUTHENTICATION
Uses ticket-based authentication with automatic password encoding for security. Passwords are base64 encoded when stored in configuration files and automatically decoded during use.

.SH TASK MONITORING
Long-running operations (VM creation, deletion, cloning) are automatically monitored with progress updates and completion status.

.SH FILES
.TP
.I ~/.config/myscripts/proxmox-cli/
Configuration directory
.TP
.I ~/.local/log/proxmox-cli/
Log directory
.TP
.I ~/.local/tmp/system_scripts/proxmox-cli/
Temporary files and debug logs
.TP
.I ~/Documents/Spice/
SPICE console files directory

.SH ENVIRONMENT VARIABLES
.TP
.B PROXMOX_CLI_DEFAULT_USERNAME
Default username (default: root@pam)
.TP
.B PROXMOX_CLI_DEFAULT_PASSWORD
Default password
.TP
.B PROXMOX_CLI_DEFAULT_NODE_ID
Default node name
.TP
.B PROXMOX_CLI_DEFAULT_SERVER_HOST
Default server hostname
.TP
.B PROXMOX_CLI_DEFAULT_SERVER_PORT
Default server port (default: 443)

.SH NOTES
The script automatically detects Proxmox VE version and adapts API calls accordingly. Console access methods vary by version - SPICE for older versions, noVNC for newer versions, with automatic fallback.

Node-specific configurations are automatically created when using the --node option, making it easy to manage multiple Proxmox clusters or environments.

.SH LICENSE
WTFPL

.SH BUGS
No known bugs.

.SH REPORTING BUGS
https://github.com/casjay-dotfiles/issues

.SH AUTHOR
Currently maintained by Jason Hempstead <jason@casjaysdev.pro>